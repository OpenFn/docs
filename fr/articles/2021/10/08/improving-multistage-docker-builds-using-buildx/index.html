<!doctype html>
<html lang="fr" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/fr/blog/rss.xml" title="The OpenFn Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fr/blog/atom.xml" title="The OpenFn Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFLLYHHM0C"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TFLLYHHM0C",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="OpenFn/docs" href="/fr/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/fr/articles/rss.xml" title="OpenFn Help Articles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fr/articles/atom.xml" title="OpenFn Help Articles Atom Feed">
<script src="/js/freshChat.js" async></script><title data-react-helmet="true">Improving Multistage Docker Builds using Buildx | OpenFn/docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.openfn.org/fr/articles/2021/10/08/improving-multistage-docker-builds-using-buildx"><meta data-react-helmet="true" name="docsearch:language" content="fr"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Improving Multistage Docker Builds using Buildx | OpenFn/docs"><meta data-react-helmet="true" name="description" content="So you&#x27;re using docker&#x27;s multi-stage builds and noticed that your build times aren&#x27;t nearly as quick as you expected?"><meta data-react-helmet="true" property="og:description" content="So you&#x27;re using docker&#x27;s multi-stage builds and noticed that your build times aren&#x27;t nearly as quick as you expected?"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-10-08T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/stuartc"><meta data-react-helmet="true" property="article:tag" content="how-to,docker,ci/cd"><link data-react-helmet="true" rel="shortcut icon" href="/fr/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.openfn.org/fr/articles/2021/10/08/improving-multistage-docker-builds-using-buildx"><link data-react-helmet="true" rel="alternate" href="https://docs.openfn.org/articles/2021/10/08/improving-multistage-docker-builds-using-buildx" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.openfn.org/fr/articles/2021/10/08/improving-multistage-docker-builds-using-buildx" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://docs.openfn.org/articles/2021/10/08/improving-multistage-docker-builds-using-buildx" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/fr/assets/css/styles.6c09c36e.css">
<link rel="preload" href="/fr/assets/js/runtime~main.cc90ec4d.js" as="script">
<link rel="preload" href="/fr/assets/js/main.aa23c2e9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Passer au contenu principal</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fr/"><div class="navbar__logo"><img src="/fr/img/logo.svg" alt="OpenFn" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/fr/img/logo.svg" alt="OpenFn" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">OpenFn</b></a><a class="navbar__item navbar__link" href="/fr/documentation/">Docs</a><a class="navbar__item navbar__link" href="/fr/library">BibliothÃ¨que</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fr/articles">Articles</a><a class="navbar__item navbar__link" href="/fr/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>franÃ§ais</span></span></a><ul class="dropdown__menu"><li><a href="/articles/2021/10/08/improving-multistage-docker-builds-using-buildx" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/fr/articles/2021/10/08/improving-multistage-docker-builds-using-buildx" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">franÃ§ais</a></li></ul></div><a href="https://github.com/openfn/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Rechercher"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Rechercher</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/fr/articles/2021/10/22/testing-react-app-with-jest-hound">Testing a React app, the blurred line between Unit, integration and E2E</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/fr/articles/2021/10/08/improving-multistage-docker-builds-using-buildx">Improving Multistage Docker Builds using Buildx</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/fr/articles/2021/07/05/wrapping-my-head-around-jobs">Wrapping my head around jobs</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/fr/articles/2021/05/24/commcare-events">Formulaires et cas : CommCare et intÃ©gration basÃ©e sur les Ã©vÃ©nements</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/fr/articles/2021/02/17/syncing-options">Synchroniser comme vous le voulez : Penser Ã  travers le systÃ¨me de protocoles de Â« Synchronisation Â»</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/fr/articles/2021/02/03/hosted-or-local-deployment">Nos serveurs ou les vÃ´tres : Penser Ã  travers les options de dÃ©ploiement</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article><header><h1 class="margin-bottom--sm blogPostTitle_nmLu">Improving Multistage Docker Builds using Buildx</h1><div class="margin-vert--md"><time datetime="2021-10-08T00:00:00.000Z" class="blogPostDate_3tMv">October<!-- --> <!-- -->8<!-- -->, <!-- -->2021<!-- --> <!-- --> Â· <!-- -->6<!-- --> min read</time></div><div class="avatar margin-vert--md"><div style="position:relative;height:45px;width:53px"><img class="blogPostAvatar_1SuQ" style="z-index:1000;margin-left:0px" src="https://avatars.githubusercontent.com/stuartc" alt="Stuart Corbishley"></div><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/stuartc" target="_blank" rel="noreferrer noopener">Stuart Corbishley</a></h4></div></div></header><section class="markdown"><p>So you&#x27;re using docker&#x27;s multi-stage builds and noticed that your build times aren&#x27;t nearly as quick as you expected?</p><p>As many teams who spend more and more time using docker, it&#x27;s quite common to get into multi-stage builds; usually resulting in significantly smaller images.</p><p>However this comes with a pretty significant dilemma with caching. Even when using the <code>--cache-from</code> flag when building, docker only caches the last image.</p><p>One proposed solution<sup><a href="#ref1">1</a></sup>, is to pull, build and push each individual stage. Coming with tight coupling between the shape of your Dockerfile and your build process/scripts.</p><p>The other solution uses Docker Buildx which the document describes as:</p><blockquote><p>Docker Buildx is a CLI plugin that extends the docker command with the full support of the features provided by Moby BuildKit builder toolkit. It provides the same user experience as docker build with many new features like creating scoped builder instances and building against multiple nodes concurrently.</p></blockquote><p>While that sounds pretty cool, it doesn&#x27;t really touch on caching. This actually took me a while to find out that it would in fact do caching very differently. In fact it&#x27;s a very different experience using it, and has lots of really cool features that further detach you from the local docker state allowing you to build in environments that are stateless - such as Google CloudBuild without having to wire up some kind of persistence or file caching scheme.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="buildx">Buildx<a aria-hidden="true" class="hash-link" href="#buildx" title="Lien direct vers le titre">â€‹</a></h2><p>We&#x27;re only going to scratch the surface of Buildx, and with that let&#x27;s get the absolute minimum working; build our image locally.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="local-cache">Local Cache<a aria-hidden="true" class="hash-link" href="#local-cache" title="Lien direct vers le titre">â€‹</a></h3><p>First things first we need to create a builder, and select it for use. This is important as without creating a buildx builder (and setting it as the default), buildx will use the <code>docker</code> driver instead of the <code>docker-container</code> driver which we want in order to take advantage of cache exporting.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker buildx create --name mybuilder --use</span><br></span></code></pre><button type="button" aria-label="Copier le code dans le presse-papiers" class="copyButton_Ue-o clean-btn">Copier</button></div></div><blockquote><p>You only need to run this once, except in the case of CloudBuild where each invocation is a new node.</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker buildx build \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cache-from=type=local,src=/tmp/buildx-cache \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cache-to=type=local,dest=/tmp/buildx-cache \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --load \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  .</span><br></span></code></pre><button type="button" aria-label="Copier le code dans le presse-papiers" class="copyButton_Ue-o clean-btn">Copier</button></div></div><p>While the <code>--cache-*</code> options aren&#x27;t specifically required when running <code>build</code>, as <code>buildx</code> does manage its own local cache (distinct from the regular docker cache), it&#x27;s there to emphasise the options that cache can be provided via the CLI options.</p><p>This is about as close as you get to a regular docker build, with the significant difference being that you have to specify where to cache from and to.</p><p>The <code>--load</code> flag is to tell buildx to set the output to the local docker daemon. Without that you won&#x27;t actually get a resulting image to run. However, depending on your use case, this could be seen as a convenience - if you&#x27;re wanting to run your tests inside your build; a resulting image isn&#x27;t particularly useful.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="remote-cache">Remote Cache<a aria-hidden="true" class="hash-link" href="#remote-cache" title="Lien direct vers le titre">â€‹</a></h3><p>Now comes to the part I&#x27;m most interested in, caching in a stateless/remote environment. Multipart builds for us at OpenFn are essential, since we use Elixir and like other compiled languages there is a lot to be gained by only shipping the stuff you&#x27;re going to run; and no language is safe from requiring several times more &#x27;stuff&#x27; in order to build our apps.</p><p>Buildx supports a <a href="https://github.com/docker/buildx/blob/master/docs/reference/buildx_build.md#-export-build-cache-to-an-external-cache-destination---cache-to" target="_blank" rel="noopener noreferrer">handful of different types</a> of caching sources and destinations. We&#x27;re going to be using the <code>registry</code> type, where you point the cache at a repository reference (repo/image:tag style).</p><blockquote><p>One thing to note is that Google Container Registry does not support the metadata/manifest format that buildx uses, so if you&#x27;re using Google Cloud you will need to start using Artifact Registry.</p></blockquote><p><strong>Inline</strong></p><p>Push the image and the cache together:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--cache-from=type=registry,ref=$IMAGE_NAME \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--cache-to=type=inline \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copier le code dans le presse-papiers" class="copyButton_Ue-o clean-btn">Copier</button></div></div><p>This comes with the constraint that cache mode is always <code>min</code>, which only exports/caches the resulting layers; which is still better than the plain docker build caching but I think having the intermediary layers is generally a win. We want to avoid a single line change invalidating an entire build step.</p><p><strong>Registry</strong></p><p>Resulting image and cache are separated:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--cache-from=type=registry,ref=$IMAGE_NAME-build-cache \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--cache-to=type=registry,ref=$IMAGE_NAME-build-cache,mode=max \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copier le code dans le presse-papiers" class="copyButton_Ue-o clean-btn">Copier</button></div></div><p>Again coming back to the cache mode, here being <code>max</code>; all intermediary laters are exported to the cache image as well.</p><p>I have opted to create <em>two</em> images, one for caching and another for the resulting image used to deploy. This gains us a much more granular cache and the ability to more easily manage the cache image - like deleting the whole thing when wanting to invalidate the cache. Not to mention I&#x27;m fairly sure the size of our images that get pulled on kubernetes would get significantly larger with many more layers.</p><p>It feels like a safer bet to have lean images for kubernetes to pull, and chunky cache images specifically for speeding up build.</p><p>Depending on your setup, pulling large images can get <em>seriously</em> expensive in a reasonably active deployment environment - like on AWS ECS without using PrivateLink.</p><blockquote><p>It appears the <code>moby/buildkit</code> documentation also demonstrates <a href="https://github.com/moby/buildkit#registry-push-image-and-cache-separately" target="_blank" rel="noopener noreferrer">this</a> approach.</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">IMAGE_NAME=us-east4-docker.pkg.dev/&lt;project-name&gt;/platform/app \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker buildx build \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -t $IMAGE_NAME:latest \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cache-from=type=registry,ref=$IMAGE_NAME-build-cache \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cache-to=type=registry,ref=$IMAGE_NAME-build-cache,mode=max \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --push \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --progress=plain \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  .</span><br></span></code></pre><button type="button" aria-label="Copier le code dans le presse-papiers" class="copyButton_Ue-o clean-btn">Copier</button></div></div><p>This implies that the cache image is named with the suffix <code>-build-cache</code>:<br>
<code>us-east4-docker.pkg.dev/&lt;project-name&gt;/platform/app[-build-cache]</code>.</p><p>The <code>--push</code> argument tells buildx to push the resulting image to the registry.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="tips">Tips<a aria-hidden="true" class="hash-link" href="#tips" title="Lien direct vers le titre">â€‹</a></h2><p><strong>Clearing the local cache</strong></p><p>As mentioned before, buildx has its own cache and in order to clear the cache while debugging and readying a Dockerfile for remote building you&#x27;ll probably need to reach for <code>docker buildx prune</code>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="closing-thoughts">Closing thoughts<a aria-hidden="true" class="hash-link" href="#closing-thoughts" title="Lien direct vers le titre">â€‹</a></h2><p>Using buildx has been a really pleasant experience, having personally attempted using it a few times over the last 3 years; the most recent one being the first time I felt confident getting it into production. As with any sufficiently flexible build tooling, the errors and issues you can run into range from complete gibberish, genuinely concerning inconsistencies to architectural choices that you haven&#x27;t fully caught up on; requiring an ever growing list of changes you need to make to your own build process.</p><p>Our initial observations have been great, reasonable changes on our build have gone from 28 minutes to around 9 minutes.</p><p>While I have encountered a few confusing cache invalidations, especially when building locally, exporting the cache to a repository and then having CloudBuild use the image cache. And occasionally locally having what feels like <em>really</em> aggressive caching on intermediate steps, leading me to pruning the local cache.</p><p>But overall, these issues aren&#x27;t necessarily buildx issues and more likely a combination of building docker images in general except with many more steps accounted for by the cache.</p><p>It&#x27;s kinda hard to see now what the exact issues I had with it in the past, but hey!</p><p>Buildx has given me what I &#x27;expected&#x27; with docker multi-stage builds, and having the cache in a repository completely side-steps having to attach a shared volume or copying from a storage bucket.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="resources">Resources<a aria-hidden="true" class="hash-link" href="#resources" title="Lien direct vers le titre">â€‹</a></h2><ul><li><a href="https://pythonspeed.com/articles/faster-multi-stage-builds/" target="_blank" rel="noopener noreferrer">Multi-stage builds #3: Speeding up your builds</a> <a name="ref1"><sup>1</sup></a></li><li><a href="https://docs.docker.com/buildx/working-with-buildx/" target="_blank" rel="noopener noreferrer">Docker Buildx</a></li><li><a href="https://github.com/docker/buildx/blob/master/docs/reference/buildx_build.md#buildx-build" target="_blank" rel="noopener noreferrer">buildx build reference</a></li><li><a href="https://github.com/moby/buildkit#registry-push-image-and-cache-separately" target="_blank" rel="noopener noreferrer">mody/buildkey Registry cache exporter</a></li></ul></section><footer class="row margin-vert--md"><div class="col" style="margin-top:-10px"><a class="blogPostTag_36QG" href="/fr/articles/tags/how-to">how-to</a><a class="blogPostTag_36QG" href="/fr/articles/tags/docker">docker</a><a class="blogPostTag_36QG" href="/fr/articles/tags/ci-cd">ci/cd</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Navigation dans la page d&#x27;article du blog"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/fr/articles/2021/10/22/testing-react-app-with-jest-hound"><div class="pagination-nav__sublabel">Article plus rÃ©cent</div><div class="pagination-nav__label">Â« <!-- -->Testing a React app, the blurred line between Unit, integration and E2E</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/fr/articles/2021/07/05/wrapping-my-head-around-jobs"><div class="pagination-nav__sublabel">Article plus ancien</div><div class="pagination-nav__label">Wrapping my head around jobs<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#buildx" class="table-of-contents__link toc-highlight">Buildx</a><ul><li><a href="#local-cache" class="table-of-contents__link toc-highlight">Local Cache</a></li><li><a href="#remote-cache" class="table-of-contents__link toc-highlight">Remote Cache</a></li></ul></li><li><a href="#tips" class="table-of-contents__link toc-highlight">Tips</a></li><li><a href="#closing-thoughts" class="table-of-contents__link toc-highlight">Closing thoughts</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Ce site</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/fr/documentation">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/fr/library">BibliothÃ¨que</a></li><li class="footer__item"><a class="footer__link-item" href="/fr/articles">Articles</a></li><li class="footer__item"><a class="footer__link-item" href="/fr/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">CommunautÃ©</div><ul class="footer__items"><li class="footer__item"><a href="https://community.openfn.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Plus d&#x27;infos</div><ul class="footer__items"><li class="footer__item"><a href="https://www.openfn.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenFn.org</a></li><li class="footer__item"><a href="https://github.com/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Open Function Group LLC</div></div></div></footer></div>
<script src="/fr/assets/js/runtime~main.cc90ec4d.js"></script>
<script src="/fr/assets/js/main.aa23c2e9.js"></script>
</body>
</html>