<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-legacy docs-doc-page docs-doc-id-getting-started/commcare-project-walkthrough" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Walk-through - Syncing your CommCare form submissions to a PostgreSQL database | OpenFn/docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://docs.openfn.org/documentation/legacy/getting-started/commcare-project-walkthrough"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="OpenFn, workflow automation, ICT4D, integration, automation, documentation"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:site" content="@openfn"><meta data-rh="true" name="twitter:title" content="OpenFn Documentation"><meta data-rh="true" name="twitter:description" content="The leading digital public good for workflow automation, OpenFn makes ICT4D more efficient."><meta data-rh="true" name="twitter:image" content="https://docs.openfn.org/img/og-image.png"><meta data-rh="true" name="docusaurus_version" content="legacy"><meta data-rh="true" name="docusaurus_tag" content="docs-default-legacy"><meta data-rh="true" name="docsearch:version" content="legacy"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-legacy"><meta data-rh="true" property="og:title" content="Walk-through - Syncing your CommCare form submissions to a PostgreSQL database | OpenFn/docs"><meta data-rh="true" name="description" content="Before starting this tutorial please make sure:"><meta data-rh="true" property="og:description" content="Before starting this tutorial please make sure:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.openfn.org/documentation/legacy/getting-started/commcare-project-walkthrough"><link data-rh="true" rel="alternate" href="https://docs.openfn.org/documentation/legacy/getting-started/commcare-project-walkthrough" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.openfn.org/documentation/legacy/getting-started/commcare-project-walkthrough" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://O729P2PJGT-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-5RNRM5NC",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="OpenFn/docs" href="/opensearch.xml">



<link rel="alternate" type="application/rss+xml" href="/articles/rss.xml" title="OpenFn Help Articles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/articles/atom.xml" title="OpenFn Help Articles Atom Feed">
<link rel="alternate" type="application/json" href="/articles/feed.json" title="OpenFn Help Articles JSON Feed">


<script data-jsd-embedded data-key="8583229a-a951-405e-b269-25a100d04641" data-base-url="https://jsd-widget.atlassian.com" src="https://jsd-widget.atlassian.com/assets/embed.js" async></script><link rel="stylesheet" href="/assets/css/styles.6e6ba625.css">
<script src="/assets/js/runtime~main.dd8ef66c.js" defer="defer"></script>
<script src="/assets/js/main.b030df57.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5RNRM5NC" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="OpenFn" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="OpenFn" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenFn</b></a><a class="navbar__item navbar__link" href="/documentation">Docs</a><a class="navbar__item navbar__link" href="/adaptors">Adaptors</a><a class="navbar__item navbar__link" href="/articles">Articles</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/documentation/legacy/getting-started/commcare-project-walkthrough">v1.105</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/documentation">v2 ⚡</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/documentation/legacy/getting-started/commcare-project-walkthrough">v1.105</a></li></ul></div><a href="https://github.com/openfn/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->OpenFn/docs<!-- --> <b>v1.105</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/documentation">latest version</a></b> (<!-- -->v2 ⚡<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: v1.105</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Walk-through - Syncing your CommCare form submissions to a PostgreSQL database</h1></header><p><strong>Before starting this tutorial please make sure:</strong></p>
<ul>
<li>You have signed up for <a href="http://openfn.org" target="_blank" rel="noopener noreferrer">OpenFn.org</a> (it takes less than a
minute!)</li>
<li>You have checked out our glossary and have an understanding of basic OpenFn
and API terminology. Check out the pages below to get started<!-- -->
<ul>
<li><a href="/documentation/legacy/getting-started/terminology">OpenFn Concepts</a></li>
<li><a href="/documentation/legacy/getting-started/glossary">A glossary for data integration</a></li>
</ul>
</li>
<li>You have a CommCare application with at least one form configured. This is
your source system.</li>
<li>You have a PostgreSQL database configured. This is your destination system.</li>
</ul>
<p><strong>If you don’t have a CommCare application or PostgreSQL database setup, you can
also follow along with the prebuilt solution. Follow along at the links below:</strong></p>
<ol>
<li><a href="https://docs.google.com/spreadsheets/d/1pi_oxImakhtaCCCIENkjTPZeuyWhpFEcNmH7hfvTBgo/edit?usp=sharing" target="_blank" rel="noopener noreferrer">Mapping specifications document</a></li>
<li>Commcare application to download:<!-- -->
<ul>
<li>Username: testuser</li>
<li>Password: 123</li>
</ul>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="install_cc_app" src="/assets/images/install_cc_app-c893a6d320a598e7c605355984b15d4c.webp" width="852" height="466" class="img_ev3q"></p>
<ol start="3">
<li><a href="https://www.openfn.org/projects/commcare-demo/jobs" target="_blank" rel="noopener noreferrer">OpenFn project</a></li>
<li><a href="https://analytics.openfn.org/public/question/095449a9-5696-463c-a4fb-24614c9f08a5" target="_blank" rel="noopener noreferrer">Public report that shows records in the PostgreSQL database</a></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2>
<p>In this walkthrough, we will be setting up an <strong>automatic data sync between
CommCare and a PostgreSQL database</strong>. We will be syncing submissions coming from
a CommCare <code>Maternal and Newborn Health</code> application that has a
<code>Register a New Patient</code> form.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Whenever a CommCare user registers a new patient, the patient details will
automatically be synced to an already configured PostgreSQL database to enable
real-time monitoring and analytics on data collected in the field. For example,
this database can quickly be connected to a dashboard that collects aggregate
data on patients registered!</p></div></div>
<p><img decoding="async" loading="lazy" alt="cc-postgres" src="data:image/webp;base64,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" width="1144" height="246" class="img_ev3q"></p>
<p><strong>This integration can be broken up into two parts:</strong></p>
<ol>
<li>Getting data from your source system to your OpenFn inbox so you can inspect
the data structure to inform the job design for part two</li>
<li>Transforming and loading this data to your destination system</li>
</ol>
<p>… let’s get started!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-data-from-commcare">Getting data from CommCare<a href="#getting-data-from-commcare" class="hash-link" aria-label="Direct link to Getting data from CommCare" title="Direct link to Getting data from CommCare">​</a></h2>
<p><strong>There are two ways to get your CommCare form submissions in your OpenFn inbox
to inspect the data, and to later map it to your destination system.</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="option-1-webhook-to-forward-cases-andor-forms-in-real-time-from-commcare-to-openfn-using-rest-service">Option 1: Webhook to forward cases and/or forms in real-time from CommCare to OpenFn using REST service<a href="#option-1-webhook-to-forward-cases-andor-forms-in-real-time-from-commcare-to-openfn-using-rest-service" class="hash-link" aria-label="Direct link to Option 1: Webhook to forward cases and/or forms in real-time from CommCare to OpenFn using REST service" title="Direct link to Option 1: Webhook to forward cases and/or forms in real-time from CommCare to OpenFn using REST service">​</a></h3>
<p>CommCareHQ has a native data forwarding feature that provides a webhook/REST
service that can be pointed to the destination of your choice (i.e., your OpenFn
Inbox). When a webhook is configured, any Commcare forms submitted are
<strong><em>automatically forwarded</em></strong> to the designated endpoint, such as your OpenFn
inbox. After data forwarding is set up, it happens automatically, <strong><em>in
real-time for all forms and cases</em></strong>. Learn more about configuring a webhook
<a href="/adaptors/commcare#webhook-forward-cases-andor-forms-from-commcare-to-openfn-using-rest-service">here</a>.</p>
<p><img decoding="async" loading="lazy" alt="option1" src="/assets/images/option1-ab03a992d540358911f15c5fd400c453.webp" width="1132" height="572" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="option-2-extracting-commcare-data-via-the-rest-api">Option 2: Extracting Commcare data via the REST API<a href="#option-2-extracting-commcare-data-via-the-rest-api" class="hash-link" aria-label="Direct link to Option 2: Extracting Commcare data via the REST API" title="Direct link to Option 2: Extracting Commcare data via the REST API">​</a></h3>
<p>CommCare provides a robust
<a href="https://confluence.dimagi.com/display/commcarepublic/List+Forms" target="_blank" rel="noopener noreferrer">REST API</a> for
extracting and loading data. This second option involves configuring a job in
OpenFn to fetch CommCare submissions via a <code>GET</code> HTTP request with parameters to
filter your data query. Follow along for how to set this job up!</p>
<ol>
<li><strong>Create a new project space, or open up an existing one where you have Admin
access.</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="create_new_project" src="/assets/images/Create_new_project-b47871a0b6c540c5a79f2d6cddaf1538.gif" width="1226" height="672" class="img_ev3q"></p>
<ol start="2">
<li><strong>Create a new “Cron” trigger to schedule this extract job. Consider how
frequently you want this job to run. Daily? Weekly? Every 1 hour?</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="create_trigger_cc" src="/assets/images/create_trigger_cc-4a9c63aeb70cf7e9d51cfa2f8c539bc5.gif" width="1440" height="672" class="img_ev3q"></p>
<ol start="3">
<li><strong>Create a “Raw JSON” credential to input the authentication details for your
CommCare source application.</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="add_new_cred" src="/assets/images/add_new_cred-912b4b37f5b26072662520bf0d9b7a5e.gif" width="1440" height="672" class="img_ev3q"></p>
<p>In the credential <code>JSON Configuration</code>, add your credential as follows:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;appId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;APPID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;password&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;PASSWORD&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;username&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;USERNAME&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;applicationName&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;APP NAME&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;hostUrl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://www.CommCarehq.org&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;openfnInboxUrl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;INBOXURL&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Check out <a href="/documentation/legacy/getting-started/terminology#inbox">this</a> docs page on
how to find your OpenFn inbox URL to fill in the configuration above.</p></div></div>
<p>Now that you&#x27;ve configured the job Trigger and Credential to authenticate…</p>
<ol>
<li><strong>Configure a new job. Note that this job will use the HTTP adaptor in order
to connect with the CommCare REST API.</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="configure_job_cc" src="/assets/images/configure_job_cc-e94df21dc9df7094b76da52975731cb2.gif" width="1438" height="672" class="img_ev3q"></p>
<ol start="5">
<li>
<p><strong>Writing the “FETCH” job expression:</strong> You will want to write a job
expression that sends a <code>GET</code> HTTP request to CommCare’s List Forms API.</p>
<p><code>GET /https://www.CommCarecommcarehq.org/a/cc-demo-2/api/v0.5/form</code></p>
<p>We have included the code snippet for replicating this job below. Please
check out the
<a href="https://confluence.dimagi.com/display/commcarepublic/List+Forms" target="_blank" rel="noopener noreferrer">CommCare API docs</a>
on how to adjust the request query parameters.</p>
</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;https://www.CommCarehq.org/a/cc-demo-2/api/v0.5/form/&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">query</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//see API docs to adjust query parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token literal-property property">limit</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//max limit: 1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token literal-property property">offset</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">meta</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">next</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">limit</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">offset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token literal-property property">received_on_start</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;2022-02-16&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token literal-property property">received_on_end</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;2022-02-18&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token literal-property property">xmlns</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;http://openrosa.org/formdesigner/D771417E-354E-4906-A686-DF0BA230F16A&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//After the CommCare API responds to our GET request, we want to POST the data in the response to our OpenFn Inbox for further inspection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> meta</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> objects </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> openfnInboxUrl </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">configuration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> forms </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">configuration</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">baseUrl</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;https://www.openfn.org&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Posting form submissions to OpenFn Inbox...&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">each</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">forms</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">post</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">/inbox/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">openfnInboxUrl</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">body</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token literal-property property">data</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token literal-property property">references</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<ol start="6">
<li>
<p><strong>Once you are finished configuring and writing your job, save and run it!</strong></p>
</li>
<li>
<p><strong>Check out the <code>Activity History</code> tab to see if your run succeeded.</strong> If it
succeeded, you should see:</p>
<ul>
<li>Successful run log (look for the green!)</li>
<li>New Messages in your <code>Inbox</code> containing data for any forms submitted in the
time frame specified in your query.</li>
</ul>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="activity_history_cc" src="/assets/images/activity_history_cc-444425843bd52e486675125fcaa3ec98.webp" width="1260" height="608" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><strong>What do do if your run fails:</strong></p><ol>
<li>Open the run to inspect the error message</li>
<li>Adjust the job to issue and re-run the transaction as needed by clicking the
play button in <code>Activity History</code></li>
<li>Check out the <a href="/adaptors/postgresql#common-errors">PostgreSQL common errors</a>
page for more details!</li>
</ol></div></div>
<p><strong>If you want to replicate this setup and configure your own CommCare
integration, first consider your CommCare extraction options - remember that
there are 2:</strong></p>
<ol>
<li>
<p>Data forwarding webhook (native CommCare feature)</p>
</li>
<li>
<p>REST API (List Forms API - <strong><em>API access requires a paid CommCare plan</em></strong>)</p>
<p>The main advantage of using the webhook is that your data is forwarded to the
destination system in real-time. However, the List Forms API is also
advantageous because it enables users to extract data in bulk on a scheduled
basis, for syncing historical data every month on the 30th, for example.
Deciding on which option to go with depends on your business requirements.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="transforming-and-loading-commcare-data-to-a-postgresql-database">Transforming and loading CommCare data to a PostgreSQL database<a href="#transforming-and-loading-commcare-data-to-a-postgresql-database" class="hash-link" aria-label="Direct link to Transforming and loading CommCare data to a PostgreSQL database" title="Direct link to Transforming and loading CommCare data to a PostgreSQL database">​</a></h2>
<ol>
<li><strong>You should have a database configured and a username provided for OpenFn to
read and write data in your target DB tables.</strong> For this demo, we have
configured the database
<a href="https://docs.google.com/spreadsheets/d/1pi_oxImakhtaCCCIENkjTPZeuyWhpFEcNmH7hfvTBgo/edit?usp=sharing" target="_blank" rel="noopener noreferrer">like this</a>
to capture the CommCare form data. Check out the
<a href="/documentation/legacy/design/design-quickstart#3-map-data-elements-to-be-exchanged">design quickstart</a>
for how to create your own <code>mapping specification document</code> to map data
elements to be exchanged.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="db_config" src="/assets/images/db_config-10010f7749045c1ab7522074f014977b.webp" width="1122" height="564" class="img_ev3q"></p>
<ol>
<li><strong>Create a new message filter trigger, to run our second job for every new
patient record received in the OpenFn inbox.</strong> Learn more about message
filter triggers
<a href="/documentation/legacy/build/triggers#message-filter-triggers">here</a>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="create_new_trgger_db" src="/assets/images/create_new_trgger_db-0aa1c2d5037ad6d65e533b40d5911aed.gif" width="1438" height="672" class="img_ev3q"></p>
<ol>
<li><strong>Create a PostgreSQL credential which will be used by the job to
authenticate with the database.</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="add_credential_postgres" src="/assets/images/add_credential_postgres-afd69dbe6eaf064230a78172533156b0.gif" width="1434" height="672" class="img_ev3q"></p>
<ol start="4">
<li><strong>Create a new job with the <code>postgresql</code> adaptor for loading the CommCare
data into your destination database.</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="configure_job_postgres" src="/assets/images/configure_job_postgres-621ed70d671c2d2ee0228e557299d651.gif" width="1434" height="672" class="img_ev3q"></p>
<p><strong>Writing the job:</strong> For this job we will use the upsert operation to
insert/update records in the destination <code>patient</code> table and use <code>patient_id</code> as
the primary key. An <code>upsert</code> will update an existing row if a specified value
already exists in a table, and insert a new row if the specified value doesn&#x27;t
already exist.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">upsert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;patient&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;ON CONSTRAINT patient_pk&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">patient_id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.patient_name&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">patient_name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.patient_name&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">village_name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.village_name&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">last_menstrual_period</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.last_menstrual_period&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">expected_delivery_date</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.expected_delivery_date&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">children_alive</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.children_alive&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">living_children</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.living_children&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">feeling_sick</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.feeling_sick&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">total_children</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.Total_children&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token literal-property property">risk_level</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dataValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;data.Risk_level&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p>Feel free to modify the code above to reflect your CommCare and database
configuration according to your mapping specifications. Check out this
<a href="/documentation/legacy/jobs/job-studio#job-studio-features">page</a> for how to copy the
dataValue for source data fields in the OpenFn job studio.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Check out the
<a href="/documentation/legacy/design/design-quickstart#3-map-data-elements-to-be-exchanged">design quickstart</a>
for how to create your own <code>mapping specification document</code> to map data elements
to be exchanged.</p></div></div>
<ol>
<li><strong>Save and turn on the job</strong></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="time-to-test">Time to test!<a href="#time-to-test" class="hash-link" aria-label="Direct link to Time to test!" title="Direct link to Time to test!">​</a></h2>
<ol>
<li>Submit a form in CommCare</li>
<li>If you have enabled data forwarding, refresh your OpenFn inbox</li>
<li>If you have not enabled data forwarding and set up a FETCH job instead, run
the job (ensure the <code>received_on_start</code> and <code>received_on_start</code> dates in the
FETCH are appropriate).</li>
<li>Run the FETCH job–if the fetch job passes, the “Load to DB” job should
automatically run</li>
<li>Check out the <code>Activity History</code> and ensure that both runs passed (look for
the green checks in the <code>Status/Action</code> column).</li>
</ol>
<p><img decoding="async" loading="lazy" alt="activity_history_final" src="/assets/images/activity_history_final-98c6fa963452820e53025541f1e19846.webp" width="1116" height="398" class="img_ev3q"></p>
<ol start="6">
<li><strong>Finally, refresh your database and check out the new submission data!</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="metabase" src="/assets/images/metabase-298579ea2243cb909e6f74c5fd33fbb0.webp" width="2826" height="260" class="img_ev3q"></p>
<p>While this guide is specifically for PostgreSQL databases, you can generally
follow these same steps for other database types (e.g., MS SQL or MySQL)—simply
leverage a different adaptor in your job configuration.</p>
<p><strong>Other resources to check out:</strong></p>
<ol>
<li>OpenFn Job Library</li>
<li>OpenFn Docs ‘App’ pages for CommCare and Postgres</li>
</ol>
<p><strong>Any questions? Comments? New configuration ideas? Please reach out to us with
a post on the <a href="https://community.openfn.org/" target="_blank" rel="noopener noreferrer">OpenFn Community</a> forum.</strong></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/openfn/docs/edit/main/versioned_docs/version-legacy/getting-started/commcare-project-walkthrough.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting started</a></li><li><a href="#getting-data-from-commcare" class="table-of-contents__link toc-highlight">Getting data from CommCare</a><ul><li><a href="#option-1-webhook-to-forward-cases-andor-forms-in-real-time-from-commcare-to-openfn-using-rest-service" class="table-of-contents__link toc-highlight">Option 1: Webhook to forward cases and/or forms in real-time from CommCare to OpenFn using REST service</a></li><li><a href="#option-2-extracting-commcare-data-via-the-rest-api" class="table-of-contents__link toc-highlight">Option 2: Extracting Commcare data via the REST API</a></li></ul></li><li><a href="#transforming-and-loading-commcare-data-to-a-postgresql-database" class="table-of-contents__link toc-highlight">Transforming and loading CommCare data to a PostgreSQL database</a></li><li><a href="#time-to-test" class="table-of-contents__link toc-highlight">Time to test!</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">This Site</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/articles">Articles</a></li><li class="footer__item"><a class="footer__link-item" href="/adaptors">Adaptors</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://community.openfn.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.openfn.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenFn.org</a></li><li class="footer__item"><a href="https://github.com/openfn" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Open Function Group LLC</div></div></div></footer></div>
</body>
</html>