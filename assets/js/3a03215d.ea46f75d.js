"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[16476],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var i=t(96540);const s={},o=i.createContext(s);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:n},e.children)}},32791:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/path_js_expression-80f68569bbba26d96072b681c1f135c2.webp"},52125:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/path_conditions-c73c450c6be0223f12adc1b35896b4e5.webp"},57161:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"build/paths","title":"Paths & Path Conditions","description":"A Path is both a visual and functional indication defining the sequence of Steps","source":"@site/docs/build/paths.md","sourceDirName":"build","slug":"/build/paths","permalink":"/documentation/build/paths","draft":false,"unlisted":false,"editUrl":"https://github.com/openfn/docs/edit/main/docs/build/paths.md","tags":[],"version":"current","frontMatter":{"title":"Paths & Path Conditions","sidebar_label":"Paths"},"sidebar":"docs","previous":{"title":"AI Assistant","permalink":"/documentation/build/ai-assistant"},"next":{"title":"Credentials","permalink":"/documentation/build/credentials"}}');var s=t(74848),o=t(28453);const a={title:"Paths & Path Conditions",sidebar_label:"Paths"},r=void 0,l={},c=[{value:"Path Conditions",id:"path-conditions",level:2},{value:"Writing JavaScript Expressions for Custom Path Conditions",id:"writing-javascript-expressions-for-custom-path-conditions",level:2},{value:"Disabling Paths",id:"disabling-paths",level:2}];function d(e){const n={code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"A Path is both a visual and functional indication defining the sequence of Steps\nthe Workflow follows when executed. Read on for more about the different types of Paths\nand configuration tips."}),"\n",(0,s.jsx)(n.h2,{id:"path-conditions",children:"Path Conditions"}),"\n",(0,s.jsx)(n.p,{children:"There are four types of Path Conditions that define whether the Workflow will\nproceed to the next Step when executed:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Always"}),": the next Step will always run after the execution of the prior\nStep is completed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"On Success"}),": the next Step will run only if the execution of the prior\nStep ",(0,s.jsx)(n.em,{children:"succeeded"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"On Failure"}),": the next Step will run only if the execution of the prior\nStep ",(0,s.jsx)(n.em,{children:"failed"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Matches a JavaScript Expression"}),": the next Step will only run if an\nexpression evaluates to be true"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Path Conditions",src:t(52125).A+"",width:"1514",height:"616"})}),"\n",(0,s.jsx)(n.h2,{id:"writing-javascript-expressions-for-custom-path-conditions",children:"Writing JavaScript Expressions for Custom Path Conditions"}),"\n",(0,s.jsxs)(n.p,{children:["Create a ",(0,s.jsx)(n.strong,{children:"custom condition"})," with a JavaScript expression. This evaluates\nagainst the state produced by the previous Step."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"state.data.form['@name'] === \"Register New Patient\"\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This is a regular Javsacript expression with ",(0,s.jsx)(n.code,{children:"state"})," in scope. If the expression\nevaluates to true (or anything ",(0,s.jsx)(n.em,{children:"truthy"}),"), the Path will be followed and the next\nStep will be executed."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Custom Conditions",src:t(32791).A+"",width:"1036",height:"466"})}),"\n",(0,s.jsx)(n.p,{children:"Examples of valid conditions include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Run if there are no errors: ",(0,s.jsx)(n.code,{children:"!state.errors"})]}),"\n",(0,s.jsxs)(n.li,{children:["Run if some value exists on state: ",(0,s.jsx)(n.code,{children:"state.has_valid_email_address"})]}),"\n",(0,s.jsxs)(n.li,{children:["Run if a data array contains any items: ",(0,s.jsx)(n.code,{children:"state.data.length > 0"})]}),"\n",(0,s.jsxs)(n.li,{children:["Run if data includes one item which matches criteria:\n",(0,s.jsx)(n.code,{children:"state.data.includes(item => item.age > 18)"})]}),"\n",(0,s.jsxs)(n.li,{children:["Run if the last Step received a HTTP error: ",(0,s.jsx)(n.code,{children:"state.response.statusCode >= 400"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In a custom expression you ",(0,s.jsx)(n.strong,{children:"cannot"})," do any of the following:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use adaptor functions"}),"\n",(0,s.jsxs)(n.li,{children:["Use Lazy State references (",(0,s.jsx)(n.code,{children:"$"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Use control statements like ",(0,s.jsx)(n.code,{children:"if"}),", ",(0,s.jsx)(n.code,{children:"while"}),", ",(0,s.jsx)(n.code,{children:"for"}),", etc"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"disabling-paths",children:"Disabling Paths"}),"\n",(0,s.jsx)(n.p,{children:"Disabling a path will prevent any of the downstream Steps from running,\nregardless of the condition or state."}),"\n",(0,s.jsx)(n.p,{children:"This can be a useful way of temporarily deactivating part of your workflow."}),"\n",(0,s.jsx)(n.p,{children:"To disable a path:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Click on the ",(0,s.jsx)(n.code,{children:"Path"})," you want to deactive"]}),"\n",(0,s.jsxs)(n.li,{children:["Select the ",(0,s.jsx)(n.code,{children:"Disable this path"})," checkbox"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);