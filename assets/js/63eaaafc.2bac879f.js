"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[20363],{12460:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/v2_webhook_trigger-4f93ebc9a9859671486dff79f76958a0.png"},20607:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/lightning_trigger_example-78e9b9f301bb6b407e5a9677fd2d95ee.png"},28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var r=i(96540);const o={},t=r.createContext(o);function s(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(t.Provider,{value:n},e.children)}},49190:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>g,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"migration/converting-triggers","title":"Converting Triggers from v1 to v2","description":"In this article we provide an overview of how to migrate your Triggers from","source":"@site/docs/migration/converting-triggers.md","sourceDirName":"migration","slug":"/converting-triggers","permalink":"/documentation/converting-triggers","draft":false,"unlisted":false,"editUrl":"https://github.com/openfn/docs/edit/main/docs/migration/converting-triggers.md","tags":[],"version":"current","frontMatter":{"title":"Converting Triggers from v1 to v2","sidebar_label":"Converting v1 Triggers","slug":"/converting-triggers"},"sidebar":"docs","previous":{"title":"Migration Steps","permalink":"/documentation/migration-steps"},"next":{"title":"Automated Migration","permalink":"/documentation/migration/automated-migration"}}');var o=i(74848),t=i(28453);const s={title:"Converting Triggers from v1 to v2",sidebar_label:"Converting v1 Triggers",slug:"/converting-triggers"},a=void 0,g={},c=[{value:"Converting Triggers",id:"converting-triggers",level:2},{value:"Trigger Types on v1",id:"trigger-types-on-v1",level:3},{value:"Converting Cron Triggers",id:"converting-cron-triggers",level:3},{value:"Converting Flow and Fail Triggers",id:"converting-flow-and-fail-triggers",level:3},{value:"Converting Message Filters",id:"converting-message-filters",level:3},{value:"One Webhook per Workflow",id:"one-webhook-per-workflow",level:4},{value:"Path Conditions",id:"path-conditions",level:4}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"In this article we provide an overview of how to migrate your Triggers from\nOpenFn v1 to v2."}),"\n",(0,o.jsx)(n.h2,{id:"converting-triggers",children:"Converting Triggers"}),"\n",(0,o.jsx)(n.h3,{id:"trigger-types-on-v1",children:"Trigger Types on v1"}),"\n",(0,o.jsxs)(n.p,{children:["We use\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/triggers",children:"4 types of triggers"})," on\nv1: Message Filters, Cron Triggers, Flow Triggers, and Fail Triggers."]}),"\n",(0,o.jsx)(n.h3,{id:"converting-cron-triggers",children:"Converting Cron Triggers"}),"\n",(0,o.jsxs)(n.p,{children:["Setting up a\n",(0,o.jsx)(n.a,{href:"/documentation/build/triggers#cron-triggers-formerly-timers",children:"Cron Trigger on v2"})," works\njust the same as on ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/triggers",children:"v1"}),":\nwhen you're building a Workflow, select Cron Schedule as Trigger type, and set\nthe frequency."]}),"\n",(0,o.jsx)(n.h3,{id:"converting-flow-and-fail-triggers",children:"Converting Flow and Fail Triggers"}),"\n",(0,o.jsx)(n.p,{children:"With a Flow trigger, we can execute a job upon success of another specified job.\nWith a Fail trigger, the job will run if an another specified job failed."}),"\n",(0,o.jsxs)(n.p,{children:["On v2, we achieve the same conditional behavior with\n",(0,o.jsx)(n.a,{href:"/documentation/build/paths",children:"Path Conditions"}),": a job can run (1) always, (2), on success\nof another job, (3) on failure of another job, or (4) on a custom condition -\nwe'll get to this last one in the next section."]}),"\n",(0,o.jsxs)(n.p,{children:["So, if on v1 you had a Flow Trigger, on v2 you'll need to choose the\n",(0,o.jsx)(n.code,{children:"On Success"})," condition between your jobs. If you had a Fail Trigger, select the\n",(0,o.jsx)(n.code,{children:"On Failure"})," condition."]}),"\n",(0,o.jsx)(n.h3,{id:"converting-message-filters",children:"Converting Message Filters"}),"\n",(0,o.jsx)(n.p,{children:"V1 Message Filters work with webhooks: if an external application sends data to\nyour project, you can check whether the incoming message meets (or doesn't meet)\ncertain criteria, and execute jobs accordingly."}),"\n",(0,o.jsx)(n.p,{children:"V2 works on the same principle, with a somewhat different setup."}),"\n",(0,o.jsx)(n.h4,{id:"one-webhook-per-workflow",children:"One Webhook per Workflow"}),"\n",(0,o.jsx)(n.p,{children:"On V1, you had one unified Inbox for your entire project, where all messages\nwould arrive to the same shared webhook URL from every source application. These\nwere then picked up by the different jobs based on Message Filter Triggers."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Unified Inbox",src:i(98290).A+"",width:"1899",height:"802"})}),"\n",(0,o.jsx)(n.p,{children:"The main difference on V2 is that each workflow that operates with a webhook\ntrigger has its own unique webhook URL to receive data to."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"V2 Webhook Trigger",src:i(12460).A+"",width:"1190",height:"788"})}),"\n",(0,o.jsx)(n.p,{children:"This will mean that in your source applications you will probably need to configure multiple webhooks/forwarders, one for each of your recieving workflows, instead of the previous common Inbox one."}),"\n",(0,o.jsx)(n.h4,{id:"path-conditions",children:"Path Conditions"}),"\n",(0,o.jsxs)(n.p,{children:["Once you've configured your\n",(0,o.jsx)(n.a,{href:"/documentation/build/triggers#webhook-event-triggers",children:"Webhook"}),", you can use a custom\nPath Condition that matches a JavaScript expression to decide whether a\nsubsequent job should be executed or not."]}),"\n",(0,o.jsx)(n.p,{children:"For example, if on v1 you had a Message Filter trigger that looked like this:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Trigger Example",src:i(20607).A+"",width:"543",height:"287"})}),"\n",(0,o.jsx)(n.p,{children:"The matching v2 JavaScript Path Condition would look like this:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Path Condition Example",src:i(68981).A+"",width:"405",height:"217"})})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},68981:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/lightning_path_trigger_example-3c9a200f1f80daa3e0bd5498662ab694.png"},98290:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/v1_unified_inbox-7b92b326f4895b48a1150776456be64e.png"}}]);