"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[12391],{22711:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"build/sandboxes","title":"Sandboxes","description":"Sandboxes are a way to develop fixes and new features on workflows without","source":"@site/docs/build/sandboxes.md","sourceDirName":"build","slug":"/build/sandboxes","permalink":"/documentation/build/sandboxes","draft":false,"unlisted":false,"editUrl":"https://github.com/openfn/docs/edit/main/docs/build/sandboxes.md","tags":[],"version":"current","frontMatter":{"title":"Sandboxes","sidebar_label":"Sandboxes"},"sidebar":"docs","previous":{"title":"Limits","permalink":"/documentation/build/limits"},"next":{"title":"Edit Steps locally","permalink":"/documentation/build/editing-locally"}}');var i=o(74848),a=o(28453);const s={title:"Sandboxes",sidebar_label:"Sandboxes"},r=void 0,l={},d=[{value:"Isolated Context",id:"isolated-context",level:2},{value:"Creating sandboxes",id:"creating-sandboxes",level:2},{value:"Viewing a sandbox",id:"viewing-a-sandbox",level:2},{value:"Environments",id:"environments",level:2},{value:"Merging sandboxes",id:"merging-sandboxes",level:2},{value:"Conflicts",id:"conflicts",level:2},{value:"Editing sandboxes Locally",id:"editing-sandboxes-locally",level:2}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:'Sandboxes are a way to develop fixes and new features on workflows without\naffecting live, or "in production", runs.'}),"\n",(0,i.jsxs)(n.admonition,{title:"Sandboxes are new to OpenFn since October 2025.",type:"info",children:[(0,i.jsx)(n.p,{children:"At the time of writing sandboxes are under active development and testing. We\nexpect to be in full working order by the end of November 2025, but until then\nwe recommend not using them with live workflows."}),(0,i.jsx)(n.p,{children:"To access sandboxes, you'll need to enable the Experimental Features option in\nyour user settings."})]}),"\n",(0,i.jsx)(n.p,{children:"A sandbox is essentially a clone of a project, with its own private history,\nwebhooks, cron triggers credentials and access rights. It also has its own\nbilling rules - so sandbox runs and AI tokens don't affect your main project.\nUnlike most sandbox settings, the billing rules derive from the original\nproject, rather than duplicate them."}),"\n",(0,i.jsx)(n.p,{children:'The idea is that you can develop the workflow in total isolation from the main\nproject, and once you\'re done, merge (read as "push" or "promote") changes back.'}),"\n",(0,i.jsx)(n.admonition,{title:"Short-lived sandboxes",type:"tip",children:(0,i.jsx)(n.p,{children:"sandboxes work best when they're short-lived, so right now they are destroyed\nafter merging. While you can create as many sandboxes as you like (subject to\nyour usage allowance), we recommend keeping the number low to reduce the risk of\nmerge conflicts."})}),"\n",(0,i.jsx)(n.h2,{id:"isolated-context",children:"Isolated Context"}),"\n",(0,i.jsx)(n.p,{children:'A sandbox is an isolated copy of your original project with its own context. As\nsuch, your sandbox has its own "private" copies of the following artefacts and\nfeatures:'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Workflows"}),"\n",(0,i.jsx)(n.li,{children:"Dataclips"}),"\n",(0,i.jsx)(n.li,{children:"Run History"}),"\n",(0,i.jsx)(n.li,{children:"Subscription (run limits, AI credits and collection memory)"}),"\n",(0,i.jsx)(n.li,{children:"Collections"}),"\n",(0,i.jsx)(n.li,{children:"Settings"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:'By "private copy", what we mean is that changing a Workflow in a sandbox will\nnot affect the same-named Workflow in any other project or sandbox, or that a\nRun in a sandbox will contribute to your usage in any other sandbox or project,\nand so on.'}),"\n",(0,i.jsx)(n.h2,{id:"creating-sandboxes",children:"Creating sandboxes"}),"\n",(0,i.jsx)(n.p,{children:"When you create a new sandbox, we basically create a total copy of your project.\nAny changes made to the sandbox will not affect your main project workflows - so\nyou can experiment freely without breaking anything."}),"\n",(0,i.jsx)(n.p,{children:"To create a sandbox, enter a Project, click on sandboxes, and click on the\nCreate sandbox button."}),"\n",(0,i.jsxs)(n.p,{children:["You'll need to set a name for the sandbox. This is unique within your project\nand its sandboxes. If you're familiar with git, treat it like a branch name.\nOtherwise, you can either give it a general name like ",(0,i.jsx)(n.code,{children:"testing"}),", or name it for\na specific feature, like ",(0,i.jsx)(n.code,{children:"new-patient-workflow"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You'll also need to set an Environment (see below). This configures all\ncredentials within the sandbox to use that environment variant. If you're not\nsure, set the environment to ",(0,i.jsx)(n.code,{children:"dev"})," (you can change this at any time from the\nSetup tab of the sandbox Settings page)."]}),"\n",(0,i.jsx)(n.p,{children:"A color will be randomly selected to associate with the sandbox. You'll see this\ncolor in the app UI while you're using the sandbox. You can select a different\ncolor if you like."}),"\n",(0,i.jsx)(n.p,{children:"Click Create sandbox when you're ready. You'll automatically enter the sandbox."}),"\n",(0,i.jsx)(n.h2,{id:"viewing-a-sandbox",children:"Viewing a sandbox"}),"\n",(0,i.jsx)(n.p,{children:"To develop and test a sandbox, you need to enter it in the app from the\nsandboxes menu."}),"\n",(0,i.jsx)(n.p,{children:"When sandbox is active, the app will change color to help you understand what\nyou're looking at. [TODO] We also list the active sandbox in the breadcrumbs at\nthe top of the page, and in a banner on the Inspector."}),"\n",(0,i.jsx)(n.p,{children:"Each sandbox has its own isolated Workflows, Subscription, History and settings.\nAs you click through the pages, you'll notice that your original project's\ndetails are excluded. This is because your sandbox is an independent clone of\nthe original project."}),"\n",(0,i.jsx)(n.h2,{id:"environments",children:"Environments"}),"\n",(0,i.jsx)(n.p,{children:"Environments allow you to run a Workflow with a special set of credentials. This\nlets you use development servers, modes and databases while building your\nsandbox, without interfering with live production services."}),"\n",(0,i.jsxs)(n.p,{children:["Each sandbox has an associated environment. By default it's ",(0,i.jsx)(n.code,{children:"main"}),", which\nimplies that this is your live production environment. But you can create an\nenvironment like ",(0,i.jsx)(n.code,{children:"dev"})," or ",(0,i.jsx)(n.code,{children:"staging"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The environment is just a label, and each credential used in your workflow has a\nset of values associated with that label. For example, when connecting to DHIS2,\nyour main credential will contain private login details. But your ",(0,i.jsx)(n.code,{children:"dev"}),"\nenvironment might use the public sandbox and so contain a different username and\npassword."]}),"\n",(0,i.jsx)(n.p,{children:"All environments are securely stored and encrypted within our database, so it's\nperfectly safe to duplicate production credentials across multiple environments."}),"\n",(0,i.jsx)(n.p,{children:"For each Credential used in your workflow, you must ensure there is a value set\nto match your sandbox environment. If you do not configure your credentials, the\nWorkflow will fail with clear instructions on how to correct it."}),"\n",(0,i.jsx)(n.p,{children:"To change a the environment used by a Sandbox, first enter the Sandbox from the\nSandboxes page, then go to the Settings page. The environment can be edited\nunder the Identity section of the Setup tab (right at the top of the page)."}),"\n",(0,i.jsx)(n.h2,{id:"merging-sandboxes",children:"Merging sandboxes"}),"\n",(0,i.jsx)(n.p,{children:"Once you've finished making changes to your workflows, it's time to merge them\nback into your main project."}),"\n",(0,i.jsx)(n.p,{children:"This is easy in the app: simply head to the Sandboxes page, find the Sandbox you\nwant to merge in the list, and click the Merge icon on the right-hand side."}),"\n",(0,i.jsx)(n.p,{children:"You'll be prompted to select the target project or sandbox to merge into: pick\nfrom the list and click Merge. Usually you'll want to merge into the original\nproject, which is selected by default."}),"\n",(0,i.jsx)(n.p,{children:"When merging, we replace the contents of workflows in your project with those in\nyour sandbox. Any workflows which are not in the sandbox will be ignored. If you\nrename a workflow in the sandbox, you'll see the new workflow appear in your\nmain project, and the original workflow will be left alone (you'll probably want\nto delete that manually)."}),"\n",(0,i.jsx)(n.p,{children:"Note that settings and options, like concurrency and data retention rules, are\nnot transferred in the merge, nor are historical runs or dataclips. Just the\nWorkflow contents."}),"\n",(0,i.jsx)(n.p,{children:"After merging, the sandbox will be destroyed, along with its history and\ndataclips. Any environments and credentials assocaited with the project will be\nunaffected."}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"You can also use the CLI to merge your changes locally, give them one final\ntest, and then deploy them to your main project."})}),"\n",(0,i.jsx)(n.h2,{id:"conflicts",children:"Conflicts"}),"\n",(0,i.jsx)(n.p,{children:"If you've ever worked with a source version control system - like git or\nSubversion - you'll be familiar with the idea of conflicts."}),"\n",(0,i.jsx)(n.p,{children:"A conflict occurs when you're trying to merge a Sandbox into your original\nproject (or another sandbox), and there are incompatible changes between them."}),"\n",(0,i.jsxs)(n.p,{children:["Say you create a Sandbox from your main project and in the sandbox, you change\nthe adaptor of one step from ",(0,i.jsx)(n.code,{children:"common"})," to ",(0,i.jsx)(n.code,{children:"http"}),". And while you're making this\nchange, a colleague goes to the main project and sets the adaptor of the same\nstep to ",(0,i.jsx)(n.code,{children:"salesforce"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"What happens when you try and merge the sandbox? Should we preserve the original\nchange? Or accept the change in the sandbox? Or something else?"}),"\n",(0,i.jsx)(n.p,{children:"Occasionally these conflicts are trivial to resolve and you might wonder what\nall the fuss is about. But often they are complex, and it can be difficult or\nimpossible to automate a solution."}),"\n",(0,i.jsx)(n.p,{children:'[TODO not implemented yet] When we detect a conflict like this, we\'ll show a\nwarning when you try and merge the Sandbox. You can choose to "force push" the\nSandbox and overwrite whatever changes happened on the target Project, or you\ncan cancel and resolve the conflict yourself.'}),"\n",(0,i.jsx)(n.p,{children:"For now, the only way to resolve conflicts manually is to use the CLI to edit\nyour project locally, and pushed the resolved, final version up to the app."}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"We'll be adding better support for resolving conflicts soon."})}),"\n",(0,i.jsx)(n.h2,{id:"editing-sandboxes-locally",children:"Editing sandboxes Locally"}),"\n",(0,i.jsx)(n.p,{children:"Sandboxes are fully compatible with the CLI."}),"\n",(0,i.jsx)(n.p,{children:"We're still working on docs and features for that - check back soon for more\ndetails!"})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>r});var t=o(96540);const i={},a=t.createContext(i);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);