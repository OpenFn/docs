"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[5933],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var o=n(96540);const s={},r=o.createContext(s);function i(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:t},e.children)}},33410:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tutorials/http-to-googlesheets","title":"HTTP to GoogleSheets Workflow","description":"In this tutorial, we are going to walk through how to create a simple OpenFn","source":"@site/docs/tutorials/http-to-googlesheets.md","sourceDirName":"tutorials","slug":"/tutorials/http-to-googlesheets","permalink":"/documentation/tutorials/http-to-googlesheets","draft":false,"unlisted":false,"editUrl":"https://github.com/openfn/docs/edit/main/docs/tutorials/http-to-googlesheets.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"HTTP to GoogleSheets","title":"HTTP to GoogleSheets Workflow"},"sidebar":"docs","previous":{"title":"Implementation Checklist","permalink":"/documentation/get-started/implementation-checklist"},"next":{"title":"Kobo to DHIS2","permalink":"/documentation/kobo-to-dhis2"}}');var s=n(74848),r=n(28453);const i={sidebar_label:"HTTP to GoogleSheets",title:"HTTP to GoogleSheets Workflow"},l="Create a Workflow connecting a REST API to Google Sheets",a={},d=[{value:"Video Walkthrough",id:"video-walkthrough",level:2},{value:"Before you start",id:"before-you-start",level:2},{value:"Getting started",id:"getting-started",level:2},{value:"1: Create a new Workflow",id:"1-create-a-new-workflow",level:2},{value:"2. Configure your first Step to get data from the REST API",id:"2-configure-your-first-step-to-get-data-from-the-rest-api",level:2},{value:"3. Configure another Step to transform the data &amp; import your GoogleSheet",id:"3-configure-another-step-to-transform-the-data--import-your-googlesheet",level:2},{value:"4. Time to test!",id:"4-time-to-test",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"create-a-workflow-connecting-a-rest-api-to-google-sheets",children:"Create a Workflow connecting a REST API to Google Sheets"})}),"\n",(0,s.jsxs)(t.p,{children:["In this tutorial, we are going to walk through how to create a simple OpenFn\nWorkflow that automates syncing data between a REST API and Google Sheets, using\nthe ",(0,s.jsx)(t.code,{children:"http"})," and ",(0,s.jsx)(t.code,{children:"GoogleSheets"})," ",(0,s.jsx)(t.a,{href:"/adaptors",children:"Adaptors"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"video-walkthrough",children:"Video Walkthrough"}),"\n",(0,s.jsx)(t.p,{children:"Watch the video and follow along with the steps below."}),"\n",(0,s.jsx)("iframe",{width:"784",height:"441",src:"https://www.youtube.com/embed/PMj8445gLA4?si=WbJ4tmr_jnKyBfg8",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),"\n",(0,s.jsx)(t.h2,{id:"before-you-start",children:"Before you start"}),"\n",(0,s.jsx)(t.p,{children:"Here are some we assume you've looked over before you begin this process."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["You have checked out our glossary and have an understanding of basic OpenFn &\nAPI concepts. Check out the pages below to get started","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/documentation/get-started/terminology",children:"OpenFn Concepts"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/documentation/get-started/glossary",children:"A glossary for data integration"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.li,{children:"You have a Google Account. We will use it to create a credential to authorize\nwith Google Sheets."}),"\n",(0,s.jsxs)(t.li,{children:["You have access to an OpenFn project (either on a locally installed\n",(0,s.jsx)(t.a,{href:"https://github.com/OpenFn/lightning",children:"OpenFn v2 app"})," or on\n",(0,s.jsx)(t.a,{href:"https://app.openfn.org",children:"app.openfn.org"}),")."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,s.jsxs)(t.p,{children:["In this walkthrough, we will configure a Workflow to ",(0,s.jsxs)(t.strong,{children:["automatically sync ",(0,s.jsx)(t.code,{children:"user"}),"\ndata from a web REST API, and import this data to a GoogleSheet"]}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"This integration can be broken up into two parts:"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:'Get data from the REST API (the "source" app)'}),"\n",(0,s.jsx)(t.li,{children:'Transforming & importing this data to a table in your GoogleSheet (the\n"destination" app)'}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Let\u2019s get started!"}),"\n",(0,s.jsx)(t.h2,{id:"1-create-a-new-workflow",children:"1: Create a new Workflow"}),"\n",(0,s.jsx)(t.p,{children:"To create a new Workflow in your Project:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Go to the ",(0,s.jsx)(t.code,{children:"project dashboard"})," page."]}),"\n",(0,s.jsxs)(t.li,{children:["Click ",(0,s.jsx)(t.code,{children:"Create new workflow"})," button."]}),"\n",(0,s.jsxs)(t.li,{children:["Give your Workflow a descriptive ",(0,s.jsx)(t.code,{children:"Name"})," (e.g., ",(0,s.jsx)(t.code,{children:"Sync Users List"}),")."]}),"\n",(0,s.jsxs)(t.li,{children:["Choose your ",(0,s.jsx)(t.a,{href:"/documentation/build/triggers",children:"Trigger"})]}),"\n",(0,s.jsxs)(t.li,{children:["Edit your first ",(0,s.jsx)(t.a,{href:"/documentation/build/steps/",children:"Step"})]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"2-configure-your-first-step-to-get-data-from-the-rest-api",children:"2. Configure your first Step to get data from the REST API"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://jsonplaceholder.typicode.com/users",children:"JSONPlaceholder"})," provides a free\nfake API for testing and prototyping. We will be using the\n",(0,s.jsx)(t.a,{href:"https://jsonplaceholder.typicode.com/users",children:"Users Rest API"})," for extracting\nusers data. This involves configuring a step in OpenFn to fetch users data via a\n",(0,s.jsx)(t.code,{children:"GET"})," HTTP request. Click your first step to set up!, Configurate the step with\nfollowing options"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Name ",(0,s.jsx)(t.code,{children:"Fetch Users"})]}),"\n",(0,s.jsxs)(t.li,{children:["Adaptor ",(0,s.jsx)(t.code,{children:"http"})]}),"\n",(0,s.jsxs)(t.li,{children:["Version: ",(0,s.jsx)(t.code,{children:"6.0.0"})]}),"\n",(0,s.jsxs)(t.li,{children:['Credentials (Optional: "Raw JSON" credential) -\n',(0,s.jsx)(t.code,{children:'{ "baseUrl": "https://jsonplaceholder.typicode.com/"}'})]}),"\n",(0,s.jsxs)(t.li,{children:["Job code: Add the operation ",(0,s.jsx)(t.code,{children:'get("users")'}),' in the code block if you\'ve\nconfigured the "Raw JSON" credential for the jsonplaceholder as the baseURL.']}),"\n"]}),"\n",(0,s.jsx)(t.admonition,{title:"Need help writing job code?",type:"tip",children:(0,s.jsxs)(t.p,{children:["Check out the docs on the ",(0,s.jsx)(t.a,{href:"/adaptors/packages/http-readme",children:'"http" Adaptor'}),",\n",(0,s.jsx)(t.a,{href:"/documentation/build/steps/",children:"configuring Steps"}),", and\n",(0,s.jsx)(t.a,{href:"/documentation/jobs/job-writing-guide",children:"job-writing"}),"."]})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Once you are finished configuring and writing your Step, save and run it!"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["See the ",(0,s.jsx)(t.a,{href:"/documentation/build/workflows",children:"Workflows section"})," for more guidance on\nbuilding & running Workflows."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsxs)(t.strong,{children:["Check out the ",(0,s.jsx)(t.code,{children:"Output & Log"})," panel to see if your run succeeded."]})," If it\nsucceeded, you should see:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Status ",(0,s.jsx)(t.code,{children:"success"})]}),"\n",(0,s.jsxs)(t.li,{children:["Log tab end with ",(0,s.jsx)(t.code,{children:"Run complete with status: success"})]}),"\n",(0,s.jsxs)(t.li,{children:["Input tab has ",(0,s.jsx)(t.code,{children:"{}"})]}),"\n",(0,s.jsxs)(t.li,{children:["Output tab has ",(0,s.jsx)(t.code,{children:"{ data: [ {...}]}"})]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"3-configure-another-step-to-transform-the-data--import-your-googlesheet",children:"3. Configure another Step to transform the data & import your GoogleSheet"}),"\n",(0,s.jsxs)(t.p,{children:["Create a new Googlesheet ",(0,s.jsx)(t.code,{children:"Credential"})," using your Google account's email. (Make\nsure this Google user has edit access to the GoogleSheet you want to integrate\nwith.)"]}),"\n",(0,s.jsx)(t.admonition,{title:"Don't see a GoogleSheets credential option?",type:"info",children:(0,s.jsxs)(t.p,{children:["If your instance superuser hasn't configured a global Oauth client, you may need\nto set one up for yourself. Learn about Oauth Clients\n",(0,s.jsx)(t.a,{href:"/documentation/oauth#oauth-clients",children:"here"})," and specifics for a GoogleSheet\nClient ",(0,s.jsx)(t.a,{href:"/adaptors/googlesheets#permissions-scopes",children:"here"}),"."]})}),"\n",(0,s.jsxs)(t.p,{children:["For this demo, we configured the Googlesheet\n",(0,s.jsx)(t.a,{href:"https://docs.google.com/spreadsheets/d/1gT4cpHSDQp8A_JIX_5lqTLTwV0xBo_u8u3ZNWALmCLc/edit?usp=sharing",children:"like this"}),"\nto store the ",(0,s.jsx)(t.code,{children:"users"})," data."]}),"\n",(0,s.jsxs)(t.p,{children:["Create a new step with the ",(0,s.jsx)(t.code,{children:"googlesheet"})," adaptor for loading the users data into\nyour destination GoogleSheet. Configure the step with the following options"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Name ",(0,s.jsx)(t.code,{children:"Sync Users"})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Adaptor ",(0,s.jsx)(t.code,{children:"googlesheets"})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Version: ",(0,s.jsx)(t.code,{children:"2.2.2"})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Credentials: Create new ",(0,s.jsx)(t.code,{children:"GoogleSheet OAuth"})," Credential and save it"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Step operations: For this job we will use the ",(0,s.jsx)(t.code,{children:"appendValues()"})," operation to\nadd an array of rows to the spreadsheet. Make sure you update the\n",(0,s.jsx)(t.code,{children:"spreadsheetId"})," to match the Id of your spreadsheet"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"// Prepare array of users data\nfn(state => {\n  const users = state.data.map(\n    ({ id, name, username, address, phone, website, company }) => [\n      id,\n      name,\n      username,\n      address.city,\n      phone,\n      website,\n      company.name,\n    ]\n  );\n\n  return { ...state, users };\n});\n\n// Append user data to GoogleSheet\nappendValues({\n  spreadsheetId: '1gT4cpHSDQp8A_JIX_5lqTLTwV0xBo_u8u3ZNWALmCLc',\n  range: 'users!A1:G1',\n  values: state => state.users,\n});\n"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Input - ",(0,s.jsx)(t.code,{children:"Final output of Fetch Users"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["If you have already ran the ",(0,s.jsx)(t.code,{children:"Fetch Users"})," Step, you will have initial input to\ntest ",(0,s.jsx)(t.code,{children:"Sync Users"})," Step. Select the input from the input panel and click\n",(0,s.jsx)(t.code,{children:"Create New Work Order"})," to run this Step."]}),"\n",(0,s.jsx)(t.h2,{id:"4-time-to-test",children:"4. Time to test!"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Select and open inspector for ",(0,s.jsx)(t.code,{children:"Fetch Users"})," step"]}),"\n",(0,s.jsxs)(t.li,{children:["Create a new empty input ",(0,s.jsx)(t.code,{children:"{}"})]}),"\n",(0,s.jsxs)(t.li,{children:["Click ",(0,s.jsx)(t.code,{children:"Create New Work Order"})," to execute the step"]}),"\n",(0,s.jsxs)(t.li,{children:["Check results in ",(0,s.jsx)(t.code,{children:"Output & Logs"})," panel and ensure that both steps have passed\nwith status ",(0,s.jsx)(t.code,{children:"success"})]}),"\n",(0,s.jsx)(t.li,{children:"Finally check your spreadsheet to see the synced users data"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Encountering errors or getting stuck? Check out the\n",(0,s.jsx)(t.a,{href:"/documentation/build/workflows",children:"Workflow"})," or\n",(0,s.jsx)(t.a,{href:"/documentation/monitor-history/troubleshooting",children:"Troubleshooting"})," docs."]}),"\n",(0,s.jsx)(t.admonition,{title:"Are you blocked? Have questions?",type:"tip",children:(0,s.jsxs)(t.p,{children:["Reminder to ",(0,s.jsx)(t.a,{href:"#video-walkthrough",children:"watch the video"})," or post on the\n",(0,s.jsx)(t.a,{href:"https://community.openfn.org",children:"Community"})," to ask for help!"]})})]})}function c(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);