"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[2280],{35979:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>p,toc:()=>l});var n=o(58168),r=(o(96540),o(15680));const a={title:"Migration Steps",sidebar_label:"Migration Steps",slug:"/migration-steps"},i=void 0,p={unversionedId:"migration/migration-steps",id:"migration/migration-steps",title:"Migration Steps",description:"In this article, we walk you through the steps of migrating your project from",source:"@site/docs/migration/migration-steps.md",sourceDirName:"migration",slug:"/migration-steps",permalink:"/documentation/migration-steps",draft:!1,editUrl:"https://github.com/openfn/docs/edit/main/docs/migration/migration-steps.md",tags:[],version:"current",frontMatter:{title:"Migration Steps",sidebar_label:"Migration Steps",slug:"/migration-steps"},sidebar:"docs",previous:{title:"Portability",permalink:"/documentation/deploy/portability"},next:{title:"Converting v1 Triggers",permalink:"/documentation/converting-triggers"}},s={},l=[{value:"Guide for migrating your v1 project to v2",id:"guide-for-migrating-your-v1-project-to-v2",level:2},{value:"How to automatically migrate your OpenFn project configuration to v2",id:"how-to-automatically-migrate-your-openfn-project-configuration-to-v2",level:2},{value:"How to manually migrate your OpenFn project configuration to v2",id:"how-to-manually-migrate-your-openfn-project-configuration-to-v2",level:3}],u={toc:l},g="wrapper";function c(e){let{components:t,...o}=e;return(0,r.yg)(g,(0,n.A)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"In this article, we walk you through the steps of migrating your project from\nOpenFn v1 to v2. Some of these steps may require you to make new design\ndecisions. For customized migration support, ask your questions on our\n",(0,r.yg)("a",{parentName:"p",href:"https://.community.openfn.org"},"Community")," or get in touch at\n",(0,r.yg)("a",{parentName:"p",href:"mailto://support@openfn.org"},"support@openfn.org"),"."),(0,r.yg)("h2",{id:"guide-for-migrating-your-v1-project-to-v2"},"Guide for migrating your v1 project to v2"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Create a new Project on the v2 platform by registering for an account on the\nOpenFn-hosted platform (",(0,r.yg)("a",{parentName:"p",href:"https://www.openfn.org/pricing"},"register here")," for\nfree & paid plans) or deploy your own instance of\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/OpenFn/lightning"},"OpenFn/lightning"),".")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("a",{parentName:"p",href:"/documentation/manage-projects/platform-mgmt"},"Customize your Project")," with a custom\nname and description.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Think about how long you want OpenFn to retain your input and output data and\nconfigure data storage accordingly.\n",(0,r.yg)("a",{parentName:"p",href:"/documentation/manage-projects/io-data-storage"},"See this page")," to learn more.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Migrate your v1 project's ",(0,r.yg)("inlineCode",{parentName:"p"},"Jobs")," configuration to the v2, as ",(0,r.yg)("inlineCode",{parentName:"p"},"Workflows"),". See\nthe below sections to determine if you prefer to automatically (recommended)\nor manually migrate your OpenFn configuration from your v1 to v2 project.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Create ",(0,r.yg)("a",{parentName:"p",href:"/documentation/build/credentials"},"Credentials")," for your test and production\nsystems. ",(0,r.yg)("strong",{parentName:"p"},'First test your Workflows using your "test" or "sandbox"\ncredentials.'))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Once your Workflow Steps are fully configured, add a new custom input and\n",(0,r.yg)("a",{parentName:"p",href:"/documentation/build/steps/step-editor"},"run your workflow")," to start testing.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Check out the ",(0,r.yg)("a",{parentName:"p",href:"/documentation/monitor-history/activity-history"},"History")," page to\nmonitor and review your Runs to confirm your Workflows are running\nsuccessfully.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Test and iterate.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Once your Workflows are tested, sync your new v2 configuration to GitHub for\nversion control. Follow ",(0,r.yg)("a",{parentName:"p",href:"/documentation/link-to-GitHub"},"this guide")," to\nlearn how it works and set it up."),(0,r.yg)("admonition",{parentName:"li",title:"Turn off GitHub sync on v1 before setting it up on v2 If you're",type:"warning"},(0,r.yg)("p",{parentName:"admonition"},"using the same GitHub repo and branch for both your v1 and v2 project,\ndisable GitHub sync on v1 ",(0,r.yg)("em",{parentName:"p"},"before")," you enable it on v2. Otherwise every\nchange you still make on v1 will trigger a GitHub > OpenFn sync on v2,\noverwriting any changes you may not have synced yet from your v2 project to GitHub.")),(0,r.yg)("admonition",{parentName:"li",title:"GitHub sync works differently in v2",type:"warning"},(0,r.yg)("p",{parentName:"admonition"},"Once the GitHub sync is live, consider that all changes will be synced with\nthe ",(0,r.yg)("inlineCode",{parentName:"p"},"project.yaml")," file. Therefore, any job changes made via GitHub, must be\napplied directly to this file. (Unlike the v1 GitHub sync, edits to\nindividual job files will not sync to the OpenFn v2 app. Rather, all changes\nmust be made in the ",(0,r.yg)("inlineCode",{parentName:"p"},"project.yaml")," file or within the linked web app.)"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"You may have other design decisions to make, too. For example, if in your v1\nproject, you may have a workflow where Job #1 sends a http ",(0,r.yg)("inlineCode",{parentName:"p"},"post")," request\nwith data to your Project's Inbox, which then triggers a Job #2 (or step 2\nin your workflow). In v2, the Project Inbox does not exist, so we recommend\nthat your re-configure Job #1 and #2 as one combined Workflow with 2 Steps\n(1 Step for each Job you had in the v1 configuration)."),(0,r.yg)("p",{parentName:"li"},"Note that in v2 you can still configure one Workflow to trigger another\nWorkflow via a ",(0,r.yg)("inlineCode",{parentName:"p"},"post")," request, but we recommend this should only be done if\nthe processes are truly distinct and not part of one workflow. The\n1-Workflow design will also help to minimize costs and complexity.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"If your Workflows use a Webhook Trigger, you can add an extra layer of\nsecurity by requiring webhook authentication\n(",(0,r.yg)("a",{parentName:"p",href:"/documentation/webhook-security"},"see relevant docs"),"). Note that if you\ndo this, you will need to update the webhook configuration in the external\napp that points to OpenFn.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Fine-tune your security configuration by following our\n",(0,r.yg)("a",{parentName:"p",href:"https://docs.google.com/document/d/1XtiiKszeK5MAltPyqvlL4KCjkHC87YYlX8OPh6fZn4c/edit?usp=sharing"},"Project Security and Go-Live Checklist"),"\nto consider other v2-specific security features\n(",(0,r.yg)("a",{parentName:"p",href:"/documentation/manage-projects/io-data-storage"},"such as input/output data storage"),").")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Test some more to validate the correct configuration, especially if you've\nadjusted your Project Settings.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},'When all Workflows run successfully, update each Step in your Workflows to\nuse a "production" Credential to connect to live systems.')),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"While you're testing, you may be using ",(0,r.yg)("a",{parentName:"p",href:"/documentation/build/paths"},"Path Conditions"),"\nto allow only test data, such as ",(0,r.yg)("inlineCode",{parentName:"p"},"test_case == yes"),". If you then want to\nexclude test data from your production systems, don't forget to update edge\nconditions, eg. ",(0,r.yg)("inlineCode",{parentName:"p"},"test_case == no"),". Check out ","[this\nguide(https://docs.openfn.org/documentation/converting-triggers#converting-message-filters)]","\nfor a specific example.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"If webhooks are used in your source applications, update the webhook\nconfigurations in these apps to point to your v2 OpenFn Workflows (you can\nlocate your Workflow's new webhook endpoint URL by clicking n the Trigger).")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},'You\u2019re now done with your new v2 Project setup! You can "turn on" your\nWorkflows and monitor usage on your\n',(0,r.yg)("a",{parentName:"p",href:"/documentation/monitoring-workflows"},"Workflows Dashboard"),". Now time to\nshut down your v1 project.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},'Turn "off" your Jobs on v1.')),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"You have the option to export some of your v1 data: ",(0,r.yg)("inlineCode",{parentName:"p"},"Messages")," and\n",(0,r.yg)("inlineCode",{parentName:"p"},"Run History")," for reference or archival. To do this, visit the ",(0,r.yg)("inlineCode",{parentName:"p"},"Downloads"),"\npage in your v1 project. Your most recent downloadable ",(0,r.yg)("inlineCode",{parentName:"p"},"receipts archives"),"\nand ",(0,r.yg)("inlineCode",{parentName:"p"},"runs archives")," are at the bottom of the export list. You can generate a\nnew export by navigating to the ",(0,r.yg)("inlineCode",{parentName:"p"},"Inbox")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"Activity History")," page,\nfiltering your view to query the desired data to export, and then select the\ncloud \u2601 icon to ",(0,r.yg)("inlineCode",{parentName:"p"},"Export to csv"),".")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Finally, when ready, request to delete your project on v1. To do this, go to\nyour v1 ",(0,r.yg)("inlineCode",{parentName:"p"},"Project Settings")," and select the ",(0,r.yg)("inlineCode",{parentName:"p"},"Delete Project")," button."))),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},(0,r.yg)("a",{parentName:"p",href:"https://docs.google.com/spreadsheets/d/1pTw5_PZ0RNad-haqw_ydel5ka4ezSxcfF71un7Sga5I/edit?usp=sharing"},"See this XLS checklist"),"\nof the above migration steps to help manage your migration. If you encounter\nquestions or issues, post on the ",(0,r.yg)("a",{parentName:"p",href:"https://community.openfn.org"},"Community"),".")),(0,r.yg)("h2",{id:"how-to-automatically-migrate-your-openfn-project-configuration-to-v2"},"How to automatically migrate your OpenFn project configuration to v2"),(0,r.yg)("p",null,"Check out our docs on\n",(0,r.yg)("a",{parentName:"p",href:"/documentation/migration/automated-migration"},"Self-Guided Migration")," to learn more about\nhow to ",(0,r.yg)("em",{parentName:"p"},"automatically")," migrate your configuration from v1 to v2. ",(0,r.yg)("strong",{parentName:"p"},"This is the\nrecommended process")," but requires admin-level user access to both your v1 and\nv2 Projects."),(0,r.yg)("h3",{id:"how-to-manually-migrate-your-openfn-project-configuration-to-v2"},"How to manually migrate your OpenFn project configuration to v2"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"On v2, the Jobs you use for automating tasks are organized as\n",(0,r.yg)("a",{parentName:"li",href:"/documentation/tutorials/tutorial"},"Workflows"),', where each Job is 1 "Step" in a\nWorkflow. Build out a skeleton to get started: set up\n',(0,r.yg)("a",{parentName:"li",href:"/documentation/build/triggers"},"Triggers")," and the key\n",(0,r.yg)("a",{parentName:"li",href:"https://docs.openfn.org/documentation/build/steps"},"Steps")," to get started."),(0,r.yg)("li",{parentName:"ol"},"While configuring the Steps in your workflow, consider ",(0,r.yg)("em",{parentName:"li"},"which conditions"),"\ndefine when the next Step should execute. On v2, you can define\n",(0,r.yg)("a",{parentName:"li",href:"https://docs.openfn.org/documentation/build/paths"},"Path conditions"),' to\nconfigure whether a Step should run "on success", "on failure", or based on\ncustom logic. Follow\n',(0,r.yg)("a",{parentName:"li",href:"/documentation/converting-triggers"},'our guide on converting your v1 "triggers" to v2 configuration'),"\nto learn more."),(0,r.yg)("li",{parentName:"ol"},"Once the basic Steps and Paths are configured, copy your job code from your\nGitHub repository or directly from your v1 project and paste it into each\nStep's Inspector view. Get familiar with the revamped Job Inspector for code\nediting ",(0,r.yg)("a",{parentName:"li",href:"/documentation/build/steps/step-editor"},"here"),"."),(0,r.yg)("li",{parentName:"ol"},"Make sure the Adaptor and Adaptor Version match your v1 jobs exactly. See the\n",(0,r.yg)("a",{parentName:"li",href:"/documentation/build/steps/step-editor"},"Steps docs")," for more info on these.")),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"The OpenFn v1 platform will be sunsetted in 2025. If you need support migrating\nyour project, post on ",(0,r.yg)("a",{parentName:"p",href:"https://community.openfn.org"},"Community")," or contact\n",(0,r.yg)("a",{parentName:"p",href:"mailto://support@openfn.org"},"support@openfn.org")," for paid support options and\nprivate queries.")))}c.isMDXComponent=!0},15680:(e,t,o)=>{o.d(t,{xA:()=>u,yg:()=>m});var n=o(96540);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function p(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=n.createContext({}),l=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},u=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},g="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),g=l(o),y=r,m=g["".concat(s,".").concat(y)]||g[y]||c[y]||a;return o?n.createElement(m,i(i({ref:t},u),{},{components:o})):n.createElement(m,i({ref:t},u))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=y;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[g]="string"==typeof e?e:r,i[1]=p;for(var l=2;l<a;l++)i[l]=o[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}y.displayName="MDXCreateElement"}}]);