"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[93481],{28453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>a});var r=t(96540);const i={},o=r.createContext(i);function s(n){const e=r.useContext(o);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),r.createElement(o.Provider,{value:e},n.children)}},51578:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"library/jobs/auto/opencrvs-create-birth-notification","title":"Create birth notification in OpenCRVS","description":"\ud83d\udcdc This job is an official example from OpenFn.","source":"@site/adaptors/library/jobs/auto/opencrvs-create-birth-notification.md","sourceDirName":"library/jobs/auto","slug":"/library/jobs/auto/opencrvs-create-birth-notification","permalink":"/adaptors/library/jobs/auto/opencrvs-create-birth-notification","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Create birth notification in OpenCRVS","sidebar_label":"\ud83d\udcdc Create birth notification in OpenCRVS","id":"opencrvs-create-birth-notification","keywords":["library","job","expression","opencrvs"]},"sidebar":"adaptors","previous":{"title":"Configuration","permalink":"/adaptors/packages/opencrvs-configuration-schema"},"next":{"title":"\ud83d\udcdc Query an event in OpenCRVS","permalink":"/adaptors/library/jobs/auto/opencrvs-query-events"}}');var i=t(74848),o=t(28453);const s={title:"Create birth notification in OpenCRVS",sidebar_label:"\ud83d\udcdc Create birth notification in OpenCRVS",id:"opencrvs-create-birth-notification",keywords:["library","job","expression","opencrvs"]},a=void 0,c={},u=[{value:"Metadata",id:"metadata",level:2},{value:"Key Functions",id:"key-functions",level:2},{value:"Expression",id:"expression",level:2}];function l(n){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.p,{children:["\ud83d\udcdc ",(0,i.jsx)("em",{children:"This job is an official example from OpenFn."})]}),"\n",(0,i.jsx)(e.h2,{id:"metadata",children:"Metadata"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Name: Create birth notification in OpenCRVS"}),"\n",(0,i.jsxs)(e.li,{children:["Adaptor: ",(0,i.jsx)(e.a,{href:"https://www.github.com/openfn/language-opencrvs",children:(0,i.jsx)(e.code,{children:"@openfn/language-opencrvs"})})]}),"\n",(0,i.jsxs)(e.li,{children:["Adaptor Version: ",(0,i.jsx)(e.a,{href:"https://www.github.com/openfn/language-opencrvs",children:(0,i.jsx)(e.code,{children:"latest"})})]}),"\n",(0,i.jsx)(e.li,{children:"Created date unknown"}),"\n",(0,i.jsx)(e.li,{children:"Updated date unknown"}),"\n",(0,i.jsxs)(e.li,{children:["Score: ",(0,i.jsx)("b",{children:"100"})," (an ",(0,i.jsx)(e.a,{href:"/adaptors/library/#library-scores",children:"indicator"})," of how useful this job may be)"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"key-functions",children:"Key Functions"}),"\n",(0,i.jsx)(e.h2,{id:"expression",children:"Expression"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// Create a birth notification in OpenCRVS\n\nfn(state => {\n  const motherId = util.uuid();\n  const comparisonId = util.uuid();\n  const childId = util.uuid();\n  const encounterId = util.uuid();\n  const fatherId = util.uuid();\n  const informantId = util.uuid();\n\n  state.birthNotificationEntryData = [\n    {\n      fullUrl: `urn:uuid:${comparisonId}`,\n      resource: {\n        identifier: {\n          system: 'urn:ietf:rfc:3986',\n          value: '8f793c5a-3d53-4c9b-898b-1c04759716c6',\n        },\n        resourceType: 'Composition',\n        status: 'final',\n        type: {\n          coding: [\n            {\n              system: 'http://opencrvs.org/doc-types',\n              code: 'birth-notification',\n            },\n          ],\n          text: 'Birth Notification',\n        },\n        class: {\n          coding: [\n            {\n              system: 'http://opencrvs.org/specs/classes',\n              code: 'crvs-document',\n            },\n          ],\n          text: 'CRVS Document',\n        },\n        subject: {\n          reference: `urn:uuid:${childId}`,\n        },\n        date: '2022-08-14T14:43:47.000Z',\n        author: [],\n        title: 'Birth Notification',\n        section: [\n          {\n            title: 'Child details',\n            code: {\n              coding: [\n                {\n                  system: 'http://opencrvs.org/specs/sections',\n                  code: 'child-details',\n                },\n              ],\n              text: 'Child details',\n            },\n            entry: [\n              {\n                reference: `urn:uuid:${childId}`,\n              },\n            ],\n          },\n          {\n            title: 'Birth encounter',\n            code: {\n              coding: [\n                {\n                  system: 'http://opencrvs.org/specs/sections',\n                  code: 'birth-encounter',\n                },\n              ],\n              text: 'Birth encounter',\n            },\n            entry: [\n              {\n                reference: `urn:uuid:${encounterId}`,\n              },\n            ],\n          },\n          {\n            title: \"Mother's details\",\n            code: {\n              coding: [\n                {\n                  system: 'http://opencrvs.org/specs/sections',\n                  code: 'mother-details',\n                },\n              ],\n              text: \"Mother's details\",\n            },\n            entry: [\n              {\n                reference: `urn:uuid:${motherId}`,\n              },\n            ],\n          },\n          {\n            title: \"Informant's details\",\n            code: {\n              coding: [\n                {\n                  system: 'http://opencrvs.org/specs/sections',\n                  code: 'informant-details',\n                },\n              ],\n              text: \"Informant's details\",\n            },\n            entry: [\n              {\n                reference: `urn:uuid:${informantId}`,\n              },\n            ],\n          },\n          {\n            title: \"Father's details\",\n            code: {\n              coding: [\n                {\n                  system: 'http://opencrvs.org/doc-sections',\n                  code: 'father-details',\n                },\n              ],\n              text: \"Father's details\",\n            },\n            entry: [\n              {\n                reference: `urn:uuid:${fatherId}`,\n              },\n            ],\n          },\n        ],\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${util.uuid()}`,\n      resource: {\n        resourceType: 'Task',\n        status: 'draft',\n        intent: 'unknown',\n        identifier: [],\n        code: {\n          coding: [\n            {\n              system: 'http://opencrvs.org/specs/types',\n              code: 'BIRTH',\n            },\n          ],\n        },\n        focus: {\n          reference: `urn:uuid:${comparisonId}`,\n        },\n        extension: [\n          {\n            url: 'http://opencrvs.org/specs/extension/contact-person',\n            valueString: 'MOTHER',\n          },\n          {\n            url: 'http://opencrvs.org/specs/extension/contact-person-phone-number',\n            valueString: '+260759205190',\n          },\n          {\n            url: 'http://opencrvs.org/specs/extension/contact-person-email',\n            valueString: 'axon@gmail.com',\n          },\n          {\n            url: 'http://opencrvs.org/specs/extension/timeLoggedMS',\n            valueInteger: 0,\n          },\n          {\n            url: 'http://opencrvs.org/specs/extension/in-complete-fields',\n            valueString: 'N/A',\n          },\n          {\n            url: 'http://opencrvs.org/specs/extension/regLastOffice',\n            valueReference: {\n              reference: 'Location/178e21a9-60ad-4283-bd49-f576f61a5648',\n            },\n          },\n        ],\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${childId}`,\n      resource: {\n        resourceType: 'Patient',\n        active: true,\n        name: [\n          {\n            use: 'en',\n            family: 'Tatke',\n            given: ['Harney'],\n          },\n        ],\n        gender: 'male',\n        birthDate: '2022-06-29',\n        deceasedBoolean: false,\n        multipleBirthBoolean: false,\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${motherId}`,\n      resource: {\n        resourceType: 'Patient',\n        active: true,\n        identifier: [\n          {\n            use: 'official',\n            type: {\n              coding: [\n                {\n                  system: 'http://opencrvs.org/specs/identifier-type',\n                  code: 'NATIONAL_ID',\n                },\n              ],\n            },\n            value: '3624667568',\n          },\n        ],\n        name: [\n          {\n            use: 'en',\n            family: 'Ratke',\n            given: ['Mom'],\n          },\n        ],\n        gender: 'female',\n        telecom: [\n          {\n            use: 'mobile',\n            system: 'phone',\n            value: '+260759205190',\n          },\n        ],\n        birthDate: '2002-06-29',\n        deceasedBoolean: false,\n        multipleBirthInteger: 2,\n        maritalStatus: {\n          coding: [\n            {\n              system: 'http://hl7.org/fhir/StructureDefinition/marital-status',\n              code: 'M',\n            },\n          ],\n          text: 'MARRIED',\n        },\n        address: [\n          {\n            type: 'PRIMARY_ADDRESS',\n            line: [\n              '12',\n              'Usual Street',\n              'Usual Residental Area',\n              '',\n              '',\n              'URBAN',\n            ],\n            city: 'Meghanland',\n            district: 'c51ea274-8ffa-4b0b-b3d3-12991e9f0630',\n            state: 'c5d7a275-3638-41a3-bd53-145bd9410fd6',\n            postalCode: '52275',\n            country: 'FAR',\n          },\n        ],\n        extension: [\n          {\n            url: 'http://opencrvs.org/specs/extension/patient-occupation',\n            valueString: 'Housewife',\n          },\n          {\n            url: 'http://hl7.org/fhir/StructureDefinition/patient-nationality',\n            extension: [\n              {\n                url: 'code',\n                valueCodeableConcept: {\n                  coding: [\n                    {\n                      system: 'urn:iso:std:iso:3166',\n                      code: 'FAR',\n                    },\n                  ],\n                },\n              },\n              {\n                url: 'period',\n                valuePeriod: {\n                  start: '',\n                  end: '',\n                },\n              },\n            ],\n          },\n          {\n            url: 'http://opencrvs.org/specs/extension/educational-attainment',\n            valueString: 'POST_SECONDARY_ISCED_4',\n          },\n        ],\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${informantId}`,\n      resource: {\n        resourceType: 'RelatedPerson',\n        relationship: {\n          coding: [\n            {\n              system:\n                'http://hl7.org/fhir/ValueSet/relatedperson-relationshiptype',\n              code: 'MOTHER',\n            },\n          ],\n        },\n        patient: {\n          reference: `urn:uuid:${motherId}`,\n        },\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${fatherId}`,\n      resource: {\n        resourceType: 'Patient',\n        active: true,\n        identifier: [\n          {\n            use: 'official',\n            type: {\n              coding: [\n                {\n                  system: 'http://opencrvs.org/specs/identifier-type',\n                  code: 'NATIONAL_ID',\n                },\n              ],\n            },\n            value: '6848901132',\n          },\n        ],\n        name: [\n          {\n            use: 'en',\n            family: 'Ratke',\n            given: ['Dad'],\n          },\n        ],\n        gender: 'male',\n        telecom: [\n          {\n            use: 'mobile',\n            system: 'phone',\n            value: '+260759205190',\n          },\n        ],\n        birthDate: '2002-06-29',\n        deceasedBoolean: false,\n        multipleBirthInteger: 2,\n        maritalStatus: {\n          coding: [\n            {\n              system: 'http://hl7.org/fhir/StructureDefinition/marital-status',\n              code: 'M',\n            },\n          ],\n          text: 'MARRIED',\n        },\n        address: [\n          {\n            type: 'PRIMARY_ADDRESS',\n            line: [\n              '12',\n              'Usual Street',\n              'Usual Residental Area',\n              '',\n              '',\n              'URBAN',\n            ],\n            city: 'Madgeland',\n            district: 'c51ea274-8ffa-4b0b-b3d3-12991e9f0630',\n            state: 'c5d7a275-3638-41a3-bd53-145bd9410fd6',\n            postalCode: '52275',\n            country: 'FAR',\n          },\n        ],\n        extension: [\n          {\n            url: 'http://opencrvs.org/specs/extension/patient-occupation',\n            valueString: 'Businessman',\n          },\n          {\n            url: 'http://hl7.org/fhir/StructureDefinition/patient-nationality',\n            extension: [\n              {\n                url: 'code',\n                valueCodeableConcept: {\n                  coding: [\n                    {\n                      system: 'urn:iso:std:iso:3166',\n                      code: 'FAR',\n                    },\n                  ],\n                },\n              },\n              {\n                url: 'period',\n                valuePeriod: {\n                  start: '',\n                  end: '',\n                },\n              },\n            ],\n          },\n          {\n            url: 'http://opencrvs.org/specs/extension/educational-attainment',\n            valueString: 'POST_SECONDARY_ISCED_4',\n          },\n        ],\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${encounterId}`,\n      resource: {\n        resourceType: 'Encounter',\n        status: 'finished',\n        location: [\n          {\n            location: {\n              reference: 'Location/704b9706-d729-4834-8656-05b562065deb',\n            },\n          },\n        ],\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${util.uuid()}`,\n      resource: {\n        resourceType: 'Observation',\n        status: 'final',\n        context: {\n          reference: `urn:uuid:${encounterId}`,\n        },\n        category: [\n          {\n            coding: [\n              {\n                system: 'http://hl7.org/fhir/observation-category',\n                code: 'procedure',\n                display: 'Procedure',\n              },\n            ],\n          },\n        ],\n        code: {\n          coding: [\n            {\n              system: 'http://loinc.org',\n              code: '57722-1',\n              display: 'Birth plurality of Pregnancy',\n            },\n          ],\n        },\n        valueQuantity: {\n          value: 'SINGLE',\n        },\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${util.uuid()}`,\n      resource: {\n        resourceType: 'Observation',\n        status: 'final',\n        context: {\n          reference: `urn:uuid:${encounterId}`,\n        },\n        category: [\n          {\n            coding: [\n              {\n                system: 'http://hl7.org/fhir/observation-category',\n                code: 'vital-signs',\n                display: 'Vital Signs',\n              },\n            ],\n          },\n        ],\n        code: {\n          coding: [\n            {\n              system: 'http://loinc.org',\n              code: '3141-9',\n              display: 'Body weight Measured',\n            },\n          ],\n        },\n        valueQuantity: {\n          value: 4,\n          unit: 'kg',\n          system: 'http://unitsofmeasure.org',\n          code: 'kg',\n        },\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${util.uuid()}`,\n      resource: {\n        resourceType: 'Observation',\n        status: 'final',\n        context: {\n          reference: `urn:uuid:${encounterId}`,\n        },\n        category: [\n          {\n            coding: [\n              {\n                system: 'http://hl7.org/fhir/observation-category',\n                code: 'procedure',\n                display: 'Procedure',\n              },\n            ],\n          },\n        ],\n        code: {\n          coding: [\n            {\n              system: 'http://loinc.org',\n              code: '73764-3',\n              display: 'Birth attendant title',\n            },\n          ],\n        },\n        valueString: 'PHYSICIAN',\n      },\n    },\n    {\n      fullUrl: `urn:uuid:${util.uuid()}`,\n      resource: {\n        resourceType: 'QuestionnaireResponse',\n        extension: [],\n        status: 'completed',\n        subject: {\n          reference: `urn:uuid:${encounterId}`,\n        },\n        item: [\n          {\n            text: 'birth.mother.mother-view-group.motherIdType',\n            linkId: '',\n            answer: [\n              {\n                valueString: 'NATIONAL_ID',\n              },\n            ],\n          },\n          {\n            text: 'birth.father.father-view-group.fatherIdType',\n            linkId: '',\n            answer: [\n              {\n                valueString: 'NATIONAL_ID',\n              },\n            ],\n          },\n        ],\n      },\n    },\n  ];\n\n  return state;\n});\n\ncreateBirthNotification($.birthNotificationEntryData);\n\n"})})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(l,{...n})}):l(n)}}}]);