"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[97788],{75884:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>_,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var a=t(58168),r=(t(96540),t(15680));const i={title:"Q3 2022 Upsert Person Visit",sidebar_label:"Q3 2022 Upsert Person Visit",id:"Q3-2022-Upsert-Person-Visit-2022-06-28",keywords:["library","job","expression","salesforce","dataValue","field","fields","join","map","query","relationship","upsertIf"]},s=void 0,o={unversionedId:"library/jobs/auto/Q3-2022-Upsert-Person-Visit-2022-06-28",id:"library/jobs/auto/Q3-2022-Upsert-Person-Visit-2022-06-28",title:"Q3 2022 Upsert Person Visit",description:"This job was provided by an OpenFn.org user via the job library API.",source:"@site/adaptors/library/jobs/auto/Q3-2022-Upsert-Person-Visit-2022-06-28.md",sourceDirName:"library/jobs/auto",slug:"/library/jobs/auto/Q3-2022-Upsert-Person-Visit-2022-06-28",permalink:"/adaptors/library/jobs/auto/Q3-2022-Upsert-Person-Visit-2022-06-28",draft:!1,tags:[],version:"current",frontMatter:{title:"Q3 2022 Upsert Person Visit",sidebar_label:"Q3 2022 Upsert Person Visit",id:"Q3-2022-Upsert-Person-Visit-2022-06-28",keywords:["library","job","expression","salesforce","dataValue","field","fields","join","map","query","relationship","upsertIf"]},sidebar:"adaptors",previous:{title:"WF1-2 Bulk upsert HHs and HH Visits",permalink:"/adaptors/library/jobs/auto/WF1-2-Bulk-upsert-HHs-and-HH-Visits-2023-05-19"},next:{title:"Q4 2022 Upsert Supervision - Feedback",permalink:"/adaptors/library/jobs/auto/Q4-2022-Upsert-Supervision-Feedback-2022-08-19"}},_={},l=[{value:"Metadata",id:"metadata",level:2},{value:"Key Functions",id:"key-functions",level:2},{value:"Expression",id:"expression",level:2}],d={toc:l},c="wrapper";function u(e){let{components:n,...t}=e;return(0,r.yg)(c,(0,a.A)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("em",null,"This job was provided by an OpenFn.org user via the job library API."),(0,r.yg)("h2",{id:"metadata"},"Metadata"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Name: Q3 2022 Upsert Person Visit"),(0,r.yg)("li",{parentName:"ul"},"Adaptor: ",(0,r.yg)("a",{parentName:"li",href:"https://www.github.com/openfn/language-salesforce"},(0,r.yg)("inlineCode",{parentName:"a"},"@openfn/language-salesforce"))),(0,r.yg)("li",{parentName:"ul"},"Adaptor Version: ",(0,r.yg)("a",{parentName:"li",href:"https://www.github.com/openfn/language-salesforce"},(0,r.yg)("inlineCode",{parentName:"a"},"latest"))),(0,r.yg)("li",{parentName:"ul"},"Created almost 3 years ago"),(0,r.yg)("li",{parentName:"ul"},"Updated 3 months ago"),(0,r.yg)("li",{parentName:"ul"},"Score: ",(0,r.yg)("b",null,"0")," (an ",(0,r.yg)("a",{parentName:"li",href:"/adaptors/library/#library-scores"},"indicator")," of how useful this job may be)")),(0,r.yg)("h2",{id:"key-functions"},"Key Functions"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"dataValue"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"field"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"fields"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"join"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"map"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"query"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"relationship"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"upsertIf")),(0,r.yg)("h2",{id:"expression"},"Expression"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"//UPSERT PERSON VISIT\n  query(\n  `SELECT Id, Parent_Geographic_Area__c, Parent_Geographic_Area__r.Name, Parent_Geographic_Area__r.Parent_Geographic_Area__c FROM Location__c WHERE CommCare_User_ID__c = '${dataValue(\n    'properties.owner_id'\n  )(state)}'`\n);\n\nfn(state => {\n  state.cleanChoice = function (state, choice) {\n    if (choice) {\n      return choice.charAt(0).toUpperCase() + choice.slice(1).replace('_', ' ');\n    } else {\n      return '';\n    }\n  };\n\nfn(state => ({\n  ...state,\n  data: {\n    ...state.data,\n    catchmentNewId:\n      state.references[0].records && state.references[0].records.length !== 0\n        ? (state.references[0].records[0].Parent_Geographic_Area__r \n          ? state.references[0].records[0].Parent_Geographic_Area__r.Parent_Geographic_Area__c\n          : undefined)\n        : undefined,\n  },\n}));\n\n  state.handleMultiSelect = function (state, multiField) {\n    return multiField\n      ? multiField\n          .replace(/ /gi, ';')\n          .toLowerCase()\n          .split(';')\n          .map(value => {\n            return (\n              value.charAt(0).toUpperCase() + value.slice(1).replace('_', ' ')\n            );\n          })\n          .join(';')\n      : '';\n  };\n\n  state.handleMultiSelectOriginal = function (state, multiField) {\n    return multiField\n      ? multiField\n          .replace(/ /gi, ';')\n          .toLowerCase()\n          .split(';')\n          .map(value => {\n            return (\n              value\n            );\n          })\n          .join(';')\n      : '';\n  };\n\n  const pregDangerMap = {\n    Vaginal_Bleeding: 'Vaginal Bleeding',\n    Water_Breaks: 'Water Breaks before Time of Delivery',\n    Prolonged_Labour: 'Prolonged Labour over 12 Hours',\n    Convulsions: 'Convulsions or Fits',\n    Abdominal_Pain: 'Severe Abdominal Pain before Delivery',\n    High_Fever: 'High Fever',\n    Low_Baby_Movement: 'Feeling the Baby move less or not at all',\n    Swelling: 'Swelling of Face and Hands',\n    Severe_Headache: 'Severe or Continuous Headache for more than 12 hours',\n    Severe_Vomiting: 'Severe or Continuous Vomiting',\n    none: 'None',\n  };\n\n  const counselMap = {\n    anc_visits: 'ANC Visits',\n    early_initiation_of_anc_less_than_3_months:\n      'Early initiation of ANC (less than 3 months)',\n    completing_recomended_anc_visits: 'Completing recomended ANC visits',\n    danger_signs: 'Danger signs',\n    skilled_birth: 'Skilled birth',\n    immunization: 'Immunization',\n    individual_birth_plan: 'Individual Birth Plan',\n    emergency_preparedness: 'Emergency preparedness',\n    childcare_and_affection: 'Childcare and affection',\n    nutrition_counseling: 'Nutrition counseling',\n    growth_monitoring: 'Growth monitoring',\n    exclusive_breastfeeding: 'Exclusive breastfeeding',\n    complementary_feeding: 'Complementary feeding',\n    sleeping_under_llitn: 'Sleeping under LLITN',\n    knowing_hiv_status: 'Knowing HIV status',\n    indoor_pollution: 'Indoor pollution',\n    personal_hygiene: 'Personal Hygiene',\n    safe_drinking_water: 'Safe drinking water',\n    safe_disposal_of_human_waste: 'Safe disposal of human waste',\n  };\n\n  const serviceMap = {\n    Scheduled_PSC_Apt: 'Scheduled PSC Apt',\n    Adverse_Drug_Reaction_Side_Effect: 'Adverse Drug Reaction/Side Effect',\n    Malnutrition: 'Malnutrition',\n    Malaria: 'Malaria',\n    TB: 'TB',\n    Treatment_for_Other_OIs: 'Treatment for other Ols',\n    ARI: 'ARI',\n    Anemia: 'Anemia',\n    Diarrhea: 'Diarrhea',\n    Pregnancy_Care: 'Pregnancy Care (ANC)',\n    Family_Planning: 'Family Planning (FP)',\n    Preconception_Counseling: 'Preconception Counseling',\n    Injury: 'Injury',\n    Other: 'Other',\n  };\n\n  const reasonMap = {\n    lack_of_access_to_fp_information: 'Lack of access to FP information',\n    no_access_to_fp_services_hospitals:\n      'Lack of hospitals or places where FP services can be accessed',\n    not_willing_to_use_fp_due_to_negative_effects_myths_and_misconceptions:\n      'Myths and misconceptions',\n    barriers_at_service_delivery_points: 'Barriers at service delivery points',\n    pregnant: 'The client is pregnant',\n    intentions_of_getting_pregnant: 'Intentions of getting pregnant',\n    not_sexually_active: 'The client is not sexually active',\n    other_barriers_culture_male_partners_parents_etc:\n      'Other barriers (culture, male partners, parents, etc)',\n  };\n\n  const milestoneTypeMap = {\n    cognitive_delays_learning_difficulties:\n      'Cognitive Delays Learning Difficulties',\n    motor_delays: 'Motor Delays',\n    speech_and_language_delay: 'Delay Speech and Language Delay',\n    social_and_emotional: 'Social and emotional',\n  };\n\n  const milestoneMap = {\n    movement: 'Movement',\n    hearing: 'Hearing',\n    communication: 'Communication',\n    seeing: 'Seeing',\n    cognitive_delays: 'Cognitive Delays',\n    play: 'Play',\n  };\n  const nutritionMap = {\n    severe: 'Severely Malnourished',\n    moderate: 'Moderately Malnourished',\n    normal: 'Normal',\n  };\n  \n  const fpMethodMap = {\n    male_condoms: \"Male condoms\",\n    female_condoms: \"Female condoms\",\n    pop: \"POP\",\n    coc: \"COC\",\n    emergency_pills: \"Emergency pills\",\n    none: \"None\",\n    //HMN -12/01/2023- \n    //adding normalization for the family_planning_method to Family_Planning_Method__c\n    iucd: \"IUCD\",\n    condoms: \"Condoms\",\n    depo:\"Depo\",\n    implant: \"Implant\",\n    injection: \"Injection\",\n    pills: \"Pills\",\n    traditional: \"Traditional\"\n  };\n\n  const symptomsMap = {\n    convulsions: 'Convulsions',\n    not_able_to_eatdrink: 'Not able to drink or feed at all',\n    vomits_everything: 'Vomits everything',\n    'chest_in-drawing': 'Chest in - drawing',\n    unusually_sleepyunconscious: 'Unusually sleepy or unconscious',\n    swelling_of_both_feet: 'Swelling of both feet',\n    none: \"None\",\n  };\n\n  const supervisorMap ={\n    community_health_nurse: \"Community_health_nurse\",\n    chw_supervisor: \"CHW_supervisor\",\n    chewschas: \"Chewschas\",\n    other: \"Other\",\n    none: \"None\"\n  };\n  \n  const treatmentDistributionMap = {\n    ors_205gltr_sachets: 'ORS (20.5h/ltr): Sachets',\n    acts_6s: 'ACTs (6s)',\n    acts_12s: 'ACTs (12s)',\n    acts_18s: 'ACTs (18s)',\n    acts_24s: 'ACTs (24s)',\n    albendazole_abz_tabs: 'Albendazole (ABZ): Tabs',\n    paracetamol_tabs: 'Tetracycline Eye Ointment (TEO): 1%:tube',\n    tetracycline_eye_ointment_teo_1_tube: 'Tetracycline Eye Ointment (TEO): 1%:tube',\n    amoxycillin: 'Amoxycillin (125mg/5mls: Bottle',\n    none: 'None'\n};\n\nconst childDangerSignsMap = {\n    none: 'None',\n    Poor_Breastfeeding: 'Poor Breastfeeding',\n    not_able_to_feed_since_birth_or_stopped_feeding_well: 'Not able to feed since birth, or stopped feeding well',\n    not_able_to_breastfeed: 'Not able to breastfeed',\n    Fever: 'Fever',\n    very_low_temperature: 'Very low temperature (35.4 C or less)',\n    shivering: 'Shivering',\n    Fast_Breathing: 'Fast Breathing',\n    Very_Sleepy: 'Very Sleepy',\n    Convulsions_and_Fits: 'Convulsions and Fits',\n    only_moves_when_stimulated_or_does_not_move_even_on_stimulation: 'Only moves when stimulated, or does not move even on stimulation',\n    yellow_solebaby_body_turning_yellow_especially_eyes_palms_soles: 'Yellow sole(Baby body turning yellow especially eyes, palms,soles)',\n    bleeding_from_the_umbilical_stump: 'Bleeding from the umbilical stump',\n    signs_of_local_infection_umbilicus_is_red_or_draining_pus_skin_boils_or_eye: 'Signs of local infection: umbilicus is red or draining pus, skin boils, or eyes draining pus',\n    weight_chart_using_color_coded_scales_if_red_or_yellowweight_below_25kg_or_: 'Weight chart using color coded scales if RED or YELLOW(Weight below 2.5kg or born less than 36 weeks of age)',\n    unable_to_cry: 'Unable to cry',\n    cyanosis: 'Cyanosis',\n    bulging_fontanelle: 'Bulging fontanelle'\n}\n\n  return {\n    ...state,\n    counselMap,\n    serviceMap,\n    reasonMap,\n    milestoneTypeMap,\n    milestoneMap,\n    nutritionMap,\n    pregDangerMap,\n    fpMethodMap,\n    symptomsMap,\n    supervisorMap,\n    treatmentDistributionMap,\n    childDangerSignsMap\n  };\n});\n\nupsertIf(\n  // state.data.properties.username !== 'openfn.test' &&\n    state.data.properties.username !== 'test.2021' &&\n    state.data.properties.test_user  !== 'Yes' ,\n  'Person_visit__c',\n  'CommCare_ID__c',\n  fields(\n    //field('CommCare_ID__c', dataValue('form.case.@case_id')),\n    // field('CommCare_ID__c', dataValue('id')),\n    //field('CommCare_ID__c', state => {\n    //  var case_id = dataValue('case_id')(state);\n    //  var submitted = dataValue('properties.last_form_opened_date_and_time')(state);\n    //  return case_id + '_' +  submitted;\n    //}),\n    field('CommCare_ID__c',dataValue('case_id')),\n\n    relationship(\n      'Person__r',\n      'CommCare_ID__c',\n      dataValue('indices.parent.case_id')\n    ),\n    /*relationship(\n      'Household_CHW__r', \n      'CommCare_ID__c', \n      dataValue('properties.sfid')),*/\n    // field('CommCare_Visit_ID__c',dataValue('metadata.instanceID')),\n     field('CommCare_Visit_ID__c', state => {\n      var case_id = dataValue('case_id')(state);\n      var submitted = dataValue('properties.last_form_opened_date_and_time')(state);\n      return case_id + '_' +  submitted;\n    }),\n    field('Date__c',dataValue('properties.Date')),\n    field('Form_Submitted__c', dataValue('properties.last_form_opened_name')),\n    field('Birth_Status__c',dataValue('properties.child_status')),\n    field('Catchment__c', dataValue('catchmentNewId')),\n    /*\n    //HMN 05/01/2022 Caused alot of failures, removed this RecordType Field\n    relationship('RecordType', 'Name', state => {\n          var rt = dataValue('properties.RecordType')(state);\n          if (rt === 'Unborn' || rt === 'Child') {\n            return 'Child Visit';\n          };\n          if (rt === 'Youth') {\n            return 'Youth Visit';\n          };\n          if (rt === 'Male Adult') {\n            return 'Adult Male Visit';\n          };\n          if (rt === 'Female Adult') {\n            return 'Adult Female Visit';\n          };\n        }),*/\n    field('Use_mosquito_net__c', state => {\n      var choice = dataValue(\n        'properties.sleep_under_net'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field(\n      'Individual_birth_plan_counselling__c',\n      dataValue('properties.individual_birth_plan')\n    ),\n    field('Reason_for_not_taking_a_pregnancy_test__c', state => {\n      var reason = dataValue('properties.No_Preg_Test')(state);\n      return reason ? reason.toString().replace(/_/g, ' ') : undefined;\n    }),\n    field('Pregnancy_danger_signs__c', state => {\n      var signs = dataValue(\n        'properties.No_Preg_Test'\n      )(state);\n      return signs ? state.pregDangerMap[signs] : undefined;\n    }),\n    field('Child_Danger_Signs__c', state => {\n      var signs = dataValue(\n        'properties.Other_Danger_Signs'\n      )(state);\n      return signs ? state.childDangerSignsMap[signs] : undefined\n    }),\n     field('Current_Malaria_Status__c', state => {\n      var choice = dataValue(\n        'properties.malaria_test_results'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('Malaria_Home_Test__c', dataValue('properties.malaria_test_date')),\n    /*field('Current_Malaria_Status__c', state => {\n      var choice = dataValue(\n        'properties.Malaria_Status'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),*/\n    // field('Malaria_Home_Treatment__c',dataValue('form.treatment_and_tracking.home_treatment')),\n    field('Malaria_Home_Treatment__c', dataValue('properties.malaria_test_date')),\n    field('Persons_symptoms__c', state => {\n      var check = dataValue('properties.symptoms_check_other')(state);\n      var value =\n        check && check !== ''\n          ? check\n              .replace(/ /gi, ';')\n              .split(';')\n              .map(value => {\n                return state.symptomsMap[value] || value;\n              })\n          : undefined;\n      return value ? value.join(';') : undefined;\n    }),\n    field('Active_in_Support_Group__c', dataValue('properties.Active_in_Support_Group')),\n    field('HAWI_Defaulter__c', state => {\n      var hawi = dataValue('properties.default')(state);\n      return hawi === 'Yes' ? true : false;\n    }),\n    field(\n      'Date_of_Default__c',\n      dataValue('properties.date_of_default')\n    ),\n    field(\n      'Persons_temperature__c',\n      dataValue('properties.temperature')\n    ),\n    field(\n      'Days_since_illness_start__c',\n      dataValue('properties.duration_of_sickness')\n    ),\n    field(\n      'Newborn_visited_48_hours_of_delivery__c',\n      dataValue(\n        'properties.newborn_visited_48_hours_of_delivery'\n      )\n    ),\n    field(\n      'Newborn_visited_by_a_CHW_within_6_days__c',\n      dataValue('properties.visit_6_days_from_delivery')\n    ),\n    field(\n      'Current_Malaria_Status__c',\n      dataValue('properties.malaria_test_results')\n    ),\n    field('Malaria_test__c', state => {\n      var choice = dataValue(\n        'properties.malaria_test'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('Fever__c', state => {\n      var choice = dataValue(\n        'properties.symptoms_check_fever'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('Cough__c', state => {\n      var choice = dataValue(\n        'properties.symptoms_check_cough'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('Diarrhoea__c', state => {\n      var choice = dataValue(\n       'properties.symptoms_check_diarrhea'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field(\n      'TB_patients_therapy_observed__c',\n      dataValue('properties.observed_tb_therapy')\n    ),\n    field(\n      'Injuries_or_wounds__c',\n      dataValue('properties.wounds_or_injuries')\n    ),\n    field('Currently_on_ART_s__c', dataValue('properties.ART')),\n    /*field('ART_Regimen__c', state => {\n      var choice = dataValue(\n       'properties.ARVs'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),*/\n    field(\n      'Immediate_Breastfeeding__c',\n      dataValue(\n        'properties.Breastfeeding_Delivery'\n      )\n    ),\n    field(\n      'Exclusive_Breastfeeding__c',\n      dataValue(\n        'properties.Exclusive_Breastfeeding'\n      )\n    ),\n    field(\n      'Counselled_on_Exclusive_Breastfeeding__c',\n      dataValue('properties.counseling')\n    ),\n    field('LMP__c',dataValue('properties.when_was_your_lmp')),\n     field('Family_Planning__c', state => {\n      var choice = dataValue(\n        'properties.family_planning'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n        //HMN 12/01/2023 Failures on picklist within Salesforce\n    /*\n    field(\n      'Family_Planning_Method__c',\n      dataValue('properties.family_planning_method')\n    ),*/\n    field('Family_Planning_Method__c', state => {\n        //var status = dataValue('form.treatment_and_tracking.distribution.distributed_treatments')(state);\n        var status = dataValue('properties.family_planning_method')(state);\n        var value =\n        status && status !== ''\n          ? status\n              .replace(/ /gi, ';')\n              .split(';')\n              .map(value => {\n                  return state.fpMethodMap[value] || value;\n              })\n            : undefined;\n          return value ? value.join(';') : undefined;\n        }),\n     field('FP_Method_Distributed__c', state => {\n          //var status = dataValue('form.treatment_and_tracking.distribution.distributed_treatments')(state);\n          var status = dataValue('properties.FP_commodity')(state);\n          var value =\n            status && status !== ''\n              ? status\n                  .replace(/ /gi, ';')\n                  .split(';')\n                  .map(value => {\n                    return state.fpMethodMap[value] || value;\n                  })\n              : undefined;\n          return value ? value.join(';') : undefined;\n        }),\n    field('Reasons_for_not_taking_FP_method__c', state => {\n      // var reason = dataValue('form.TT5.Mother_Information.No_FPmethod_reason')(state);\n      // return reason ? state.reasonMap[reason] : undefined;\n      var status = dataValue('properties.No_FPmethod_reason')(state);\n          var value =\n            status && status !== ''\n              ? status\n                  .replace(/ /gi, ';')\n                  .split(';')\n                  .map(value => {\n                    return state.reasonMap[value] || value;\n                  })\n              : undefined;\n          return value ? value.join(';') : undefined;\n    }),\n    field('Pregnant__c', state => {\n      var preg = dataValue('properties.Pregnant')(state);\n      return preg === 'Yes' ? true : false;\n    }),\n    field('Counselled_on_FP_Methods__c', state => {\n      var choice = dataValue(\n       'properties.CounselledFP_methods'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('Client_counselled_on__c', state => {\n      var choices =\n        dataValue('properties.counsel_topic')(\n          state\n        ) || dataValue('properties.counsel_topic')(state);\n      var choiceGroups = choices ? choices.split(' ') : null;\n      var choicesMulti = choiceGroups\n        ? choiceGroups\n            .map(cg => {\n              return state.counselMap[cg];\n            })\n            .join(';')\n        : choiceGroups;\n      return choicesMulti;\n    }),\n    field('Client_provided_with_FP__c', state => {\n      var choice = dataValue(\n        'properties.was_the_woman_15-49yrs_provided_with_family_planning_commodities_by_chv'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field(\n      'Newborn_visited_48_hours_of_delivery__c',\n      dataValue(\n        'properties.newborn_visited_48_hours_of_delivery'\n      )\n    ),\n    field('Mother_visit_counselling__c', state => {\n      var choice = dataValue(\n        'properties.did_you_consel_the_mother_on1'\n      )(state);\n      return state.handleMultiSelectOriginal(state, choice);\n    }),\n    field(\n      'mother_visited_48_hours_of_the_delivery__c',\n      dataValue('properties.visit_mother_48')\n    ),\n    field('Newborn_visit_counselling__c', state => {\n      var choice = dataValue(\n        'properties.did_you_consel_the_mother_on2'\n      )(state);\n      return state.handleMultiSelectOriginal(state, choice);\n    }),\n    field('Know_HIV_status__c', state => {\n      var choice = dataValue(\n        'properties.known_hiv_status'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('HIV_Status__c', dataValue('properties.hiv_status')),\n    field('Treatment_Distribution__c', state => {\n          //var status = dataValue('form.treatment_and_tracking.distribution.distributed_treatments')(state);\n          var status = dataValue('properties.distributed_treatments')(state);\n          var value =\n            status && status !== ''\n              ? status\n                  .replace(/ /gi, ';')\n                  .split(';')\n                  .map(value => {\n                    return state.treatmentDistributionMap[value] || value;\n                  })\n              : undefined;\n          return value ? value.join(';') : undefined;\n        }),\n    field(\n      'Current_Weight__c',\n      dataValue('properties.Current_Weight')\n    ),\n    field(\n      'Current_Height__c',\n      dataValue('properties.current_height')\n    ),\n    field(\n      'Current_MUAC__c',\n      dataValue('properties.MUAC')\n    ),\n    field('Food_groups_3_times_a_day__c',dataValue('properties.food_groups')),\n    field('Nutrition_Case_Managed__c',dataValue('properties.nutrition_case_managed')),\n    field('Nutrition_Danger_Signs__c',state => {\n      var choice = dataValue(\n        'properties.nutrition_danger_signs'\n        )(state);\n        return state.handleMultiSelectOriginal(state, choice);\n        \n    }),\n  field('Why_was_nutrition_case_not_managed__c',dataValue('properties.nutrition_case_not_managed_why')),\n  field('Community_Nutrition_Treatment__c',dataValue('properties.nutrition_treatment_severe')),\n  field('Community_Nutrition_Treatment__c',dataValue('properties.nutrition_treatment_moderate')),\n  field('Why_was_nutrition_treatment_not_given__c',dataValue('properties.nutrition_treatment_not_given')),\n    field('Current_Nutrition_Status__c', state => {\n      var status = dataValue(\n        'properties.Nutrition_Status'\n      )(state);\n      return status ? state.nutritionMap[status] : undefined;\n    }),\n    field('Default_on_TB_treatment__c', state => {\n      var choice = dataValue(\n       'properties.default_tb_treatment'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('Received_pregnancy_test__c', state => {\n      var choice = dataValue(\n        'properties.did_you_adminsiter_a_pregnancy_test'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('Pregnancy_test_result__c', state => {\n      var choice = dataValue(\n        'properties.pregnancy_test_result'\n      )(state);\n      return state.cleanChoice(state, choice);\n    }),\n    field('Chronic_illness__c', state => {\n      var choice = dataValue(\n        'properties.please_specify_which_chronic_illness_the_person_has'\n      )(state);\n      var choice2 = state.handleMultiSelect(state, choice);\n      return choice2 ? choice2.replace(/_/g, ' ') : '';\n    }),\n    /*field(\n          'Birth_Certificate__c',\n          dataValue('form.Status.birth_certificate')\n        ),\n        field(\n          'Child_zinc__c',\n          dataValue(\n            'form.TT5.Child_Information.Clinical_Services.diarrhea_clinic_treatment_zinc'\n          )\n        ),\n        field(\n          'Child_ORS__c',\n          dataValue(\n            'form.TT5.Child_Information.Clinical_Services.diarrhea_clinic_treatment_ORS'\n          )\n        ),*/\n    field(\n      'Childs_breath_per_minute__c',\n      dataValue('properties.breaths_per_minuite')\n    ),\n    field(\n      'Child_chest_in_drawing__c',\n      dataValue('properties.Child_chest_in_drawing_c')\n    ),\n    field(\n      'Caregiver_counseled_on_delayed_milestone__c',\n      dataValue(\n        'properties.did_you_counsel_the_caregiver_on_delayed_milestones'\n      )\n    ),\n    field(\n      'Delayed_Milestone__c',\n      dataValue(\n         'properties.does_the_child_has_a_delayed_milestone'\n      )\n    ),\n    field(\n      'Child_has_2_or_more_play_items__c',\n      dataValue(\n         'properties.does_the_child_has_2_or_more_play_items_at_home'\n      )\n    ),\n    field(\n      'Child_has_3_more_picture_books__c',\n      dataValue(\n        'properties.does_the_child_has_3_or_more_picture_books'\n      )\n    ),\n    field('Delayed_Milestones_Counselled_On__c', state => {\n      var ms = dataValue(\n        'properties.which_delayed_milestone_area_did_you_counsel_the_caregiver_on'\n      )(state);\n      return ms ? state.milestoneMap[ms] : undefined;\n    }),\n    field('Delayed_Milestone_Type__c', state => {\n      var ms = dataValue('properties.which_delayed_milestone')(\n        state\n      );\n      return ms ? state.milestoneTypeMap[ms] : undefined;\n    }),\n    field(\n      'Caretaker_trained_in_muac__c',\n      dataValue('properties.mother_trained_muac')\n    ),\n    field(\n      'Caretaker_screened_for_muac_this__c',\n      dataValue(\n       'properties.mother_screened_child_muac'\n      )\n    ),\n    field(\n      'Caretaker_muac_findings__c',\n      dataValue(\n        'properties.mother_screened_child_muac_result'\n      )\n    ),\n    field(\n      'Caretaker_action_after_muac_screening__c',\n      dataValue(\n        'properties.mother_screened_muac_action'\n      )\n    ),\n    field(\n      'of_Caretaker_MUAC_screenings__c',\n      dataValue('properties.mother_nb_screening')\n    ),\n    field('Pulse_Oximeter__c', dataValue('properties.pulse_oximeter_available')),\n    field(\n      'Heart_Rate_Pulse_Oximeter__c',\n      dataValue('properties.heart_rate_pulse_oximeter')\n    ),\n    field(\n      'Oxygen_Concentration_Pulse_Oximeter__c',\n      dataValue('properties.oxygen_concentration')\n    ),\n    field('Can_child_drink__c', dataValue('properties.can_child_drink')),\n    field(\n      'Antibiotic_provided_for_fast_breathing__c',\n      dataValue('properties.antibiotic_fast_breathing')\n    ),\n    field(\n      'Antibiotic_provided_for_chest_indrawing__c',\n      dataValue('properties.antibiotic_chest_indrawing')\n    ),\n    field('Supervisor_Visit__c', state => {\n      var check = dataValue('properties.supervisor_visit')(state);\n      var value =\n        check && check !== ''\n          ? check\n              .replace(/ /gi, ';')\n              .split(';')\n              .map(value => {\n                return state.supervisorMap[value] || value;\n              })\n          : undefined;\n      return value ? value.join(';') : undefined;\n    }),\n    /*\n    //HMN- 05012023 - Removed field('Visit_Closed_Date__c', dataValue('date_closed')),\n    //Because I could not find it in Salesforce. It was causing errors on staging\n    field('Visit_Closed_Date__c', dataValue('date_closed')),\n    */\n    //field('Case_Closed_Date__c', state => {\n    //  var closed = dataValue('date_closed')(state);\n    //  var date = dataValue('date_modified')(state);\n    //  return closed && closed == true ? date : undefined;\n   // })\n  )\n);\n\n")))}u.isMDXComponent=!0},15680:(e,n,t)=>{t.d(n,{xA:()=>d,yg:()=>m});var a=t(96540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var _=a.createContext({}),l=function(e){var n=a.useContext(_),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=l(e.components);return a.createElement(_.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,_=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=l(t),p=r,m=c["".concat(_,".").concat(p)]||c[p]||u[p]||i;return t?a.createElement(m,s(s({ref:n},d),{},{components:t})):a.createElement(m,s({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,s=new Array(i);s[0]=p;var o={};for(var _ in n)hasOwnProperty.call(n,_)&&(o[_]=n[_]);o.originalType=e,o[c]="string"==typeof e?e:r,s[1]=o;for(var l=2;l<i;l++)s[l]=t[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"}}]);