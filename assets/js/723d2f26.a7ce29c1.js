"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[70001],{42663:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>g});var n=o(58168),r=(o(96540),o(15680));const a={title:"Workflows",sidebar_label:"Workflows"},i=void 0,l={unversionedId:"build/workflows",id:"build/workflows",title:"Workflows",description:"Workflows are automated processes or sets of instructions that accomplish a",source:"@site/docs/build/workflows.md",sourceDirName:"build",slug:"/build/workflows",permalink:"/documentation/build/workflows",draft:!1,editUrl:"https://github.com/openfn/docs/edit/main/docs/build/workflows.md",tags:[],version:"current",frontMatter:{title:"Workflows",sidebar_label:"Workflows"},sidebar:"docs",previous:{title:"Security considerations",permalink:"/documentation/security-for-devs"},next:{title:"Triggers",permalink:"/documentation/build/triggers"}},s={},g=[{value:"Create Workflows",id:"create-workflows",level:2},{value:"Merging branches and Skipping Steps",id:"merging-branches-and-skipping-steps",level:3},{value:"Run Workflows",id:"run-workflows",level:2},{value:"Enabling or Disabling a Workflow",id:"enabling-or-disabling-a-workflow",level:3},{value:"Via the workflow state toggle",id:"via-the-workflow-state-toggle",level:4},{value:"Via the workflow trigger",id:"via-the-workflow-trigger",level:4},{value:"Manual Runs",id:"manual-runs",level:3},{value:"With an empty input (this is the default behavior)",id:"with-an-empty-input-this-is-the-default-behavior",level:4},{value:"With a custom input (you can type, copy/paste, or import a file with valid JSON)",id:"with-a-custom-input-you-can-type-copypaste-or-import-a-file-with-valid-json",level:4},{value:"With an existing input",id:"with-an-existing-input",level:4},{value:"Limit Concurrency",id:"limit-concurrency",level:2},{value:"What happens when concurrency limit is set on a workflow?",id:"what-happens-when-concurrency-limit-is-set-on-a-workflow",level:3},{value:"Setting Concurrency for a workflow",id:"setting-concurrency-for-a-workflow",level:3},{value:"Log Outputs",id:"log-outputs",level:3},{value:"Keyboard Shortcuts",id:"keyboard-shortcuts",level:2}],c={toc:g},u="wrapper";function p(e){let{components:t,...a}=e;return(0,r.yg)(u,(0,n.A)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Workflows")," are automated processes or sets of instructions that accomplish a\ntask. In OpenFn configuration, a Workflow consists of a Trigger, Steps, and\nPaths that define automation logic. Read on to learn how to configure Workflows."),(0,r.yg)("h2",{id:"create-workflows"},"Create Workflows"),(0,r.yg)("p",null,"To create a new Workflow in your Project:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Go to the ",(0,r.yg)("strong",{parentName:"li"},"Workflows")," page."),(0,r.yg)("li",{parentName:"ol"},"Click the ",(0,r.yg)("strong",{parentName:"li"},"Create new workflow")," button."),(0,r.yg)("li",{parentName:"ol"},"Give your Workflow a descriptive ",(0,r.yg)("inlineCode",{parentName:"li"},"Name")," (e.g., ",(0,r.yg)("inlineCode",{parentName:"li"},"Register patients"),",\n",(0,r.yg)("inlineCode",{parentName:"li"},"Refer cases"),", ",(0,r.yg)("inlineCode",{parentName:"li"},"Monthly payroll"),")."),(0,r.yg)("li",{parentName:"ol"},"Choose your ",(0,r.yg)("a",{parentName:"li",href:"/documentation/build/triggers"},"Trigger")),(0,r.yg)("li",{parentName:"ol"},"Edit your first ",(0,r.yg)("a",{parentName:"li",href:"/documentation/build/steps/"},"Step")),(0,r.yg)("li",{parentName:"ol"},"Modify the ",(0,r.yg)("a",{parentName:"li",href:"/documentation/build/paths"},"Path Condition"),", if needed, to define ",(0,r.yg)("em",{parentName:"li"},"when"),"\nthe Workflow should proceed to the next Step."),(0,r.yg)("li",{parentName:"ol"},"Configure more Steps as needed")),(0,r.yg)("p",null,"Check out the video overview below to learn how to create a Workflow."),(0,r.yg)("iframe",{width:"784",height:"441",src:"https://www.youtube.com/embed/HmE_wp_g1RY?si=Pud7DPS0BevAjStp",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,r.yg)("h3",{id:"merging-branches-and-skipping-steps"},"Merging branches and Skipping Steps"),(0,r.yg)("p",null,"The workflow builder allows branch merging and skipping steps. To merge two or\nmore steps into one step or to skip some steps:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Hover on the step you want to merge or initiate a skip"),(0,r.yg)("li",{parentName:"ol"},"You will see a link \ud83d\udd17 icon beside the new step icon."),(0,r.yg)("li",{parentName:"ol"},"Click on the link icon and drag to create a path"),(0,r.yg)("li",{parentName:"ol"},"Drop the new path on the desired step in your workflow")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Merging",src:o(40809).A,width:"600",height:"338"})),(0,r.yg)("admonition",{title:"Looping is not supported",type:"note"},(0,r.yg)("p",{parentName:"admonition"},"Looping workflows are not supported so you have to connect paths to downstream\nsteps. When using branching and skipping paths, you can use edge conditions like\nwith any other step.")),(0,r.yg)("h2",{id:"run-workflows"},"Run Workflows"),(0,r.yg)("p",null,'Workflows will run automatically when they are "enabled"\u2014i.e., when their\ntrigger is turned on. A webhook trigger will run your workflow whenever a\nrequest is received at that trigger\'s URL, and a cron trigger will run a\nworkflow whenever its cron schedule matches the current time.'),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Please note that workflows are disabled by default. When you are ready to have\nyour workflow running, you have to manually enable the workflow.")),(0,r.yg)("h3",{id:"enabling-or-disabling-a-workflow"},"Enabling or Disabling a Workflow"),(0,r.yg)("p",null,"There are two ways to disable or enable a workflow in your OpenFn project:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"via the workflow state toggle"),(0,r.yg)("li",{parentName:"ol"},"via the workflow trigger")),(0,r.yg)("h4",{id:"via-the-workflow-state-toggle"},"Via the workflow state toggle"),(0,r.yg)("p",null,"You can enable or disable your workflow by using the toggle button located on\nthe corresponding row in the project workflows list or the toggle on the\nnavigation bar in the workflow canvas."),(0,r.yg)("p",null,"The screenshot below shows an enabled workflow in the workflow list."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Via the workflow list",src:o(12256).A,width:"1918",height:"598"})),(0,r.yg)("p",null,"The screenshot below shows a disabled workflow in the workflow canvas."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Via the workflow canvas",src:o(30180).A,width:"2622",height:"1640"})),(0,r.yg)("h4",{id:"via-the-workflow-trigger"},"Via the workflow trigger"),(0,r.yg)("p",null,"To enable or disable a workflow via the workflow trigger, select the trigger\nicon on the canvas and use the toggle in the configuration panel to toggle the\nworkflow state."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Enabled workflow in the trigger panel",src:o(22603).A,width:"2242",height:"1322"})),(0,r.yg)("h3",{id:"manual-runs"},"Manual Runs"),(0,r.yg)("p",null,"Check out the video for a quick overview."),(0,r.yg)("iframe",{width:"784",height:"441",src:"https://www.youtube.com/embed/dKMtT1QKl-o",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,r.yg)("p",null,"You can run a workflow manually in three ways:"),(0,r.yg)("h4",{id:"with-an-empty-input-this-is-the-default-behavior"},"With an empty input (this is the default behavior)"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Empty Input",src:o(41414).A,width:"1198",height:"360"})),(0,r.yg)("h4",{id:"with-a-custom-input-you-can-type-copypaste-or-import-a-file-with-valid-json"},"With a custom input (you can type, copy/paste, or import a file with valid JSON)"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Custom Input",src:o(70400).A,width:"1198",height:"806"})),(0,r.yg)("h4",{id:"with-an-existing-input"},"With an existing input"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Existing Input",src:o(4274).A,width:"1198",height:"958"})),(0,r.yg)("p",null,"Note that the available existing inputs are only those that have been used to\nrun this particular step before."),(0,r.yg)("h2",{id:"limit-concurrency"},"Limit Concurrency"),(0,r.yg)("p",null,"Workflow ",(0,r.yg)("strong",{parentName:"p"},"concurrency")," is the number of runs that will be allowed for a given\nworkflow ",(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("em",{parentName:"strong"},"at the same time")),'. In OpenFn, project owners and administrators\nare able to limit the maximum number of the runs that can be executed at the\nsame time for a workflow. You might do this to ensure "one at a time" serial\nprocessing or to keep a fast OpenFn workflow from overwhelming the API rate\nlimit of some other connected system.'),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Please check to make sure that your parallel execution is not disabled for your\nproject as it will override the workflow level concurrency limit.")),(0,r.yg)("h3",{id:"what-happens-when-concurrency-limit-is-set-on-a-workflow"},"What happens when concurrency limit is set on a workflow?"),(0,r.yg)("p",null,"When concurrency limit is configured for a workflow, the maximum number of runs\nthat are executed concurrently will not exceed the number that has been set for\nthe workflow. For example:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Concurrency not set (or = 0)"),": There's no artificial limit applied, and\nthis workflow will only be limited by the total computing power available\nacross your OpenFn installation."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Concurrency = 1"),": Runs for this workflow will only take place 1-at-a-time.\nEach run must ",(0,r.yg)("em",{parentName:"li"},"finish")," before the next run can start."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Concurrency = 2"),": No more than 2 runs for this workflow can be executed at\na time and other runs will have stay ",(0,r.yg)("inlineCode",{parentName:"li"},"enqueued"),'. If runs "A", "B", and "C" are\nall enqueued, "A" and "B" will start executing. Once "A" finishes, "C" will\nstart. (No more than 2-at-a-time.)')),(0,r.yg)("h3",{id:"setting-concurrency-for-a-workflow"},"Setting Concurrency for a workflow"),(0,r.yg)("p",null,"Concurrency limits can be set via the workflow settings modal on the workflow\ncanvas."),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Click on the settings icon beside the save button on your workflow to open\nthe workflow settings"),(0,r.yg)("li",{parentName:"ol"},"In the modal, enter the maximum concurrency limit"),(0,r.yg)("li",{parentName:"ol"},"Click save.")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Configuring Concurrency",src:o(96902).A,width:"2398",height:"1624"})),(0,r.yg)("h3",{id:"log-outputs"},"Log Outputs"),(0,r.yg)("p",null,"For data security and compliance purposes, the log output of a workflow run can\nbe configured to disable logging ",(0,r.yg)("inlineCode",{parentName:"p"},"console.log()")," statements. This can be done\nvia the workflow configuration modal by a project owner or administrator."),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Click on the settings icon."),(0,r.yg)("li",{parentName:"ol"},"In the modal, toggle the ",(0,r.yg)("strong",{parentName:"li"},"Allow ",(0,r.yg)("inlineCode",{parentName:"strong"},"console.log()")," usage")," switch to disable\nlogging ",(0,r.yg)("inlineCode",{parentName:"li"},"console.log()")," statements. By default, this is enabled.")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Configuring Log Outputs",src:o(55764).A,width:"2637",height:"1599"})),(0,r.yg)("h2",{id:"keyboard-shortcuts"},"Keyboard Shortcuts"),(0,r.yg)("p",null,"From the canvas you can perform certain common actions (e.g., save) using\nkeystrokes. Check out the full list of keyboard shortcuts\n",(0,r.yg)("a",{parentName:"p",href:"/documentation/keyboard-shortcuts"},"here"),"."))}p.isMDXComponent=!0},15680:(e,t,o)=>{o.d(t,{xA:()=>c,yg:()=>w});var n=o(96540);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=n.createContext({}),g=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=g(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=g(o),h=r,w=u["".concat(s,".").concat(h)]||u[h]||p[h]||a;return o?n.createElement(w,i(i({ref:t},c),{},{components:o})):n.createElement(w,i({ref:t},c))}));function w(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var g=2;g<a;g++)i[g]=o[g];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}h.displayName="MDXCreateElement"},96902:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/configuring-concurrency-d509f82850c256a2db3e3c0499af212d.png"},55764:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/configuring-log-outputs-a026caa6fcf85d0a733da30bfc57e68d.png"},70400:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/custom-be87b2a72a852e8350d9b1e5ce3b4fc0.png"},41414:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/empty-b3bad2024f3127dd29ef01f377cc44c5.png"},4274:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/existing-d794cd91b4b58fd8bc250729bda42308.png"},22603:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/via-trigger-panel-9f7763e0197d0c7524a9a3e54d5cf1c7.png"},40809:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/workflow_builder_merging-8064fdeaaa3c4c7ba26dd6c3d658c02a.gif"},30180:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/workflow_canvas_toggle-d5dcf7321e7be9bcd3829cfa2f280850.png"},12256:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/workflow_list_toggle-c498e255ae1153ec86e90247514ef6e6.png"}}]);