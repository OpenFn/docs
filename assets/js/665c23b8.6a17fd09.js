"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[55580],{8423:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/surveycto_webhook_config-afa435ab51158db2b061d862695ab532.webp"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(96540);const s={},i=o.createContext(s);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:n},e.children)}},29014:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/openfn_surveycto_trigger-d02bcc1e5b1d1cc03771cb01835f9160.webp"},88469:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"surveycto","title":"SurveyCTO","description":"App Overview","source":"@site/adaptors/surveycto.md","sourceDirName":".","slug":"/surveycto","permalink":"/adaptors/surveycto","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"SurveyCTO"},"sidebar":"adaptors","previous":{"title":"README.md","permalink":"/adaptors/packages/stripe-readme"},"next":{"title":"Functions","permalink":"/adaptors/packages/surveycto-docs"}}');var s=t(74848),i=t(28453);const r={title:"SurveyCTO"},a=void 0,d={},c=[{value:"App Overview",id:"app-overview",level:2},{value:"Integration Use Cases:",id:"integration-use-cases",level:2},{value:"Integration Options",id:"integration-options",level:2},{value:"1. Webhooks (for real-time integration):",id:"1-webhooks-for-real-time-integration",level:3},{value:"2. API integration (for scheduled and/or bulk data integration):",id:"2-api-integration-for-scheduled-andor-bulk-data-integration",level:3},{value:"Configuring a Credential with API Access",id:"configuring-a-credential-with-api-access",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"app-overview",children:"App Overview"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://www.surveycto.com/",children:"SurveyCTO"})," is a versatile data collection platform\ndesigned to streamline the process of gathering field data for research,\nevaluations, and monitoring purposes. SurveyCTO operates in the cloud, providing\nusers with convenient online access to its suite of tools and features."]}),"\n",(0,s.jsx)(n.p,{children:"At its core, SurveyCTO offers a comprehensive solution for creating and\ndeploying customized surveys, forms, and questionnaires, enabling organizations\nto collect data efficiently and accurately. In addition to its primary data\ncollection functionality, SurveyCTO boasts a range of advanced features,\nincluding robust data validation, real-time monitoring capabilities, and\nseamless integration with external data systems. This versatile platform caters\nto a diverse array of needs, serving researchers, NGOs, government agencies, and\nother entities seeking reliable data collection solutions."}),"\n",(0,s.jsx)(n.h2,{id:"integration-use-cases",children:"Integration Use Cases:"}),"\n",(0,s.jsx)(n.p,{children:'As SurveyCTO is primarily a mobile data collection tool, often that data needs\nto be extracted, managed, summarized, and analysed in another system (e.g.,\ndatabase/data warehouse, analytics tools, and "MIS"/data management software\nlike like DHIS2, Salesforce, etc.).'}),"\n",(0,s.jsx)(n.p,{children:"Example user story:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"As a program or M&E manager, I would like my field officers to collect data in\nplaces with limited connection availability using SurveyCTO. I want the data\ncollected to automatically sync to my Tabluea dashboard for visualization and\nfurther analysis."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"integration-options",children:"Integration Options"}),"\n",(0,s.jsxs)(n.p,{children:["SurveyCTO provides a REST API which can be accessed via the OpenFn ",(0,s.jsx)(n.code,{children:"surveycto"}),"\nadaptor. In SurveyCTO, admins can also configure webhooks to push data to\nOpenFn/other external systems in real-time in CSV or JSON format."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"openfn-trigger-options",src:t(29014).A+"",width:"1580",height:"936"})}),"\n",(0,s.jsx)(n.h3,{id:"1-webhooks-for-real-time-integration",children:"1. Webhooks (for real-time integration):"}),"\n",(0,s.jsxs)(n.p,{children:["SurveyCTO has a\n",(0,s.jsx)(n.a,{href:"https://docs.surveycto.com/05-exporting-and-publishing-data/03-publishing-data-to-the-cloud/05.forms-to-webhooks.html",children:"webhooks service"}),"\nwhich allows you to publish data to your OpenFn workflow (or any endpoint URL).\nNote that as submissions come in to the server, SurveyCTO will automatically\npublish your selected fields to your chosen webhook but there will be a brief\ndelay of up to ten minutes from the time the submission occurs and the time\nSurveyCTO sends this data to OpenFn. (Therefore this integration is ",(0,s.jsx)(n.em,{children:"near"}),"\nreal-time, depending on how quickly SurveyCTO forwards the data.)"]}),"\n",(0,s.jsx)(n.p,{children:"To configure a webhook to push data to OpenFn:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Login to SurveyCTO and navigate to the export section of the form setup"}),"\n",(0,s.jsx)(n.li,{children:'Scroll down to "Your data" section and make sure "Advanced Mode" is enabled'}),"\n",(0,s.jsxs)(n.li,{children:["Click the ",(0,s.jsx)(n.code,{children:"Configure"})," button and ",(0,s.jsx)(n.code,{children:"Add Webhook"})]}),"\n",(0,s.jsxs)(n.li,{children:["Add a ",(0,s.jsx)(n.code,{children:"Name"})," for the webhook and paste your OpenFn ",(0,s.jsx)(n.code,{children:"Webhook URL"})," (copied from\nyour OpenFn Workflow trigger)"]}),"\n",(0,s.jsxs)(n.li,{children:["Select the fields you want to publish/forward to OpenFn and click on ",(0,s.jsx)(n.code,{children:"Save"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://docs.surveycto.com/05-exporting-and-publishing-data/03-publishing-data-to-the-cloud/05.forms-to-webhooks.html",children:"See this docs page"}),"\nfor more on SurveyCTO webooks."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Configuraing the webhook for OpenFn",src:t(8423).A+"",width:"1374",height:"1070"})}),"\n",(0,s.jsx)(n.h3,{id:"2-api-integration-for-scheduled-andor-bulk-data-integration",children:"2. API integration (for scheduled and/or bulk data integration):"}),"\n",(0,s.jsxs)(n.p,{children:["SurveyCTO provides\n",(0,s.jsx)(n.a,{href:"https://support.surveycto.com/hc/en-us/articles/360033156894-REST-API-documentation",children:"RESTful APIs"}),"\nthat we can use to pull data on a scheduled basis using OpenFn ",(0,s.jsx)(n.code,{children:"cron triggers"}),".\nFor connectng with these APIs, OpenFb has developed an API adaptor for a quicker\nintegation setup - see\n",(0,s.jsx)(n.a,{href:"https://github.com/OpenFn/adaptors/tree/main/packages/surveycto",children:"the `surveycto' adaptor source"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Via the REST API, data can be extracted in JSON or CSV formats. Example APIs\nendpoints include:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"https://_servername_.surveycto.com/api/v1/forms/files/csv/formid"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"https://_servername_.surveycto.com/api/v2/forms/data/wide/json/formid?date=[D]"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"JSON is the desirable format for API-to-API integration and when working with\nOpenFn"}),"\n",(0,s.jsxs)(n.li,{children:["Replace the ",(0,s.jsx)(n.code,{children:"formId"})," parameter with the ",(0,s.jsx)(n.strong,{children:"formId"})," of the survey you want to\nextract"]}),"\n",(0,s.jsxs)(n.li,{children:["If you want to filter form submissions by the survey submission ",(0,s.jsx)(n.code,{children:"date"}),",\nreplace the ",(0,s.jsx)(n.code,{children:"[D]"})," parameter with the survey submission date value you want to\nfilter by and see SurveyCTO docs on data format requirements"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["When using the OpenFn ",(0,s.jsx)(n.code,{children:"surveycto"})," adaptor to connect with the ",(0,s.jsx)(n.code,{children:"/formid"})," API\nendpoint, your job expression might look as follows. See the ",(0,s.jsx)(n.code,{children:"functions"})," and\n",(0,s.jsx)(n.code,{children:"examples"})," in the sidebar for more."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"fetchSubmissions(\n  'form123', //replace with the form id\n  {\n    date: 'Apr 18, 2024 6:26:21 AM', //if submission date filter not specified, the function will fetch submissions from ALL-TIME\n    status: 'approved|rejected', // add to filter by status; if not specified, the function will fetch submissions of ALL statuses\n  }\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuring-a-credential-with-api-access",children:"Configuring a Credential with API Access"}),"\n",(0,s.jsxs)(n.p,{children:["To authenticate with the SurveyCTO API, your OpenFn Workflow will require a user\ncredential where the setting ",(0,s.jsx)(n.code,{children:"Allow server API access"})," has been enabled. This\nsetting controls whether or not users in a given role can use the API to fetch\nforms and data from the server.\n",(0,s.jsx)(n.a,{href:"https://docs.surveycto.com/04-monitoring-and-management/01-the-basics/00b.managing-user-roles.html",children:"See SurveyCTO docs"}),"\non managing user roles."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);