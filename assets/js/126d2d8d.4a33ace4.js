"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[20574],{10963:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"build-for-developers/security-for-devs","title":"Security considerations for OpenFn development","description":"Introduction","source":"@site/docs/build-for-developers/security-for-devs.md","sourceDirName":"build-for-developers","slug":"/security-for-devs","permalink":"/documentation/security-for-devs","draft":false,"unlisted":false,"editUrl":"https://github.com/openfn/docs/edit/main/docs/build-for-developers/security-for-devs.md","tags":[],"version":"current","frontMatter":{"id":"security-for-devs","title":"Security considerations for OpenFn development","sidebar_label":"Security considerations","slug":"/security-for-devs"},"sidebar":"docs","previous":{"title":"Handling Images","permalink":"/documentation/jobs/image-handling"},"next":{"title":"Workflows","permalink":"/documentation/build/workflows"}}');var t=i(74848),o=i(28453);const r={id:"security-for-devs",title:"Security considerations for OpenFn development",sidebar_label:"Security considerations",slug:"/security-for-devs"},a=void 0,c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Common mistakes and how to avoid them",id:"common-mistakes-and-how-to-avoid-them",level:2},{value:"Hardcoding sensitive information",id:"hardcoding-sensitive-information",level:3},{value:"Checking sensitive data into GitHub",id:"checking-sensitive-data-into-github",level:3},{value:"Use of <code>console.log()</code>",id:"use-of-consolelog",level:3},{value:"Ignoring error handling",id:"ignoring-error-handling",level:3},{value:"Overly broad permissions on credentials",id:"overly-broad-permissions-on-credentials",level:3},{value:"Retaining your OpenFn project",id:"retaining-your-openfn-project",level:3},{value:"Adaptors security practices",id:"adaptors-security-practices",level:3}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"Even if the target applications you are integrating are secure, there are still\nmany security risks in data integration implementations. Read on for best\npractices and tips for developers to ensure top-notch security when building\nOpenFn workflows."}),"\n",(0,t.jsx)(n.h2,{id:"common-mistakes-and-how-to-avoid-them",children:"Common mistakes and how to avoid them"}),"\n",(0,t.jsx)(n.p,{children:"Writing OpenFn jobs can be straightforward, but there are common mistakes that\ndevelopers might make. Here are some of them and tips on how to avoid them:"}),"\n",(0,t.jsx)(n.h3,{id:"hardcoding-sensitive-information",children:"Hardcoding sensitive information"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Avoid Hardcoding Credentials:"})," Instead of hardcoding usernames, passwords,\nor API keys directly into your scripts, use the ",(0,t.jsx)(n.code,{children:"state"})," object to store and\nretrieve sensitive information."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Store credentials in state.json\n{\n  "configuration": {\n    "username": "your_username",\n    "password": "your_password"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Retrieve credentials from state\nconst username = state.configuration.username;\nconst password = state.configuration.password;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"checking-sensitive-data-into-github",children:"Checking sensitive data into GitHub"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Be Mindful of Repository Contents:"})," When working on client projects, avoid\nsaving sensitive data, such as ",(0,t.jsx)(n.code,{children:"state.json"}),", in the client's public GitHub\nrepository. Always review the repository contents and remove or redact\nsensitive information before committing changes."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Specific Directories for Test Payloads:"})," If you store test payloads in\na client repository, use directories like ",(0,t.jsx)(n.code,{children:"sampleData/"})," and ensure the\nfilenames do not resemble ",(0,t.jsx)(n.code,{children:"state.json"}),". Avoid complete state objects in these\nfiles; instead, mimic the exact test payload."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Check Git Diffs Before Committing:"})," Before making commits, carefully read\nthe git diff line by line to identify unintentional changes and logs. Follow\nthe practice of selective commits (",(0,t.jsx)(n.code,{children:"git add ./path/to/file"}),") rather than using\n",(0,t.jsx)(n.code,{children:"git add -A"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Build a Habit of Reviewing Diffs:"})," To help build the habit, read the first\nfile in ",(0,t.jsx)(n.code,{children:"git diff"})," and then use ",(0,t.jsx)(n.code,{children:"git add ./that_file"})," if it\u2019s good to go.\nContinue reviewing the diff, adding files as needed. Finally, use\n",(0,t.jsx)(n.code,{children:'git commit -m "my changes"'})," and push."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"use-of-consolelog",children:["Use of ",(0,t.jsx)(n.code,{children:"console.log()"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Mindful Logging Practices:"})," While ",(0,t.jsx)(n.code,{children:"console.log()"})," is crucial during job\ndevelopment, it's essential to be cautious about logging sensitive\ninformation. Once jobs are built, administrators can disable the output of\nconsole logs, but certain aspects of the sandbox may still be displayed."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Avoid Logging Sensitive Data:"})," Be cautious when using ",(0,t.jsx)(n.code,{children:"console.log(state)"}),"\nor ",(0,t.jsx)(n.code,{children:"console.log(state.configuration)"}),", especially if they contain sensitive\ninformation like usernames and passwords. In certain cases, this can lead to\nexposure of sensitive data in the logs."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Good practice\nconsole.log('Operation completed successfully.');\n\n// Avoid logging sensitive data\nconsole.log('Received sensitive data:', state.data);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Audit-Friendly Logging:"})," Recognize that some clients rely on\n",(0,t.jsx)(n.code,{children:"console.log()"})," for audit purposes even in production. Ensure that your\nlogging practices align with the client's requirements, and avoid exposing\nconfidential information inadvertently."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Administrator Control:"})," Understand that administrators can control the\nvisibility of console logs on an OpenFn project. However, it's crucial to\nadopt logging practices that align with both development needs and client\nsecurity considerations."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["These best practices around ",(0,t.jsx)(n.code,{children:"console.log()"})," usage contribute to secure job\ndevelopment on OpenFn, minimizing the risk of inadvertently exposing sensitive\ndata in logs."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ignoring-error-handling",children:"Ignoring error handling"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Handle Errors Gracefully:"})," Always implement error handling in your scripts.\nProvide meaningful error messages within the ",(0,t.jsx)(n.code,{children:"state"})," object to assist in\ndebugging without exposing sensitive details in responses."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Set custom error message in state\nstate.error = new Error(\n  'Authentication failed. Please check your credentials.'\n);\n\n// Log the error in OpenFn\nconsole.error(state.error);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"overly-broad-permissions-on-credentials",children:"Overly broad permissions on credentials"}),"\n",(0,t.jsx)(n.p,{children:"When adding credentials to OpenFn, it is imperative to follow the principle of\nleast privilege. Specifically:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Specialized User Accounts:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Client-Specific User:"})," Create a dedicated user account tailored for the\nclient's system within the third-party application (e.g., Salesforce). This\nuser account should be exclusively used for OpenFn integration."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Limited API Access:"})," Grant API access only to the resources necessary for\nOpenFn operations. Ensure that permissions are restricted to the specific\nobjects and fields required for data exchange."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"OAuth Scopes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Scope Control via OAuth:"})," In some instances, OAuth is utilized for secure\nauthentication. Leverage OAuth capabilities to control the scopes of access.\nDefine and limit the permissions according to the exact requirements of\nOpenFn."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Salesforce Example:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Object and Field Restrictions:"})," Specifically in Salesforce, create a user\naccount with API access restricted to the relevant objects and fields. Avoid\ngranting unnecessary permissions that could potentially pose security risks."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"By adopting these practices, you ensure that credentials associated with\nOpenFn have precisely defined and restricted permissions. This mitigates\nthe risk of unintended access and protects sensitive client data during\nintegration processes."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"retaining-your-openfn-project",children:"Retaining your OpenFn project"}),"\n",(0,t.jsx)(n.p,{children:"If you have strict data residency requirements, it\u2019s possible to configure\nOpenFn as a \u201czero-retention\u201d data pipeline to ensure compliance. This ensures\nthat no data processed in OpenFn workflows (Inputs, Outputs) are retained, even\non OpenFn\u2019s cloud-hosted platform offering."}),"\n",(0,t.jsx)(n.p,{children:"Many users find that temporarily retaining data in OpenFn can be helpful for\ntroubleshooting. For example, if you have a 3-step workflow and the workflow\nfails at step 3, it might be helpful to retain the Input for this failed step so\nthat you can inspect the data, quickly troubleshoot, and re-try from that point\nof failure. To enable this more user-friendly troubleshooting experience, most\nusers opt to leave temporary data retention on, and the retention period can be\nadjusted by the OpenFn super admin."}),"\n",(0,t.jsx)(n.h3,{id:"adaptors-security-practices",children:"Adaptors security practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Client State Protection:"})," Adaptors (language packages) should never expose\nany part of a client\u2019s state directly. Callbacks may log parts of state but\nshould avoid logging configuration or actual data, considering potential\nPersonally Identifiable Information (PII)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Metadata Usage:"})," Adaptors may rely on metadata about state, such as logging\nthe \u201cnumber of cases retrieved\u201d from a request. However, logging the request\nitself is prohibited."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Security Review Process:"})," As more contributors engage with adaptors,\nrigorous security reviews for pull requests become central. Ensure adherence\nto the outlined security practices during the review process."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Learn More",type:"tip",children:(0,t.jsxs)(n.p,{children:["For more security considerations and best practices for all OpenFn implementers\n(not just developers), be sure to check out the complete\n",(0,t.jsx)(n.a,{href:"/documentation/get-started/security",children:"OpenFn Security Guidebook"}),". For more on job-writing,\nsee the ",(0,t.jsx)(n.a,{href:"/documentation/jobs/job-writing-guide",children:"job-writing guide"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var s=i(96540);const t={},o=s.createContext(t);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);