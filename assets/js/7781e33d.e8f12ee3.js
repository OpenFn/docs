"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[25961],{8780:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>h,contentTitle:()=>c,default:()=>a,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"packages/mpesa-docs","title":"mpesa@1.0.4","description":"buyGoods(data, options)","source":"@site/adaptors/packages/mpesa-docs.md","sourceDirName":"packages","slug":"/packages/mpesa-docs","permalink":"/adaptors/packages/mpesa-docs","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"mpesa@1.0.4","id":"mpesa-docs","keywords":["adaptor","mpesa","buyGoods","checkTransactionStatus","registerUrl","remitTax","request","stkPush"]},"sidebar":"adaptors","previous":{"title":"moodle","permalink":"/adaptors/moodle"},"next":{"title":"Configuration","permalink":"/adaptors/packages/mpesa-configuration-schema"}}');var n=t(74848),d=t(28453);const i={title:"mpesa@1.0.4",id:"mpesa-docs",keywords:["adaptor","mpesa","buyGoods","checkTransactionStatus","registerUrl","remitTax","request","stkPush"]},c=void 0,h={},l=[{value:"Functions",id:"functions",level:2},{value:"buyGoods",id:"buygoods",level:3},{value:"checkTransactionStatus",id:"checktransactionstatus",level:3},{value:"registerUrl",id:"registerurl",level:3},{value:"remitTax",id:"remittax",level:3},{value:"request",id:"request",level:3},{value:"stkPush",id:"stkpush",level:3},{value:"Interfaces",id:"interfaces",level:2},{value:"BuyGoodsObject",id:"buygoodsobject",level:3},{value:"RegisterUrlObject",id:"registerurlobject",level:3},{value:"RemitTaxObject",id:"remittaxobject",level:3},{value:"RequestOptions",id:"requestoptions",level:3},{value:"STKPushObject",id:"stkpushobject",level:3},{value:"TransactionStatusObject",id:"transactionstatusobject",level:3}];function o(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("dl",{children:[(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"#buygoods",children:"buyGoods(data, options)"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"#checktransactionstatus",children:"checkTransactionStatus(data, options)"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"#registerurl",children:"registerUrl(data, options)"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"#remittax",children:"remitTax(data, options)"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"#request",children:"request(method, path, body, options)"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"#stkpush",children:"stkPush(data, options)"})})]}),"\n",(0,n.jsx)(s.p,{children:"This adaptor exports the following from common:"}),"\n",(0,n.jsxs)("dl",{children:[(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#cursor",children:"cursor()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#datapath",children:"dataPath()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#datavalue",children:"dataValue()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#datefns",children:"dateFns"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#each",children:"each()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#field",children:"field()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#fields",children:"fields()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#fn",children:"fn()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#lastreferencevalue",children:"lastReferenceValue()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#merge",children:"merge()"})}),(0,n.jsx)("dt",{children:(0,n.jsx)("a",{href:"/adaptors/packages/common-docs#sourcevalue",children:"sourceValue()"})})]}),"\n",(0,n.jsx)(s.h2,{id:"functions",children:"Functions"}),"\n",(0,n.jsx)(s.h3,{id:"buygoods",children:"buyGoods"}),"\n",(0,n.jsx)("p",{children:(0,n.jsx)("code",{children:"buyGoods(data, options) \u21d2 Operation"})}),"\n",(0,n.jsx)(s.p,{children:"Pay for goods and services directly from your business account to a till number, merchant store number or Merchant HO"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Param"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#buygoodsobject",children:(0,n.jsx)("code",{children:"BuyGoodsObject"})})}),(0,n.jsx)(s.td,{children:"The object that will be attached to the POST request body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"options"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#requestoptions",children:(0,n.jsx)("code",{children:"RequestOptions"})})}),(0,n.jsx)(s.td,{children:"Optional request object. Includes headers, error mappings and query params"})]})]})]}),"\n",(0,n.jsx)(s.p,{children:"This operation writes the following keys to state:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"State Key"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:"the parsed response body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"response"}),(0,n.jsx)(s.td,{children:"the response from the DARAJA API server (excluding the body)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"references"}),(0,n.jsx)(s.td,{children:"an array of all previous data objects used in the Job"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.strong,{children:"Example:"})," Pay for goods"]}),(0,n.jsx)(s.td,{})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:'buyGoods({\n    "Initiator": "testapi",\n    "SecurityCredential": "sbMXpuhMX5LzieNiDrx9TgscfaBxxvie0WlBDdGli4MWu4s5gbhYVlBy+T89xHQdoYwcG202KNp403ln2dLFnytPqw==",\n    "Amount": 1,\n    "PartyA": 600999,\n    "PartyB": 600000,\n    "AccountReference": 353353,\n    "Requester": 254708374149,\n    "Remarks": "ok",\n    "QueueTimeOutURL": "https://mydomain.com/b2b/queue/",\n    "ResultURL": "https://mydomain.com/b2b/result/"\n});\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"checktransactionstatus",children:"checkTransactionStatus"}),"\n",(0,n.jsx)("p",{children:(0,n.jsx)("code",{children:"checkTransactionStatus(data, options) \u21d2 Operation"})}),"\n",(0,n.jsx)(s.p,{children:"Check the status of the transaction"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Param"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#transactionstatusobject",children:(0,n.jsx)("code",{children:"TransactionStatusObject"})})}),(0,n.jsx)(s.td,{children:"The object that will be attached to the POST request body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"options"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#requestoptions",children:(0,n.jsx)("code",{children:"RequestOptions"})})}),(0,n.jsx)(s.td,{children:"Optional request object. Includes headers, error mappings and query params"})]})]})]}),"\n",(0,n.jsx)(s.p,{children:"This operation writes the following keys to state:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"State Key"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:"the parsed response body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"response"}),(0,n.jsx)(s.td,{children:"the response from the DARAJA API server (excluding the body)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"references"}),(0,n.jsx)(s.td,{children:"an array of all previous data objects used in the Job"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.strong,{children:"Example:"})," Check status of a transaction"]}),(0,n.jsx)(s.td,{})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:'checkTransactionStatus({\n    "Initiator": "testapi",\n    "SecurityCredential": "ctHDk+dN14A22B5GyQQvISSTY3K1tVnCTuQGoG7PsTCadzTkl5wz44Rhpkb0BZDvfRA==",\n    "TransactionID": "OEI2AK4Q16",\n    "PartyA": 600998,\n    "IdentifierType": 4,\n    "ResultURL": "https://mydomain.com/TransactionStatus/result/",\n    "QueueTimeOutURL": "https://mydomain.com/TransactionStatus/queue/",\n    "Remarks": "fdfdfdfdf",\n    "Occassion": "null",\n});\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"registerurl",children:"registerUrl"}),"\n",(0,n.jsx)("p",{children:(0,n.jsx)("code",{children:"registerUrl(data, options) \u21d2 Operation"})}),"\n",(0,n.jsx)(s.p,{children:"Register a URL that allows receiving payment notifications to your paybill."}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Param"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#registerurlobject",children:(0,n.jsx)("code",{children:"RegisterUrlObject"})})}),(0,n.jsx)(s.td,{children:"The object that will be attached to the POST request body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"options"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#requestoptions",children:(0,n.jsx)("code",{children:"RequestOptions"})})}),(0,n.jsx)(s.td,{children:"Optional request object. Includes headers, error mappings and query params"})]})]})]}),"\n",(0,n.jsx)(s.p,{children:"This operation writes the following keys to state:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"State Key"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:"the parsed response body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"response"}),(0,n.jsx)(s.td,{children:"the response from the DARAJA API server (excluding the body)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"references"}),(0,n.jsx)(s.td,{children:"an array of all previous data objects used in the Job"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.strong,{children:"Example:"})," Register a URL to receive payment notifications"]}),(0,n.jsx)(s.td,{})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:'registerUrl({\n    "ShortCode": 600426,\n    "ResponseType": "Completed",\n    "ConfirmationURL": "https://mydomain.com/confirmation",\n    "ValidationURL": "https://mydomain.com/validation"\n});\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"remittax",children:"remitTax"}),"\n",(0,n.jsx)("p",{children:(0,n.jsx)("code",{children:"remitTax(data, options) \u21d2 Operation"})}),"\n",(0,n.jsx)(s.p,{children:"Remit tax to the Kenya Revenue Authority (KRA)."}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Param"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#remittaxobject",children:(0,n.jsx)("code",{children:"RemitTaxObject"})})}),(0,n.jsx)(s.td,{children:"The object that will be attached to the POST request body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"options"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#requestoptions",children:(0,n.jsx)("code",{children:"RequestOptions"})})}),(0,n.jsx)(s.td,{children:"Optional request object. Includes headers, error mappings and query params"})]})]})]}),"\n",(0,n.jsx)(s.p,{children:"This operation writes the following keys to state:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"State Key"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:"the parsed response body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"response"}),(0,n.jsx)(s.td,{children:"the response from the DARAJA API server (excluding the body)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"references"}),(0,n.jsx)(s.td,{children:"an array of all previous data objects used in the Job"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.strong,{children:"Example:"})," Pay tax to KRA"]}),(0,n.jsx)(s.td,{})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:'remitTax({\n    "Initiator": "testapi",\n    "SecurityCredential": "Uq1qluCjSYfMF3XEvlpfuatnWwWerwq42fB+mMd8nsKdAVO04DGHhG/s3xO3g7POki9B8i7cSoEkBux4bQrlDLDWJhaTrt1TdbE+ZQ==",\n    "Amount": 1,\n    "PartyA": 600995,\n    "AccountReference": 353353,\n    "Remarks": "ok",\n    "QueueTimeOutURL": "https://mydomain.com/b2b/queue/",\n    "ResultURL": "https://mydomain.com/b2b/result/"\n})\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"request",children:"request"}),"\n",(0,n.jsx)("p",{children:(0,n.jsx)("code",{children:"request(method, path, body, options) \u21d2 Operation"})}),"\n",(0,n.jsx)(s.p,{children:"Make a general HTTP request"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Param"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"method"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"HTTP method to use"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"path"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Path to resource."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"body"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"object"})}),(0,n.jsx)(s.td,{children:"Object which will be attached to the POST body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"options"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#requestoptions",children:(0,n.jsx)("code",{children:"RequestOptions"})})}),(0,n.jsx)(s.td,{children:"Optional request options"})]})]})]}),"\n",(0,n.jsx)(s.p,{children:"This operation writes the following keys to state:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"State Key"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:"the parsed response body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"response"}),(0,n.jsx)(s.td,{children:"the response from the DARAJA API server (excluding the body)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"references"}),(0,n.jsx)(s.td,{children:"an array of all previous data objects used in the Job"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.strong,{children:"Example:"})," Register a URL to receive payment notifications"]}),(0,n.jsx)(s.td,{})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:'request("POST", "/mpesa/c2b/v1/registerurl", \n {\n   "ShortCode": 600426,\n   "ResponseType": "Completed",\n   "ConfirmationURL": "https://mydomain.com/confirmation",\n   "ValidationURL": "https://mydomain.com/validation"\n });\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"stkpush",children:"stkPush"}),"\n",(0,n.jsx)("p",{children:(0,n.jsx)("code",{children:"stkPush(data, options) \u21d2 Operation"})}),"\n",(0,n.jsx)(s.p,{children:"Initiate a STK pin prompt to a Safaricom mobile number."}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Param"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#stkpushobject",children:(0,n.jsx)("code",{children:"STKPushObject"})})}),(0,n.jsx)(s.td,{children:"The object that will be attached to the POST request body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"options"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"#requestoptions",children:(0,n.jsx)("code",{children:"RequestOptions"})})}),(0,n.jsx)(s.td,{children:"Optional request object. Includes headers, error mappings and query params"})]})]})]}),"\n",(0,n.jsx)(s.p,{children:"This operation writes the following keys to state:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"State Key"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"data"}),(0,n.jsx)(s.td,{children:"the parsed response body"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"response"}),(0,n.jsx)(s.td,{children:"the response from the DARAJA API server (excluding the body)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"references"}),(0,n.jsx)(s.td,{children:"an array of all previous data objects used in the Job"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.strong,{children:"Example:"})," Initiate STK Push"]}),(0,n.jsx)(s.td,{})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:'stkPush({\n    "Amount": 1,\n    "PartyA": 254708374149,\n    "PartyB": 174379,\n    "PhoneNumber": 254708374149,\n    "CallBackURL": "https://mydomain.com/path",\n    "AccountReference": "CompanyXLTD",\n    "TransactionDesc": "Payment of X"\n});\n'})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"interfaces",children:"Interfaces"}),"\n",(0,n.jsx)(s.h3,{id:"buygoodsobject",children:"BuyGoodsObject"}),"\n",(0,n.jsx)(s.p,{children:"Buy goods parameter definition"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Properties"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Name"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Initiator"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"The M-Pesa API operator username. This user needs Org Business Pay Bill API initiator role on M-Pesa"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"SecurityCredential"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"The encrypted password of the M-Pesa API operator."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Amount"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"The transaction amount."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"PartyA"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"Your shortcode. The shortcode from which money will be deducted."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"AccountReference"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"The account number to be associated with the payment. Up to 13 characters"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Remarks"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Any additional information to be associated with the transaction."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"QueueTimeOutURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"A URL that will be used to notify your system in case the request times out before processing."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"ResultURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"A URL that will be used to send transaction results after processing."})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"registerurlobject",children:"RegisterUrlObject"}),"\n",(0,n.jsx)(s.p,{children:"Register URL parameter definition"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Properties"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Name"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"ShortCode"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"numeric"})}),(0,n.jsx)(s.td,{children:"Usually, a unique number is tagged to an M-PESA pay bill/till number of the organization."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"ResponseType"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"This parameter specifies what is to happen if for any reason the validation URL is not reachable. Sample values: 'Canceled', 'Completed'"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"ConfirmationURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"This is the URL that receives the confirmation request from API upon payment completion."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"ValidationURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"This is the URL that receives the validation request from the API upon payment submission."})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"remittaxobject",children:"RemitTaxObject"}),"\n",(0,n.jsx)(s.p,{children:"Remit tax parameter definition"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Properties"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Name"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Initiator"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"The M-Pesa API operator username."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"SecurityCredential"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"The encrypted password of the M-Pesa API operator."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Amount"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"The transaction amount."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"PartyA"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"This is your own shortcode from which the money will be deducted."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"AccountReference"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"The payment registration number (PRN) issued by KRA."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Remarks"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Any additional information to be associated with the transaction."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"QueueTimeOutURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"A URL that will be used to notify your system in case the request times out before processing."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"ResultURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"A URL that will be used to send transaction results after processing."})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"requestoptions",children:"RequestOptions"}),"\n",(0,n.jsx)(s.p,{children:"Options provided to the HTTP request"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Properties"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Name"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"errors"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"object"})}),(0,n.jsxs)(s.td,{children:["Map of errorCodes -> error messages, ie, ",(0,n.jsx)(s.code,{children:"{ 404: 'Resource not found;' }"}),". Pass ",(0,n.jsx)(s.code,{children:"false"})," to suppress errors for this code."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"query"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"object"})}),(0,n.jsx)(s.td,{children:"An object of query parameters to be encoded into the URL."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"headers"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"object"})}),(0,n.jsx)(s.td,{children:"An object of headers to append to the request."})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"stkpushobject",children:"STKPushObject"}),"\n",(0,n.jsx)(s.p,{children:"STKPush request data object"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Properties"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Name"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Amount"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"Amount charged."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"PartyA"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"The phone number that receives the STK push prompt. Expected to be a valid Safaricom Number that is M-pesa registered in the format 2547XXXXXXXX"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"PartyB"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"The organization that receives the funds"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"PhoneNumber"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"The mobile number to receive the STK pin prompt"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"CallBackURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"A valid secure URL that is used to receive notifications from M-Pesa API. It is the endpoint to which the results will be sent by M-Pesa API"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"AccountReference"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Along with the business name, this value is also displayed to the customer in the STK pin prompt message. Maximum of 12 characters"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"TransactionDesc"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Any additional information/comment that can be sent along with the request from you system."})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h3,{id:"transactionstatusobject",children:"TransactionStatusObject"}),"\n",(0,n.jsx)(s.p,{children:"Check transaction status data object."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Properties"})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Name"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Initiator"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"The name of the initiator initiating the request."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"SecurityCredential"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Encrypted credential of the user getting transaction status."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"TransactionID"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Unique identifier to identify a transaction on Mpesa."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"PartyA"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:"Organization/MSISDN receiving the transaction."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"IdentifierType"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"number"})}),(0,n.jsx)(s.td,{children:'Type of organization receiving the transaction. Example: "4" Orgnaization shortcode.'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"ResultURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"The path that stores information of a transaction."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"QueueTimeOutURL"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"URL"})}),(0,n.jsx)(s.td,{children:"The path that stores information of timeout transaction."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Remarks"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Comments that are sent along with the transaction."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Occassion"}),(0,n.jsx)(s.td,{children:(0,n.jsx)("code",{children:"string"})}),(0,n.jsx)(s.td,{children:"Optional parameter."})]})]})]}),"\n",(0,n.jsx)(s.hr,{})]})}function a(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>c});var r=t(96540);const n={},d=r.createContext(n);function i(e){const s=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(d.Provider,{value:s},e.children)}}}]);