"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[86707],{1313:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>p,frontMatter:()=>d,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"packages/motherduck-readme","title":"motherduck developer readme","description":"Source//github.com/OpenFn/adaptors/tree/main/packages/motherduck","source":"@site/adaptors/packages/motherduck-readme.md","sourceDirName":"packages","slug":"/packages/motherduck-readme","permalink":"/adaptors/packages/motherduck-readme","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"motherduck developer readme","id":"motherduck-readme","keywords":["adaptor","readme","motherduck"]},"sidebar":"adaptors","previous":{"title":"Changelog","permalink":"/adaptors/packages/motherduck-changelog"},"next":{"title":"Overview","permalink":"/adaptors/mpesa"}}');var r=a(74848),s=a(28453);const d={title:"motherduck developer readme",id:"motherduck-readme",keywords:["adaptor","readme","motherduck"]},o="motherduck Adaptor developer README.md",i={},c=[{value:"Configuration",id:"configuration",level:2},{value:"Sample Expressions",id:"sample-expressions",level:2},{value:"Execute SQL queries",id:"execute-sql-queries",level:3},{value:"Insert data",id:"insert-data",level:3},{value:"Create and manage tables",id:"create-and-manage-tables",level:3},{value:"Data transformation pipeline",id:"data-transformation-pipeline",level:3},{value:"Development",id:"development",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"motherduck-adaptor-developer-readmemd",children:"motherduck Adaptor developer README.md"})}),"\n",(0,r.jsxs)(n.p,{children:["Source: ",(0,r.jsx)(n.a,{href:"https://github.com/OpenFn/adaptors/tree/main/packages/motherduck",children:"https://github.com/OpenFn/adaptors/tree/main/packages/motherduck"})]}),"\n",(0,r.jsxs)(n.h1,{id:"language-motherduck-",children:["Language MotherDuck ",(0,r.jsx)("img",{src:"./assets/square.png",width:"30",height:"30"})]}),"\n",(0,r.jsx)(n.p,{children:"OpenFn Adaptor for building expressions and operations to interact with\nMotherDuck, the serverless cloud analytics platform powered by DuckDB."}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "token": "your_motherduck_token_here",\n  "database": "my_database"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"With session hint for read scaling:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "token": "your_motherduck_token_here",\n  "database": "my_database",\n  "sessionHint": "primary"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"sample-expressions",children:"Sample Expressions"}),"\n",(0,r.jsx)(n.h3,{id:"execute-sql-queries",children:"Execute SQL queries"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"query('SELECT * FROM users WHERE age > 25');\n\nquery(`\n  SELECT \n    COUNT(*) as total_users,\n    AVG(age) as average_age\n  FROM users\n  WHERE created_at >= '2024-01-01'\n`);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"insert-data",children:"Insert data"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"insert('users', {\n  name: 'John Doe',\n  age: 30,\n  email: 'john@example.com',\n});\n\ninsertMany('users', [\n  { name: 'Alice', age: 28, email: 'alice@example.com' },\n  { name: 'Bob', age: 35, email: 'bob@example.com' },\n]);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-and-manage-tables",children:"Create and manage tables"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"createTable('analytics', [\n  { name: 'id', type: 'INTEGER PRIMARY KEY' },\n  { name: 'event_name', type: 'VARCHAR(100)', required: true },\n  { name: 'timestamp', type: 'TIMESTAMP', default: 'CURRENT_TIMESTAMP' },\n  { name: 'user_id', type: 'INTEGER' },\n]);\n\ndropTable('old_table', { ifExists: true });\n"})}),"\n",(0,r.jsx)(n.h3,{id:"data-transformation-pipeline",children:"Data transformation pipeline"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Extract: Query source data\nquery('SELECT * FROM raw_events WHERE processed = false');\n\n// Transform: Process the data\nmap($.data, event => ({\n  ...event,\n  processed_at: new Date().toISOString(),\n  category: event.type === 'click' ? 'engagement' : 'other',\n}));\n\n// Load: Insert processed data\ninsertMany('processed_events', state => state.data);\n\n// Mark as processed\nquery('UPDATE raw_events SET processed = true WHERE processed = false');\n"})}),"\n",(0,r.jsx)(n.h2,{id:"development",children:"Development"}),"\n",(0,r.jsxs)(n.p,{children:["Clone the ",(0,r.jsx)(n.a,{href:"https://github.com/OpenFn/adaptors",children:"adaptors monorepo"}),'. Follow the\n"Getting Started" guide inside to get set up.']}),"\n",(0,r.jsxs)(n.p,{children:["Run tests using ",(0,r.jsx)(n.code,{children:"pnpm run test"})," or ",(0,r.jsx)(n.code,{children:"pnpm run test:watch"})]}),"\n",(0,r.jsxs)(n.p,{children:["Build the project using ",(0,r.jsx)(n.code,{children:"pnpm build"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>d,x:()=>o});var t=a(96540);const r={},s=t.createContext(r);function d(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);