"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[11841],{8183:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"instant-openhie","title":"Instant OpenHIE","description":"Please note that OpenFn/microservice and OpenFn/devtools are being deprecated","source":"@site/versioned_docs/version-legacy/instant-openhie.md","sourceDirName":".","slug":"/instant-openhie","permalink":"/documentation/legacy/instant-openhie","draft":false,"unlisted":false,"editUrl":"https://github.com/openfn/docs/edit/main/versioned_docs/version-legacy/instant-openhie.md","tags":[],"version":"legacy","frontMatter":{"title":"Instant OpenHIE"},"sidebar":"docs","previous":{"title":"Portability","permalink":"/documentation/legacy/portability"},"next":{"title":"Project Management","permalink":"/documentation/legacy/manage/platform-mgmt"}}');var o=t(74848),r=t(28453);const s={title:"Instant OpenHIE"},a=void 0,h={},c=[{value:"Overview",id:"overview",level:2},{value:"Use Cases for the Prototype Implementation",id:"use-cases-for-the-prototype-implementation",level:2},{value:"User stories",id:"user-stories",level:3},{value:"Implementation Design",id:"implementation-design",level:2},{value:"Explore the Implementation",id:"explore-the-implementation",level:2},{value:"About the Implementation Setup",id:"about-the-implementation-setup",level:2},{value:"Processes",id:"processes",level:3},{value:"Project Configuration Steps",id:"project-configuration-steps",level:3},{value:"Job writing notes",id:"job-writing-notes",level:2},{value:"System Deployment Steps",id:"system-deployment-steps",level:2}];function l(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.admonition,{title:"Microservice and devtools have been replaced by Lightning",type:"caution",children:(0,o.jsxs)(n.p,{children:["Please note that OpenFn/microservice and OpenFn/devtools are being deprecated\nand replaced by OpenFn/lightning. Lightning may be used within Instant OpenHIE\n(instead of microservice) as an OpenHIE-compliant workflow engine that can\ninterface with the OpenHIE Interoperability Layer\n(",(0,o.jsx)(n.a,{href:"/documentation/legacy/about-lightning#standards-and-compliance-matter",children:"learn more"}),")."]})}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(n.p,{children:["In partnership with ",(0,o.jsx)(n.a,{href:"https://digitalsquare.org/",children:"Digital Square"})," and ",(0,o.jsx)(n.em,{children:"FCDO COVIDaction"}),",\n",(0,o.jsx)(n.strong,{children:"OpenFn has been investing in its open source integration toolkit"})," to provide\nrobust integration solutions that can connect ",(0,o.jsx)(n.em,{children:"any digital health system"})," and be\nrapidly implemented on any server, in any country, by any organization."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn/microservice"})})," is a fully ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/display/resources/Instant+OpenHIE",children:"Instant\nOpenHIE"})," compliant component which can be used to drive\nworkflow, achieve compliance with standards, and integrate components of the\n",(0,o.jsx)(n.a,{href:"https://openhim.readthedocs.io/en/latest/implementations/openhie.html",children:"OpenHIE stack"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["We seek to enhance the value of the ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/display/resources/Instant+OpenHIE",children:"Instant OpenHIE"})," project by\ndeveloping a package that will include ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," as an integration\npathway for connecting with the ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/pages/viewpage.action?pageId=8454157",children:"OpenHIE architecture"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["This package aims to enhance the value of ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/display/resources/Instant+OpenHIE",children:"Instant OpenHIE"})," by\nproviding another option for robust information processing, integration, and\nbusiness process (workflow) automation. When deploying ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/display/resources/Instant+OpenHIE",children:"Instant\nOpenHIE"}),", implementers now have the option to include\n",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," as a component."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," may also be used as a workflow engine to automate complex\nbusiness logic alongside ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"})," and the ",(0,o.jsx)(n.a,{href:"https://openhim.readthedocs.io/en/latest/implementations/openhie.html",children:"OpenHIE\nstack"}),". Individual ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"jobs"})," in ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"}),", sometimes\nmany in a single microservice deployment, may be used as ",(0,o.jsx)(n.em,{children:"\u201cmediators\u201d"})," (",(0,o.jsx)(n.a,{href:"http://openhim.org/mediator-library/",children:"see\nOpenHIE library of existing mediators"}),") to quickly transform and map\ndata to the ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/pages/viewpage.action?pageId=8454157",children:"OpenHIE architecture"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["To demonstrate a real-world use case for how ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," might be\nimplemented in the ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/pages/viewpage.action?pageId=8454157",children:"OpenHIE architecture"}),", we met with\nseveral community members to identify key use cases for a reference prototype\nimplementation."]}),"\n",(0,o.jsxs)(n.p,{children:["Visit the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo",children:"demo repo here"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"use-cases-for-the-prototype-implementation",children:"Use Cases for the Prototype Implementation"}),"\n",(0,o.jsx)(n.p,{children:"We\u2019ve seen that the most common integration use case is that health service\ndelivery providers, especially large community health worker (\u201cCHW\u201d)\ninterventions, need to integrate their data and programming into national\neHealth architectures."}),"\n",(0,o.jsx)(n.h3,{id:"user-stories",children:"User stories"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.em,{children:"As a community health implementer, I want to integrate my CommCare case\nmanagement application used by CHWs with the national patient registry, so\nthat I can develop a shared health record and automate reporting\npipelines."})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.em,{children:"As a health services provider, I want to integrate my existing application\nwith the national HIS, but I want to apply the FHIR standard to my data\ncollected before sharing to adhere to compliance and reporting\nrequirements."})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["We therefore decided to build an integration solution that demonstrates how\nexisting ",(0,o.jsx)(n.strong,{children:"CHW"})," applications can be integrated with the national health\ninfrastructure and leverage a simple job on ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," as a\n",(0,o.jsx)(n.a,{href:"http://openhim.org/mediator-library/",children:"mediator"})," to apply the ",(0,o.jsx)(n.a,{href:"https://fhir.org/",children:"FHIR data standard"})," and other data\nmanipulation needed to integrate with ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI FHIR"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"implementation-design",children:"Implementation Design"}),"\n",(0,o.jsxs)(n.p,{children:["In sum, the prototype sends patient case registration data from mobile data\ncollection apps (",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"}),", ",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"KoboToolbox"}),") to\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn/microservice"}),". ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," then transforms the\ndata and ensures that it adheres to the ",(0,o.jsx)(n.a,{href:"https://fhir.org/",children:"FHIR"})," ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/patient-example.json.html",children:"patient"})," and\n",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/encounter-example.json.html",children:"encounter"})," data standards, before sending it onwards to a ",(0,o.jsx)(n.a,{href:"https://fhir.org/",children:"FHIR\nchannel"})," in the ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"}),". ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"})," is used as a\n_\u201cchannel\u201d_ here for the ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/pages/viewpage.action?pageId=8454157",children:"OpenHIE architecture"})," to\nvalidate requests and forward them onto other systems in the ",(0,o.jsx)(n.strong,{children:"national eHealth\narchitecture"}),". In this case, we forward the case data onwards to register the\npatients in a ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI FHIR"})," server."]}),"\n",(0,o.jsxs)(n.p,{children:["This implementation design was determined to be the highest value/most in-demand\nbecause it leverages the core functionality of ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"})," (providing a\nreverse proxy and generating an audit trail) without requiring integrators to\nbuild a new ",(0,o.jsx)(n.a,{href:"http://openhim.org/mediator-library/",children:"mediator\u2014a"})," process that is more complex than\nconfiguring a ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"job"})," within an ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/example-build",children:"OpenFn project"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"This prototype includes the following components:"}),"\n",(0,o.jsxs)(n.p,{children:["An ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/display/resources/Instant+OpenHIE",children:"Instant OpenHIE"})," instance can be spun up which contains\n",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI FHIR"}),", ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"}),", and a single\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn/microservice"})," deployment (a\n",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"project.yaml"})," file, exported from ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn/platform"}),") with\n2 different ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"jobs"}),". When data is forwarded to\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn/microservice"})," from two distinct form submissions on\n",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"})," and ",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"Kobo"}),", it is processed and creates ",(0,o.jsx)(n.a,{href:"https://fhir.org/",children:"FHIR"}),"\npatient resources via ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"})," and ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI FHIR"}),". We\u2019ve opted\nfor a single ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn/microservice"})," \u201cproject\u201d with two\nslightly different ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"jobs"})," and ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/triggers",children:"triggers"})," to highlight the\nversatility of ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/example-build",children:"OpenFn projects"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"explore-the-implementation",children:"Explore the Implementation"}),"\n",(0,o.jsxs)(n.p,{children:["Currently, there are two different ways to explore this demo. The first (the\nmore traditional ",(0,o.jsx)(n.em,{children:"\u201cInstant\u201d"})," way) is by ",(0,o.jsx)(n.strong,{children:"cloning the OpenFn/instant-demo\nrepo"}),". Once inside, users type ",(0,o.jsx)(n.em,{children:"\u201cyarn setup\u201d"})," to get everything up and running.\nRunning ",(0,o.jsx)(n.em,{children:"\u201cyarn test\u201d"})," will then demonstrate the\n",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"Kobo"}),"/",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"})," to ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," to ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"})," to\n",(0,o.jsx)(n.a,{href:"https://fhir.org/",children:"FHIR"})," flows."]}),"\n",(0,o.jsxs)(n.p,{children:["They can explore the various ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"jobs"}),", sample payloads, endpoints, and post\ndata to the various endpoints using either the data forwarding settings in\n",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"})," and ",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"Kobo"})," or via ",(0,o.jsx)(n.a,{href:"https://curl.se/",children:"CURL"})," (or their HTTP request\nagent of choice.)"]}),"\n",(0,o.jsxs)(n.p,{children:["Once running, users can see how standard ",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"})," and ",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"Kobo"}),"\nsubmissions are transformed by the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn/microservice"})," to\nadhere to the ",(0,o.jsx)(n.a,{href:"https://fhir.org/",children:"FHIR"})," specifications for ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/patient-example.json.html",children:"patients"})," and\n",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/encounter-example.json.html",children:"encounters"}),", and then that those subsequent resources are created\non the ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI FHIR"})," server, via a channel on the ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["The second (slightly less conventional way) to explore the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo",children:"demo"}),",\nis via ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn.org"}),". Since ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/example-build",children:"OpenFn projects"})," can be run in\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"microservice"})," or on the ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"hosted platform"}),", we\u2019ve\nprovided a project instance at ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn.org"})," that allows users to explore\nthe configuration required to incorporate ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," in an ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/display/resources/Instant+OpenHIE",children:"Instant\nOpenHIE"})," project. There are three ",(0,o.jsx)(n.a,{href:"https://openfn.org/projects/p5pqx3/jobs",children:"jobs"})," which can\nbe accessed with a ",(0,o.jsx)(n.strong,{children:"demo user"})," with ",(0,o.jsxs)(n.em,{children:["username: ",(0,o.jsx)(n.a,{href:"mailto:demo@openfn.org",children:"demo@openfn.org"})]})," and\n",(0,o.jsx)(n.em,{children:"password:guest123"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"The three jobs will show:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["How a ",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"})," submission is transformed and sent to ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI\nFHIR"}),";"]}),"\n",(0,o.jsxs)(n.li,{children:["How a ",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"Kobo"})," submission is transformed and sent to ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI\nFHIR"}),";"]}),"\n",(0,o.jsxs)(n.li,{children:["And what the final resources that would be sent to ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI FHIR"})," look\nlike."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["It\u2019s our hope that this will provide a valuable entry-point for ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/display/resources/Instant+OpenHIE",children:"Instant\nOpenHIE"})," configuration with\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn/microservices"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"about-the-implementation-setup",children:"About the Implementation Setup"}),"\n",(0,o.jsx)(n.h3,{id:"processes",children:"Processes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["We met with ",(0,o.jsx)(n.a,{href:"https://ohie.org/tag/community/",children:"OpenHIE community members"})," to understand use cases,\nand with ",(0,o.jsx)(n.a,{href:"https://www.jembi.org/",children:"Jembi Health Systems"})," to learn about ",(0,o.jsx)(n.a,{href:"https://wiki.ohie.org/display/resources/Instant+OpenHIE",children:"Instant\nOpenHIE"})," packages, specifications, and compliance\nrequirements."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Identified sample data sources (real ",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"})," and ",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"Kobo"}),"\ncase registration forms - see here) that we could use to send data to the\n",(0,o.jsx)(n.strong,{children:"national eHealth architecture"}),". Here is a ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/blob/main/fixtures/commcare_sample.json",children:"sample submission payload from\nCommCare"})," Here is a ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/blob/main/fixtures/koboCaseRegistration.json",children:"sample submission payload from\nKobo"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Reviewed ",(0,o.jsx)(n.a,{href:"https://fhir.org/",children:"FHIR-HL7"})," documentation to determine data standard\nrequirements for patient data and encounter data. See ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/patient-example.json.html",children:"FHIR patient\nspec"})," and ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/encounter-example.json.html",children:"FHIR encounter spec"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Evaluated ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," vs. ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"})," capabilities to determine\nhow to use. Determined that using an ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM channel"})," will leverage\nthe core audit trail functionality from ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"}),", but not require us\nto build a ",(0,o.jsx)(n.a,{href:"http://openhim.org/mediator-library/",children:"new mediator"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"project-configuration-steps",children:"Project Configuration Steps"}),"\n",(0,o.jsxs)(n.p,{children:["There are two ways to set up a ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"project.yaml"})," to run as a\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"microservice"}),". The first is to use the ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn.org\nplatform"}),", and the second way is to use ",(0,o.jsx)(n.a,{href:"/documentation/legacy/devtools/home#configure-an-openfn-project",children:"OpenFn/devtools"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"These two methods are detailed below:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configure a project using the OpenFn.org platform"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["This option allows organisations to leverage ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn.org"}),"\u2019s\nbuilt-in features for easy ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/example-build",children:"project"})," setup, ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"job writing"}),"\nand source code management."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"project.yaml"})," file generated from this project setup will\nthen be used as the base structure for the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn\nMicroservice"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The steps to setup the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn Microservice"})," project\nusing the ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn.org platform"})," are as below:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["A. Add ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/credentials",children:"credentials"})," to the project which will be used to connect\nthe OpenFn Microservice to OpenHIM."]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["This is also an opportunity to add ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/credentials",children:"credentials"})," which ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn\nMicroservice"})," may use to connect to source systems\n(such as ",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"})," or ",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"KoBotoolbox"}),") ."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["B. Add ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/triggers",children:"triggers"})," to the project which will be used by the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn\nMicroservice"})," to match payloads from source systems to\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"OpenFn Microservice Jobs"}),"."]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Note that the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"Microservice"})," is configured to run a\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"job"})," based on the shape of the incoming payload."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["For example, a ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/triggers",children:"trigger"})," may be configured to match payloads, from\n",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"}),", which contain the\n",(0,o.jsx)(n.code,{children:'{"@name": "Register New Patient"}'})," message in their message body."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["A given ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"job"})," will then match against this message, and will be\ninvoked by the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn Microservice"})," to (a) create a\npayload in the ",(0,o.jsx)(n.a,{href:"https://fhir.org/",children:"FHIR standard"})," containing an ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/encounter-example.json.html",children:"Encounter\nResource"})," and (b) send the ",(0,o.jsx)(n.a,{href:"https://www.hl7.org/fhir/patient-example.json.html",children:"FHIR Standard"}),"\nPayload to ",(0,o.jsx)(n.a,{href:"http://openhim.org/",children:"OpenHIM"})," with instructions to load it to ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI\nFHIR"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["C. Export the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"project.yaml"})," file using the Export Wizard of\nthe ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn.org"})]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"generated YAML"})," file will then be used by the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn\nMicroservice"})," to execute the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"jobs"})," for the\nmatching payloads."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Configure a project using the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/devtools/home#configure-an-openfn-project",children:"OpenFn/devtools"})]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["This option allows organisations to configure the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/example-build",children:"project"})," and\nhost ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs#a-basic-expression",children:"job expression"})," source files, for ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/example-build",children:"OpenFn Microservice\nprojects"}),", without using the ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn platform"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["With this option, it is recommended that organisations use source\nversioning tools and platforms such as ",(0,o.jsx)(n.code,{children:"git"})," and ",(0,o.jsx)(n.code,{children:"github"})," to manage the\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/example-build",children:"project"})," and ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs#a-basic-expression",children:"job expression"})," source code/files."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["To configure the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn Microservice project"})," using\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/devtools/home#configure-an-openfn-project",children:"OpenFn/devtools"}),", create a local folder or github repository to\nhost your project configuration files. Inside this folder, one would then\nperform the following actions:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Create a credential.json file"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Add credentials as shown in the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/blob/main/openfn/docker/config/project.yaml#L165-L167",children:"sample credential here"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs#a-basic-expression",children:"job expressions"}),". In this case, one would create the\n",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/tree/main/expressions",children:"CommCare-to-OpenHIM"})," and ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/tree/main/expressions",children:"Kobo-to-OpenHIM"}),"\nexpressions as shown in the demo expressions ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/tree/main/expressions",children:"here"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Run the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/devtools/#configure-an-openfn-project",children:"OpenFn CLI"})," to configure the rest of the project. The\n",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/devtools/#configure-an-openfn-project",children:"CLI"})," will assemble the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"project.yaml"})," file from\nthe different artifacts as provided. See detailed steps in the\ndocumentation site ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/devtools/#configure-an-openfn-project",children:"here"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The last step of the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/devtools/#configure-an-openfn-project",children:"CLI"})," prompts will allow one to export\nthe ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"Project YAML file"}),", which will then be used by the\n",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn Microservice"})," to execute the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"jobs"})," for\nmatching payloads."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"job-writing-notes",children:"Job writing notes"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," provides two ways of writing jobs:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Using the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/jobs/job-studio",children:"OpenFn.org\u2019s Job Studio"})," as detailed in the documentation\nsite ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs",children:"here"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["With this option, if editing an existing ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs#a-basic-expression",children:"Job Expression"}),", one\nwould be expected to use ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn.org Project Export service"})," to\nre-generate the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"Project YAML"})," file for the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn\nMicroservice"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Using ",(0,o.jsx)(n.a,{href:"/documentation/legacy/devtools/home#configure-an-openfn-project",children:"OpenFn/devtools"}),".","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["This option also allows organisations to write ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs#a-basic-expression",children:"job expressions"}),"\nwithout using the ",(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn\u2019s hosted service"}),". See detailed\ndocumentation ",(0,o.jsx)(n.a,{href:"/documentation/legacy/devtools/home#configure-an-openfn-project",children:"here"})]}),"\n",(0,o.jsxs)(n.li,{children:["With this option, if editing an existing ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/jobs#a-basic-expression",children:"Job Expression"}),", one\nwould be expected to run the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/devtools/#configure-an-openfn-project",children:"OpenFn CLI"}),", to re-generate the\n",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"Project YAML file"})," for the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn\nMicroservice"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"system-deployment-steps",children:"System Deployment Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://openfn.org/",children:"OpenFn"})," provides an automated deployment script that allows system admins to\nsetup and run the ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"OpenFn Microservice"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["For example, to run the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo",children:"Instant-demo Microservice"}),", the\nfollowing steps are recommended:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Clone the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo",children:"OpenFn/instant-demo repo"})]}),"\n",(0,o.jsxs)(n.li,{children:["Overwrite the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/blob/main/openfn/docker/config/project.yaml",children:"sample \u201cproject.yaml\u201d"})," file with your newly\ngenerated ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"project.yaml file"}),", or use the existing ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/microservice/blob/main/project.yaml.example",children:"YAML\nfile"})," to deploy the demo project. Run the setup command as\ndescribed in the documentation ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo",children:"here"})]}),"\n",(0,o.jsxs)(n.li,{children:["Verify the system is working by ",(0,o.jsx)(n.a,{href:"https://curl.se/",children:"curling"})," data (or submitting forms on\n",(0,o.jsx)(n.a,{href:"https://www.commcarehq.org/",children:"CommCare"}),"/",(0,o.jsx)(n.a,{href:"https://www.kobotoolbox.org/",children:"Kobo"}),") matching their ",(0,o.jsx)(n.a,{href:"/documentation/legacy/build/triggers",children:"triggers"})," to\nthe ",(0,o.jsx)(n.a,{href:"/documentation/legacy/microservice/home",children:"microservice"})," endpoint ",(0,o.jsx)(n.code,{children:"(localhost:4001/inbox)"})," and\nchecking to see that resources are created in ",(0,o.jsx)(n.a,{href:"https://hapifhir.io/",children:"HAPI FHIR"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Note how the ",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/blob/main/test.js",children:"test.js file"})," handles this verification with the\n",(0,o.jsx)(n.a,{href:"https://github.com/OpenFn/instant-demo/blob/main/openfn/docker/config/project.yaml",children:"sample project.yaml"})]}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(96540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);