"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[45702],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(a),h=o,m=u["".concat(s,".").concat(h)]||u[h]||d[h]||r;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},41921:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var n=a(87462),o=(a(67294),a(3905));const r={title:"CKAN"},i=void 0,l={unversionedId:"ckan",id:"ckan",title:"CKAN",description:"App Overview",source:"@site/adaptors/ckan.md",sourceDirName:".",slug:"/ckan",permalink:"/adaptors/ckan",draft:!1,tags:[],version:"current",frontMatter:{title:"CKAN"},sidebar:"adaptors",previous:{title:"Community Health Toolkit",permalink:"/adaptors/cht"},next:{title:"CommCare",permalink:"/adaptors/commcare"}},s={},p=[{value:"App Overview",id:"app-overview",level:2},{value:"Helpful Features &amp; Plug-ins",id:"helpful-features--plug-ins",level:3},{value:"Integration Use Cases",id:"integration-use-cases",level:2},{value:"Example user stories:",id:"example-user-stories",level:3},{value:"APIs &amp; Integration Options",id:"apis--integration-options",level:2},{value:"Webhook/webservice for CKAN",id:"webhookwebservice-for-ckan",level:2},{value:"Getting Started with CKAN",id:"getting-started-with-ckan",level:2},{value:"API Notes",id:"api-notes",level:3},{value:"JSONP support",id:"jsonp-support",level:4},{value:"App Installation",id:"app-installation",level:3},{value:"OpenFn Adaptor",id:"openfn-adaptor",level:2},{value:"Implementation Examples",id:"implementation-examples",level:2}],c={toc:p};function u(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"app-overview"},"App Overview"),(0,o.kt)("p",null,"CKAN (Comprehensive Knowledge Archive Network) is the world\u2019s leading\nopen-source data portal platform. CKAN makes it easy to publish, share and work\nwith data. It's a data management system that provides a powerful platform for\ncataloging, storing and accessing datasets with a rich front-end, full API (for\nboth data and catalog), visualization tools and more."),(0,o.kt)("p",null,"CKAN is a tool for making open data websites. It helps you manage and publish\ncollections of data. It is used by national and local governments, research\ninstitutions, and other organizations who collect a lot of data. See the public\ndocumentation for more:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://ckan.org/"},"https://ckan.org/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.ckan.org/en/2.9/user-guide.html#what-is-ckan"},"https://docs.ckan.org/en/2.9/user-guide.html#what-is-ckan"))),(0,o.kt)("h3",{id:"helpful-features--plug-ins"},"Helpful Features & Plug-ins"),(0,o.kt)("p",null,"See\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.ckan.org/en/2.9/extensions/index.html"},"https://docs.ckan.org/en/2.9/extensions/index.html")),(0,o.kt)("p",null,"Helpful features include:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"The CKAN DataStore extension provides an ad hoc database for storage of\nstructured data from CKAN resources."),(0,o.kt)("li",{parentName:"ol"},"Advanced geospatial features, covering data preview, search, and discovery."),(0,o.kt)("li",{parentName:"ol"},"An intuitive web interface that allows you to easily register, update and\nrefine datasets."),(0,o.kt)("li",{parentName:"ol"},"Completely customizable with themes to match your brand."),(0,o.kt)("li",{parentName:"ol"},"Creation of a federated network of data portals which share data between each\nother."),(0,o.kt)("li",{parentName:"ol"},"Rich search experience which allows for quick \u2018Google-style\u2019 keyword search\nand filtering."),(0,o.kt)("li",{parentName:"ol"},"Create data-visualisation views and expose data as line, bar and pie charts."),(0,o.kt)("li",{parentName:"ol"},"Upload media and image files. Stores files either on the server or in the\ncloud using extensions."),(0,o.kt)("li",{parentName:"ol"},"CKAN allows you to pick and choose which features you want to use for your\ndata portal. Or, you can easily develop your own by following the extending\nguide!")),(0,o.kt)("h2",{id:"integration-use-cases"},"Integration Use Cases"),(0,o.kt)("p",null,"CKAN has been adopted by enterprise organisations in sectors such as resources,\nenergy, pharmaceuticals and finance to publish and manage internal data assets.\nIn addition, CKAN is widely used, mainly in the field of open government data,\nwhere it has become a de facto standard software package. CKAN powers the\nnational open data portals of the UK, the USA, Australia or the EU, to name only\na few well-known examples."),(0,o.kt)("p",null,"Using the API you can do things like:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Access any bit of information in CKAN (if you are authorized!)"),(0,o.kt)("li",{parentName:"ul"},"Edit any piece of information in CKAN"),(0,o.kt)("li",{parentName:"ul"},"Create a whole new web front-end for CKAN (if you want!)")),(0,o.kt)("h3",{id:"example-user-stories"},"Example user stories:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"As a data collector, I want to create a data portal to easily publish and\nshare datasets with my community/peers/hub, so that they can leverage my data\nfor further research.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"As a researcher, I want a way to search for datasets related to my research\ndomain, so that I can run analyses and incorporate other datasets into my\nstudies.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"As a data hub, I want to create a web portal where researchers can easily\nbrowse, share, download, and discuss datasets and research activites, so that\nI can enhance communication, collaboration, and exchange across partners."))),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"https://docs.ckan.org/en/ckan-1.8/user-stories-list.html"},"https://docs.ckan.org/en/ckan-1.8/user-stories-list.html")," for more\napp-specific user stories."),(0,o.kt)("h2",{id:"apis--integration-options"},"APIs & Integration Options"),(0,o.kt)("p",null,"The APIs available depend on the CKAN version you're using. See API docs:\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.ckan.org/en/2.9/api/index.html"},"https://docs.ckan.org/en/2.9/api/index.html")),(0,o.kt)("p",null,"All of a CKAN website\u2019s core functionality (everything you can do with the web\ninterface and more) can be used by external code that calls the CKAN API. The\nCKAN API follows the RESTful (Representational State Transfer) style and uses\nJSON by default."),(0,o.kt)("p",null,"For example, using the CKAN API your app can:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Get JSON-formatted lists of a site\u2019s datasets, groups or other CKAN objects:\n",(0,o.kt)("a",{parentName:"li",href:"http://demo.ckan.org/api/3/action/package_list"},"http://demo.ckan.org/api/3/action/package_list")),(0,o.kt)("li",{parentName:"ul"},"Get a full JSON representation of a dataset, resource or other object:\n",(0,o.kt)("a",{parentName:"li",href:"http://demo.ckan.org/api/3/action/package_show?id=adur_district_spending"},"http://demo.ckan.org/api/3/action/package_show?id=adur_district_spending")),(0,o.kt)("li",{parentName:"ul"},"Search for packages or resources matching a query:\n",(0,o.kt)("a",{parentName:"li",href:"http://demo.ckan.org/api/3/action/package_search?q=spending"},"http://demo.ckan.org/api/3/action/package_search?q=spending")),(0,o.kt)("li",{parentName:"ul"},"Create, update and delete datasets, resources and other objects"),(0,o.kt)("li",{parentName:"ul"},"Get an activity stream of recently changed datasets on a site:\n",(0,o.kt)("a",{parentName:"li",href:"http://demo.ckan.org/api/3/action/recently_changed_packages_activity_list"},"http://demo.ckan.org/api/3/action/recently_changed_packages_activity_list"))),(0,o.kt)("p",null,"Beyond using OpenFn to connect with the API, you can access the API using one\nthe dedicated tools or libraries written specifically for CKAN. The following\nclients are available:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"dpm (data package manager): command-line client and Python library (maintained\nby core CKAN team)"),(0,o.kt)("li",{parentName:"ul"},"ckanclient - CKAN Python Client: Python client maintained by the core CKAN\nteam"),(0,o.kt)("li",{parentName:"ul"},"CKAN Ruby: Ruby Client"),(0,o.kt)("li",{parentName:"ul"},"Ckan_client-PHP: PHP client"),(0,o.kt)("li",{parentName:"ul"},"Ckan_client-J: Java client"),(0,o.kt)("li",{parentName:"ul"},"net-ckan: PERL client"),(0,o.kt)("li",{parentName:"ul"},"ckanjs: sophisticated Javascript client built on Backbone."),(0,o.kt)("li",{parentName:"ul"},"Google Refine CKAN Extension: Google Refine client which allows you to get and\npush data to and from a CKAN instance using Google Refine.")),(0,o.kt)("h2",{id:"webhookwebservice-for-ckan"},"Webhook/webservice for CKAN"),(0,o.kt)("p",null,"See documentation on:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"ckanext-webhooks: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/datacats/ckanext-webhooks"},"https://github.com/datacats/ckanext-webhooks")),(0,o.kt)("li",{parentName:"ul"},"ckanext-geopusher : ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/datacats/ckanext-geopusher"},"https://github.com/datacats/ckanext-geopusher"))),(0,o.kt)("h2",{id:"getting-started-with-ckan"},"Getting Started with CKAN"),(0,o.kt)("p",null,"CKAN offers robust, public documentation. See the\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.ckan.org/en/2.9/user-guide.html"},"CKAN User Guide"),"."),(0,o.kt)("h3",{id:"api-notes"},"API Notes"),(0,o.kt)("p",null,"CKAN exposes all core features to its API. See the API guide:\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.ckan.org/en/2.9/api/"},"https://docs.ckan.org/en/2.9/api/")),(0,o.kt)("p",null,"CKAN\u2019s ",(0,o.kt)("inlineCode",{parentName:"p"},"FileStore")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"DataStore")," have their own APIs, see:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"FileStore and file uploads:\n",(0,o.kt)("a",{parentName:"li",href:"https://docs.ckan.org/en/2.9/maintaining/filestore.html"},"https://docs.ckan.org/en/2.9/maintaining/filestore.html")),(0,o.kt)("li",{parentName:"ul"},"DataStore extension: ",(0,o.kt)("a",{parentName:"li",href:"https://docs.ckan.org/en/2.9/maintaining/datastore.html"},"https://docs.ckan.org/en/2.9/maintaining/datastore.html"))),(0,o.kt)("p",null,"Note that some API functions require authorization. The API uses the same\nauthorization functions and configuration as the web interface, so if a user is\nauthorized to do something in the web interface they\u2019ll be authorized to do it\nvia the API as well."),(0,o.kt)("p",null,"To call the CKAN API, post a JSON dictionary in an HTTP POST request to one of\nCKAN\u2019s API URLs. The parameters for the API function should be given in the JSON\ndictionary. CKAN will also return its response in a JSON dictionary."),(0,o.kt)("p",null,"One way to post a JSON dictionary to a URL is using the command-line client\nCurl. For example, to get a list of the names of all the datasets in the\ndata-explorer group on demo.ckan.org, install curl and then call the group_list\nAPI function by running this command in a terminal:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"curl https://demo.ckan.org/api/3/action/group_list\n")),(0,o.kt)("p",null,"The response from CKAN will look like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n    "help": "...",\n    "result": [\n        "data-explorer",\n        "department-of-ricky",\n        "geo-examples",\n        "geothermal-data",\n        "reykjavik",\n        "skeenawild-conservation-trust"\n    ],\n    "success": true\n}\n')),(0,o.kt)("h4",{id:"jsonp-support"},"JSONP support"),(0,o.kt)("p",null,"To cater for scripts from other sites that wish to access the API, the data can\nbe returned in JSONP format, where the JSON data is \u2018padded\u2019 with a function\ncall. The function is named in the \u2018callback\u2019 parameter. For example:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://demo.ckan.org/api/3/action/package_show?id=adur_district_spending&callback=myfunction"},"http://demo.ckan.org/api/3/action/package_show?id=adur_district_spending&callback=myfunction")),(0,o.kt)("p",null,"CKAN's source code can be found at github."),(0,o.kt)("p",null,"Example normal request:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"GET /api/rest/dataset/pollution_stats\n")),(0,o.kt)("p",null,"but now with the callback parameter:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'GET /api/rest/dataset/pollution_stats?callback=name-of-callback-function\nreturns: jsoncallback({"name": "pollution_stats", ... });\n')),(0,o.kt)("p",null,"This parameter can apply to all POST requests to the Action API and GET requests\nto the Search API and v1/v2/v3 APIs."),(0,o.kt)("h3",{id:"app-installation"},"App Installation"),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.ckan.org/en/2.9/sysadmin-guide.html"},"System Admin guide"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"To install CKAN see:\n",(0,o.kt)("a",{parentName:"li",href:"https://docs.ckan.org/en/2.9/maintaining/installing/index.html?highlight=install%20CKAN"},"https://docs.ckan.org/en/2.9/maintaining/installing/index.html?highlight=install%20CKAN")),(0,o.kt)("li",{parentName:"ul"},"To upgrade CKAN see:\n",(0,o.kt)("a",{parentName:"li",href:"https://docs.ckan.org/en/2.9/maintaining/upgrading/index.html?highlight=configure%20CKAN"},"https://docs.ckan.org/en/2.9/maintaining/upgrading/index.html?highlight=configure%20CKAN"))),(0,o.kt)("p",null,"To provide your API token in an HTTP request, include it in either an\nAuthorization or ",(0,o.kt)("inlineCode",{parentName:"p"},"X-CKAN-API-Key")," header. (The name of the HTTP header can be\nconfigured with the ",(0,o.kt)("inlineCode",{parentName:"p"},"apikey_header_name")," option in your CKAN configuration\nfile.)"),(0,o.kt)("h2",{id:"openfn-adaptor"},"OpenFn Adaptor"),(0,o.kt)("p",null,"Currently no CKAN-specific adaptor exists, but\n",(0,o.kt)("a",{parentName:"p",href:"https://www.github.com/openfn/language-http"},"language-http")," can be implemented\nto access the web API."),(0,o.kt)("h2",{id:"implementation-examples"},"Implementation Examples"),(0,o.kt)("p",null,"CKAN has been implemented in ",(0,o.kt)("a",{parentName:"p",href:"https://catalog.data.gov"},"catalog.data.gov"),",\n",(0,o.kt)("a",{parentName:"p",href:"https://open.canada.ca/data"},"open.canada.ca/data"),", and\n",(0,o.kt)("a",{parentName:"p",href:"https://data.humdata.org"},"data.humdata.org"),"."))}u.isMDXComponent=!0}}]);