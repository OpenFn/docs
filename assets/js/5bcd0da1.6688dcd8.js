"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[73765],{3166:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>l,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"packages/bigquery-readme","title":"bigquery developer readme","description":"Source//github.com/OpenFn/adaptors/tree/main/packages/bigquery","source":"@site/adaptors/packages/bigquery-readme.md","sourceDirName":"packages","slug":"/packages/bigquery-readme","permalink":"/adaptors/packages/bigquery-readme","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"bigquery developer readme","id":"bigquery-readme","keywords":["adaptor","readme","bigquery"]},"sidebar":"adaptors","previous":{"title":"Changelog","permalink":"/adaptors/packages/bigquery-changelog"},"next":{"title":"Functions","permalink":"/adaptors/packages/cartodb-docs"}}');var r=t(74848),a=t(28453);const s={title:"bigquery developer readme",id:"bigquery-readme",keywords:["adaptor","readme","bigquery"]},i="bigquery Adaptor developer README.md",d={},c=[{value:"Documentation",id:"documentation",level:2},{value:"state.json",id:"statejson",level:3},{value:"operations (expression.js)",id:"operations-expressionjs",level:3},{value:"load(...)",id:"load",level:4},{value:"Development",id:"development",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"bigquery-adaptor-developer-readmemd",children:"bigquery Adaptor developer README.md"})}),"\n",(0,r.jsxs)(n.p,{children:["Source: ",(0,r.jsx)(n.a,{href:"https://github.com/OpenFn/adaptors/tree/main/packages/bigquery",children:"https://github.com/OpenFn/adaptors/tree/main/packages/bigquery"})]}),"\n",(0,r.jsx)(n.h1,{id:"language-bigquery",children:"Language BigQuery"}),"\n",(0,r.jsx)(n.p,{children:"Language Pack for building expressions and operations to make HTTP calls."}),"\n",(0,r.jsx)(n.h2,{id:"documentation",children:"Documentation"}),"\n",(0,r.jsx)(n.h3,{id:"statejson",children:"state.json"}),"\n",(0,r.jsx)(n.p,{children:"The configuration key must be a valid GCP credential as JSON."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "configuration": {\n    "type": "service_account",\n    "project_id": "some-project",\n    "private_key_id": "670b9e3c8c366e83aa569dd57cbfc5c575b72e42",\n    "private_key": "-----BEGIN PRIVATE KEY-----\\nblah\\nmoreblah=\\n-----END PRIVATE KEY-----\\n",\n    "client_email": "bigquery@some-project.iam.gserviceaccount.com",\n    "client_id": "someid",\n    "auth_uri": "https://accounts.google.com/o/oauth2/auth",\n    "token_uri": "https://oauth2.googleapis.com/token",\n    "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",\n    "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/bigquery%40some-project.iam.gserviceaccount.com"\n  },\n  "data": { "a": 1 }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"operations-expressionjs",children:"operations (expression.js)"}),"\n",(0,r.jsx)(n.h4,{id:"load",children:"load(...)"}),"\n",(0,r.jsxs)(n.p,{children:["Load data to a table in bigquery from a CSV. See full\n",(0,r.jsx)(n.a,{href:"https://cloud.google.com/bigquery/docs/reference/rest/v2/Job#JobConfigurationLoad",children:"options here"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"load(\n  '/home/taylor/Desktop/type-C_r-ALL_ps-201012_freq-M_px-HS_pub-20200731_fmt-csv_ex-20200818.csv',\n  'awesome-solutions-project', // project\n  'test01', // dataset\n  'mytable', // table\n  {\n    schema:\n      'classification:STRING,year:STRING,period:STRING,period_desc:STRING,aggregate_level:STRING,is_leaf_code:STRING,trade_flow_code:STRING,trade_flow:STRING,reporter_code:STRING,reporter:STRING,reporter_iso:STRING,partner_code:STRING,partner:STRING,partner_iso:STRING,commodity_code:STRING,commodity:STRING,qty_unit_code:STRING,qty_unit:STRING,qty:INTEGER,netweight_kg:INTEGER,trade_value:INTEGER,flag:STRING',\n    schemaUpdateOptions: ['ALLOW_FIELD_ADDITION'],\n    // createDisposition: 'CREATE_IF_NEEDED',\n    writeDisposition: 'WRITE_APPEND',\n    skipLeadingRows: 1,\n  } // loadOptions\n);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"development",children:"Development"}),"\n",(0,r.jsxs)(n.p,{children:["Clone the ",(0,r.jsx)(n.a,{href:"https://github.com/OpenFn/adaptors",children:"adaptors monorepo"}),". Follow the\n",(0,r.jsx)(n.code,{children:"Getting Started"})," guide inside to get set up."]}),"\n",(0,r.jsxs)(n.p,{children:["Run tests using ",(0,r.jsx)(n.code,{children:"pnpm run test"})," or ",(0,r.jsx)(n.code,{children:"pnpm run test:watch"})]}),"\n",(0,r.jsxs)(n.p,{children:["Build the project using ",(0,r.jsx)(n.code,{children:"pnpm build"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["To just build the docs run ",(0,r.jsx)(n.code,{children:"pnpm build docs"})]})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var o=t(96540);const r={},a=o.createContext(r);function s(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);