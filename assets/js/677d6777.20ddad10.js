"use strict";(self.webpackChunk_openfn_docs=self.webpackChunk_openfn_docs||[]).push([[59644],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>d});var t=s(96540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},64083:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"packages/dhis2-readme","title":"dhis2 developer readme","description":"Source//github.com/OpenFn/adaptors/tree/main/packages/dhis2","source":"@site/adaptors/packages/dhis2-readme.md","sourceDirName":"packages","slug":"/packages/dhis2-readme","permalink":"/adaptors/packages/dhis2-readme","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"dhis2 developer readme","id":"dhis2-readme","keywords":["adaptor","readme","dhis2"]},"sidebar":"adaptors","previous":{"title":"Changelog","permalink":"/adaptors/packages/dhis2-changelog"},"next":{"title":"Functions","permalink":"/adaptors/packages/divoc-docs"}}');var r=s(74848),i=s(28453);const o={title:"dhis2 developer readme",id:"dhis2-readme",keywords:["adaptor","readme","dhis2"]},d="dhis2 Adaptor developer README.md",a={},l=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Important Note",id:"important-note",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Helper Functions",id:"helper-functions",level:2},{value:"Development",id:"development",level:2},{value:"Running Tests",id:"running-tests",level:3},{value:"Unit Tests",id:"unit-tests",level:3},{value:"Integration Tests",id:"integration-tests",level:3},{value:"Troubleshooting Tests",id:"troubleshooting-tests",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"dhis2-adaptor-developer-readmemd",children:"dhis2 Adaptor developer README.md"})}),"\n",(0,r.jsxs)(n.p,{children:["Source: ",(0,r.jsx)(n.a,{href:"https://github.com/OpenFn/adaptors/tree/main/packages/dhis2",children:"https://github.com/OpenFn/adaptors/tree/main/packages/dhis2"})]}),"\n",(0,r.jsx)(n.h1,{id:"language-dhis2",children:"Language DHIS2"}),"\n",(0,r.jsxs)(n.p,{children:["An OpenFn language pack for building expressions and operations to work with the\n",(0,r.jsx)(n.a,{href:"https://docs.dhis2.org/en/home.html",children:"DHIS2 API"}),". Commonly used via\n",(0,r.jsx)(n.a,{href:"https://app.openfn.org",children:"OpenFn.org"})," or manually with\n",(0,r.jsx)(n.a,{href:"https://github.com/OpenFn/kit",children:"OpenFn CLI"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getting-started",children:"Getting Started"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#important-note",children:"Important Note"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#configuration",children:"Configuration"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#helper-functions",children:"Helper Functions"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#development",children:"Development"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#running-tests",children:"Running Tests"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#unit-tests",children:"Unit Tests"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#integration-tests",children:"Integration Tests"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#troubleshooting-tests",children:"Troubleshooting Tests"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,r.jsx)(n.p,{children:"To use this package, execute commands via OpenFn/core from the root of the\nrepository:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"openfn job.js -a dhis2 -s tmp/state.json\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For installation and usage, see the\n",(0,r.jsx)(n.a,{href:"https://docs.openfn.org/adaptors/packages/dhis2-docs",children:"docs site"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"important-note",children:"Important Note"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For DHIS2 API versions 2.42+ and the ",(0,r.jsx)(n.strong,{children:"new tracker"}),", use ",(0,r.jsx)(n.strong,{children:"adaptor 6.0+"}),".\nRefer to the\n",(0,r.jsx)(n.a,{href:"https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-master/tracker.html",children:"DHIS2 API documentation"}),"\nfor details."]}),"\n",(0,r.jsxs)(n.li,{children:["For ",(0,r.jsx)(n.strong,{children:"old tracker versions"})," and DHIS2 API versions ",(0,r.jsx)(n.strong,{children:"prior to 2.42"}),", use\n",(0,r.jsx)(n.strong,{children:"adaptor 5.0+"}),". But we highly recommend upgrading to the latest version."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["All required and optional properties for ",(0,r.jsx)(n.code,{children:"state.configuration"})," are defined in\nthe official\n",(0,r.jsx)(n.a,{href:"https://docs.openfn.org/adaptors/packages/dhis2-configuration-schema/",children:"configuration-schema"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Ensure you configure:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Username"}),": DHIS2 admin username"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Password"}),": Corresponding DHIS2 admin password"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Host URL"}),": URL of the DHIS2 instance"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "username": "admin",\n  "password": "district",\n  "hostUrl": "https://play.dhis2.org/2.36.6"\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"helper-functions",children:"Helper Functions"}),"\n",(0,r.jsxs)(n.p,{children:["Helper functions simplify common DHIS2 operations. View the\n",(0,r.jsx)(n.a,{href:"https://docs.openfn.org/adaptors/packages/dhis2-docs",children:"complete function documentation"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"development",children:"Development"}),"\n",(0,r.jsx)(n.h3,{id:"running-tests",children:"Running Tests"}),"\n",(0,r.jsx)(n.p,{children:"To run unit and integration tests, use the following commands:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unit Tests"}),": ",(0,r.jsx)(n.code,{children:"pnpm test"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Integration Tests"}),": ",(0,r.jsx)(n.code,{children:"pnpm test:integration"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Note: Integration tests depend on a live DHIS2 instance."})}),"\n",(0,r.jsx)(n.h3,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,r.jsx)(n.p,{children:"Unit tests validate helper functions independently. For example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Does ",(0,r.jsx)(n.code,{children:"create('events', payload)"})," perform a correct POST request?"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Add new unit tests whenever helper functions are updated."}),"\n",(0,r.jsx)(n.h3,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,r.jsx)(n.p,{children:"Integration tests validate end-to-end behavior with a live DHIS2 instance.\nEnsure your test environment includes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["At least one ",(0,r.jsx)(n.strong,{children:"organisation unit"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["One ",(0,r.jsx)(n.strong,{children:"program"})," and a corresponding ",(0,r.jsx)(n.strong,{children:"program stage"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.strong,{children:"tracked entity instance"})," enrolled in the program."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Modify ",(0,r.jsx)(n.code,{children:"globalState"})," in ",(0,r.jsx)(n.code,{children:"test/integration.js"})," as needed:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"before(done => {\n  fixture.initialState = {\n    configuration: {\n      username: 'admin',\n      password: 'district',\n      hostUrl: 'https://play.dhis2.org/2.36.6',\n    },\n    program: 'IpHINAT79UW',\n    orgUnit: 'DiszpKrYNg8',\n    trackedEntityInstance: 'uhubxsfLanV',\n    programStage: 'eaDHS084uMp',\n  };\n  done();\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting-tests",children:"Troubleshooting Tests"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeout Errors"}),": Increase the global timeout in ",(0,r.jsx)(n.code,{children:"test/mocha.opts"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Environment Issues"}),": Ensure DHIS2 components (programs, org units, etc.)\nare correctly configured."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["For further technical details, see the\n",(0,r.jsx)(n.a,{href:"https://docs.openfn.org/adaptors/packages/dhis2-docs",children:"documentation"})," or contact\nthe ",(0,r.jsx)(n.a,{href:"https://community.openfn.org",children:"OpenFn community"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);